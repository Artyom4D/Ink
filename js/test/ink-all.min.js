!function(a,b){"use strict";if(!("Ink"in a)){var c={},d="INK_STATICMODE"in a?a.INK_STATICMODE:!1,e={},f=[],g={},h=[],i=function(a){if("object"!=typeof a)return!1;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};a.Ink={_checkPendingRequireModules:function(){var a,b,c,d,f,g,i=[];for(a=0,b=h.length;b>a;++a)if(c=h[a]){for(d in c.left)c.left.hasOwnProperty(d)&&(f=e[d],f&&(c.args[c.left[d]]=f,delete c.left[d],--c.remaining));if(c.remaining>0)i.push(c);else{if(g=c.cb,!g)continue;delete c.cb,g.apply(!1,c.args)}}h=i,h.length>0&&setTimeout(function(){Ink._checkPendingRequireModules()},0)},setStaticMode:function(a){d=a},getPath:function(a,b){var d=a.split(/[._]/g),e,f,g,h;for(f=d.length;f>=0;f-=1)if(e=d.slice(0,f+1).join("."),c[e]){g=e;break}return h=c[g||"Ink"],"/"!==h[h.length-1]&&(h+="/"),f<d.length&&(h+=d.slice(f+1).join("/")+"/"),b||(h+="lib.js"),h},setPath:function(a,b){c[a.replace(/_/,".")]=b},loadScript:function(a){if(d)throw new Error("Requiring a module to be loaded dynamically while in static mode");-1===a.indexOf("/")&&(a=this.getPath(a));var c=b.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",a);var e=b.getElementsByTagName("head");e.length>0&&e[0].appendChild(c)},namespace:function(b,c){if(!b||!b.length)return null;for(var d=b.split("."),e=a,f,g=0,h=d.length;h>g;++g)e[d[g]]=e[d[g]]||{},f=e,e=e[d[g]];return c?[f,d[g-1]]:e},getModule:function(a,b){var c=b?[a,"_",b].join(""):a;return e[c]},createModule:function(b,c,d,h){if("string"!=typeof b)throw new Error("module name must be a string!");if(!("number"==typeof c||"string"==typeof c&&c.length>0))throw new Error("version number missing!");var j=function(){var d=[b,"_",c].join("");if(!e[d]){delete g[d],delete g[b];var j=Array.prototype.slice.call(arguments),k=h.apply(a,j);f.push(d),"object"==typeof k?k._version=c:"function"==typeof k&&(k.prototype._version=c,k._version=c);var l=0===b.indexOf("Ink."),m;l&&(m=Ink.namespace(b,!0)),e[d]=k,l&&(m[0][m[1]+"_"+c]=k),e[b]=k,l&&i(m[0][m[1]])&&(m[0][m[1]]=k),this&&Ink._checkPendingRequireModules()}};this.requireModules(d,j)},requireModules:function(a,b){var c,d,f,i,j;if(d=a.length,f={args:new Array(d),left:{},remaining:d,cb:b},"object"!=typeof a||void 0===a.length)throw new Error("Dependency list should be an array!");if("function"!=typeof b)throw new Error("Callback should be a function!");for(c=0;d>c;++c)i=a[c],j=e[i],j?(f.args[c]=j,--f.remaining):(g[i]||(g[i]=!0,Ink.loadScript(i)),f.left[i]=c);f.remaining>0?h.push(f):b.apply(!0,f.args)},getModulesLoadOrder:function(){return f.slice()},getModuleScripts:function(){var a=this.getModulesLoadOrder();return a.unshift("Ink_1"),a=a.map(function(a){return['<script type="text/javascript" src="',Ink.getModuleURL(a),'"></script>'].join("")}),a.join("\n")},createExt:function(a,b,c,d){return Ink.createModule("Ink.Ext."+a,b,c,d)},bind:function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments),e=c.concat(d);return a.apply(b,e)}},bindMethod:function(a,b){return this.bind.apply(this,[a[b],a].concat([].slice.call(arguments,2)))},bindEvent:function(b,c){var d=Array.prototype.slice.call(arguments,2);return function(e){var f=d.slice();return f.unshift(e||a.event),b.apply(c,f)}},i:function(a){if(!a)throw new Error("Ink.i => id or element must be passed");return"string"==typeof a?b.getElementById(a):a},s:function(a,c){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(a,c||b)[0]||null},ss:function(a,c){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(a,c||b)},extendObj:function(a,b){if(arguments.length>2&&(b=Ink.extendObj.apply(this,[].slice.call(arguments,1))),b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a}},Ink.setPath("Ink","INK_PATH"in a?a.INK_PATH:a.location.protocol+"//js.ink.sapo.pt/Ink/")}}(window,document),Ink.createModule("Ink.Net.Ajax","1",[],function(){"use strict";var Ajax=function(a,b){this.init(a,b)};Ajax.globalOptions={parameters:{},requestHeaders:{}};var xMLHttpRequestWithCredentials="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;return Ajax.prototype={init:function(a,b){if(!a)throw new Error("WRONG_ARGUMENTS_ERR");var c=Ink.extendObj({asynchronous:!0,method:"POST",parameters:null,timeout:0,delay:0,postBody:"",contentType:"application/x-www-form-urlencoded",requestHeaders:null,onComplete:null,onSuccess:null,onFailure:null,onException:null,onHeaders:null,onCreate:null,onInit:null,onTimeout:null,sanitizeJSON:!1,evalJS:!0,xhrProxy:"",cors:!1,debug:!1,useCredentials:!1,signRequest:!1},Ajax.globalOptions);if(b&&"object"==typeof b){if(c=Ink.extendObj(c,b),"object"==typeof b.parameters)c.parameters=Ink.extendObj(Ink.extendObj({},Ajax.globalOptions.parameters),b.parameters);else if(null!==b.parameters){var d=this.paramsObjToStr(Ajax.globalOptions.parameters);d&&(c.parameters=b.parameters+"&"+d)}c.requestHeaders=Ink.extendObj({},Ajax.globalOptions.requestHeaders),c.requestHeaders=Ink.extendObj(c.requestHeaders,b.requestHeaders)}this.options=c,this.safeCall("onInit");var e=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");e.href=a,this.url=a,this.isHTTP=e.protocol.match(/^https?:$/i)&&!0,this.requestHasBody=c.method.search(/^get|head$/i)<0,this.isCrossDomain=this.isHTTP&&"widget:"!==location.protocol&&"object"!=typeof window.widget?location.protocol!==e.protocol||location.host!==e.host:!1,this.options.cors&&(this.isCrossDomain=!1),this.transport=this.getTransport(),this.request()},getTransport:function(){if(!xMLHttpRequestWithCredentials&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"==typeof ActiveXObject)return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var a={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1","Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-Ink-Version":"1"};if(this.options.cors&&(this.options.signRequest||delete a["X-Requested-With"],delete a["X-Ink-Version"]),this.options.requestHeaders&&"object"==typeof this.options.requestHeaders)for(var b in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(b)&&(a[b]=this.options.requestHeaders[b]);this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(a.Connection="close");for(var c in a)a.hasOwnProperty(c)&&this.transport.setRequestHeader(c,a[c])}catch(d){}},paramsObjToStr:function(a){var b,c,d,e,f=[];if("object"!=typeof a)return a;for(d in a)if(a.hasOwnProperty(d))if(e=a[d],"[object Array]"!==Object.prototype.toString.call(e)||isNaN(e.length))f=f.concat([encodeURIComponent(d),"=",encodeURIComponent(e),"&"]);else for(b=0,c=e.length;c>b;b++)f=f.concat([encodeURIComponent(d),"[]","=",encodeURIComponent(e[b]),"&"]);return f.length>0&&f.pop(),f.join("")},setParams:function(){var a=null,b=this.options.parameters;a="object"==typeof b?this.paramsObjToStr(b):""+b,a&&(this.url=this.url.indexOf("?")>-1?this.url.split("#")[0]+"&"+a:this.url.split("#")[0]+"?"+a)},getHeader:function(a){if(this.usingXDomainReq&&"Content-Type"===a)return this.transport.contentType;try{return this.transport.getResponseHeader(a)}catch(b){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(a){return null}},getResponse:function(){var a=this.transport,b={headerJSON:null,responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:a,timeTaken:new Date-this.startTime,requestedUrl:this.url};b.readyState=a.readyState;try{b.responseText=a.responseText}catch(c){}try{b.responseXML=a.responseXML}catch(c){}try{b.status=a.status}catch(c){b.status=0}try{b.statusText=a.statusText}catch(c){b.statusText=""}return b},abort:function(){if(this.transport){clearTimeout(this.delayTimeout),clearTimeout(this.stoTimeout);try{this.transport.abort()}catch(a){}this.finish()}},runStateChange:function(){var a=this.transport.readyState;if(3===a)this.isHTTP&&this.safeCall("onHeaders");else if(4===a||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())return this.delayTimeout=setTimeout(Ink.bind(this.runStateChange,this),this.options.delay+this.startTime-(new Date).getTime()),void 0;var b,c=this.transport.responseText,d=this.getResponse(),e=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"),clearTimeout(this.stoTimeout),0===e?this.isHTTP?this.safeCall("onException",this.makeError(18,"NETWORK_ERR")):e=c?200:404:304===e&&(e=200);var f=this.usingXDomainReq||e>=200&&300>e,g=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(g.indexOf("application/json")>=0||"force"===this.options.evalJS))try{b=this.evalJSON(c,this.sanitizeJSON),b&&(c=d.responseJSON=b)}catch(h){f&&this.safeCall("onException",h)}if(this.usingXDomainReq&&-1!==g.indexOf("xml")&&"DOMParser"in window){var i;switch(g){case"application/xml":case"application/xhtml+xml":case"image/svg+xml":i=g;break;default:i="text/xml"}var j=(new DOMParser).parseFromString(this.transport.responseText,i);this.transport.responseXML=j,d.responseXML=j}null!==this.transport.responseXML&&null===d.responseJSON&&""!==this.transport.responseXML.xml&&(c=this.transport.responseXML),(e||this.usingXDomainReq)&&(f?this.safeCall("onSuccess",d,c):this.safeCall("onFailure",d,c),this.safeCall("on"+e,d,c)),this.finish(d,c)}},finish:function(a,b){if(a&&this.safeCall("onComplete",a,b),clearTimeout(this.stoTimeout),this.transport){try{this.transport.onreadystatechange=null}catch(c){}"function"==typeof this.transport.destroy&&this.transport.destroy(),this.transport=null}},safeCall:function(a,b){function c(a){setTimeout(function(){throw a.message&&(a.message+="\n"+(a.stacktrace||a.stack||"")),a},1)}if("function"==typeof this.options[a])try{this.options[a].apply(this,[].slice.call(arguments,1))}catch(d){c(d)}else b&&window.Error&&b instanceof Error&&c(b)},setRequestHeader:function(a,b){this.options.requestHeaders||(this.options.requestHeaders={}),this.options.requestHeaders[a]=b},request:function(){if(this.transport){var a=null;this.requestHasBody?(null!==this.options.postBody&&""!==this.options.postBody?(a=this.options.postBody,this.setParams()):null!==this.options.parameters&&""!==this.options.parameters&&(a=this.options.parameters),"object"!=typeof a||a.nodeType?"object"!=typeof a&&null!==a&&(a=""+a):a=this.paramsObjToStr(a),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var b=this.url,c=this.options.method,d=this.isCrossDomain;d&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",b),b=this.options.xhrProxy+encodeURIComponent(b),d=!1);try{this.transport.open(c,b,this.options.asynchronous)}catch(e){return this.safeCall("onException",e),this.finish(this.getResponse(),null)}this.setHeaders(),this.safeCall("onCreate"),this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(Ink.bind(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())},this),1e3*this.options.timeout)),this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0),this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=Ink.bind(this.runStateChange,this):this.usingXDomainReq&&(this.transport.onload=Ink.bind(this.runStateChange,this));try{if(d)throw this.makeError(18,"NETWORK_ERR");this.startTime=(new Date).getTime(),this.transport.send(a)}catch(e){return this.safeCall("onException",e),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},makeError:function(a,b){if("function"!=typeof Error)return{code:a,message:b};var c=new Error(b);return c.code=a,c},isJSON:function(a){return"string"==typeof a&&a?(a=a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(a)):!1},evalJSON:function(strJSON,sanitize){if(strJSON&&(!sanitize||this.isJSON(strJSON)))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("ERROR: Bad JSON string...")}return null}},Ajax.load=function(a,b){return new Ajax(a,{method:"GET",onSuccess:function(a){b(a.responseText,a)}})},Ajax.ping=function(a,b){return new Ajax(a,{method:"HEAD",onSuccess:function(a){"function"==typeof b&&b(a)}})},Ajax}),Ink.createModule("Ink.Net.JsonP","1",[],function(){"use strict";var a=function(a,b){this.init(a,b)};return a.prototype={init:function(a,b){if(this.options=Ink.extendObj({onSuccess:void 0,onFailure:void 0,failureObj:{},timeout:10,params:{},callbackParam:"jsoncallback",internalCallback:"_cb",randVar:!1},b||{}),this.randVar=this.options.randVar!==!1?this.options.randVar:parseInt(1e5*Math.random(),10),this.options.internalCallback+=this.randVar,this.uri=a,"function"==typeof this.options.onComplete&&(this.options.onSuccess=this.options.onComplete),"string"!=typeof this.uri)throw"Please define an URI";if("function"!=typeof this.options.onSuccess)throw"please define a callback function on option onSuccess!";Ink.Net.JsonP[this.options.internalCallback]=Ink.bind(function(){window.clearTimeout(this.timeout),delete window.Ink.Net.JsonP[this.options.internalCallback],this._removeScriptTag(),this.options.onSuccess(arguments[0])},this),this._addScriptTag()},_addParamsToGet:function(a,b){var c=-1!==a.indexOf("?"),d,e,f,g=[a];for(e in b)b.hasOwnProperty(e)&&(c?d="&":(d="?",c=!0),f=b[e],"number"==typeof f||f||(f=""),g=g.concat([d,e,"=",encodeURIComponent(f)]));return g.join("")},_getScriptContainer:function(){var a=document.getElementsByTagName("head");if(0===a.length){var b=document.getElementsByTagName("script");return b[0]}return a[0]},_addScriptTag:function(){this.options.params[this.options.callbackParam]="Ink.Net.JsonP."+this.options.internalCallback,this.options.params.rnd_seed=this.randVar,this.uri=this._addParamsToGet(this.uri,this.options.params);var a=document.createElement("script");a.type="text/javascript",a.src=this.uri;var b=this._getScriptContainer();b.appendChild(a),this.timeout=setTimeout(Ink.bind(this._requestFailed,this),1e3*this.options.timeout)},_requestFailed:function(){delete Ink.Net.JsonP[this.options.internalCallback],this._removeScriptTag(),"function"==typeof this.options.onFailure&&this.options.onFailure(this.options.failureObj)},_removeScriptTag:function(){for(var a,b=document.getElementsByTagName("script"),c,d=0,e=b.length;e>d;++d)if(a=b[d],c=a.getAttribute("src")||a.src,null!==c&&c===this.uri)return a.parentNode.removeChild(a),void 0}},a}),Ink.createModule("Ink.Dom.Browser","1",[],function(){"use strict";var a={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,init:function(){this.detectBrowser(),this.setDimensions(),this.setReferrer()},setDimensions:function(){var a=0,b=0;"number"==typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(a=document.body.clientWidth,b=document.body.clientHeight),this.windowWidth=a,this.windowHeight=b},setReferrer:function(){this.referrer=void 0!==document.referrer?document.referrer.length>0?window.escape(document.referrer):!1:!1},detectBrowser:function(){var a=navigator.userAgent;if(this.userAgent=a,a=a.toLowerCase(),new RegExp("applewebkit/").test(a))new RegExp("chrome/").test(a)?(this.CHROME=!0,this.model="chrome",this.version=a.replace(new RegExp("(.*)chrome/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit"):(this.SAFARI=!0,this.model="safari",this.version=a.replace(new RegExp("(.*)applewebkit/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit");else if(new RegExp("opera").test(a))this.OPERA=!0,this.model="opera",this.version=a.replace(new RegExp("(.*)opera.([^\\s$]+)(.*)"),"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(new RegExp("konqueror").test(a))this.KONQUEROR=!0,this.model="konqueror",this.version=a.replace(new RegExp("(.*)konqueror/([^;]+);(.*)"),"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if(new RegExp("msie\\ ").test(a))this.IE=!0,this.model="ie",this.version=a.replace(new RegExp("(.*)\\smsie\\s([^;]+);(.*)"),"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(new RegExp("gecko").test(a)){this.GECKO=!0;var b=new RegExp("(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\\-meleon|seamonkey|netscape|songbird|sylera)");if(b.test(a))this.model=a.match(b)[1],this.version=a.replace(new RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2"),this.cssPrefix="-moz-",this.domPrefix="Moz";else{this.model="mozilla";var c=new RegExp("(.*)rv:([^)]+)(.*)");c.test(a)&&(this.version=a.replace(c,"$2")),this.cssPrefix="-moz-",this.domPrefix="Moz"}}},debug:function(){var a="known browsers: (ie, gecko, opera, safari, konqueror) \n";a+=[this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n",a+="model -> "+this.model+"\n",a+="version -> "+this.version+"\n",a+="\n",a+="original UA -> "+this.userAgent,alert(a)}};return a.init(),a}),Ink.createModule("Ink.Dom.Css",1,[],function(){"use strict";var a={addRemoveClassName:function(a,b,c){return c?this.addClassName(a,b):(this.removeClassName(a,b),void 0)},addClassName:function(a,b){a=Ink.i(a),a&&b&&("undefined"!=typeof a.classList?a.classList.add(b):this.hasClassName(a,b)||(a.className+=(a.className?" ":"")+b))},removeClassName:function(a,b){if(a=Ink.i(a),a&&b)if("undefined"!=typeof a.classList)a.classList.remove(b);else{if("undefined"==typeof a.className)return!1;var c=a.className,d=new RegExp("(^|\\s+)"+b+"(\\s+|$)");c=c.replace(d," "),c=c.replace(/^\s+/,"").replace(/\s+$/,""),a.className=c}},setClassName:function(a,b,c){this.addRemoveClassName(a,b,c||!1)},hasClassName:function(a,b){if(a=Ink.i(a),a&&b){if("undefined"!=typeof a.classList)return a.classList.contains(b);if("undefined"==typeof a.className)return!1;var c=a.className;if("undefined"==typeof c.length)return!1;if(c.length>0){if(c===b)return!0;var d=new RegExp("(^|\\s)"+b+"(\\s|$)");if(d.test(c))return!0}}return!1},blinkClass:function(a,b,c,d){a=Ink.i(a),this.addRemoveClassName(a,b,!d),setTimeout(Ink.bind(function(){this.addRemoveClassName(a,b,d)},this),Number(c)||100)},toggleClassName:function(a,b,c){return a&&b&&"undefined"!=typeof a.classList?(a=Ink.i(a),null!==a&&a.classList.toggle(b),!0):("undefined"!=typeof c?c===!0?this.addClassName(a,b):c===!1&&this.removeClassName(a,b):this.hasClassName(a,b)?this.removeClassName(a,b):this.addClassName(a,b),void 0)},setOpacity:function(a,b){if(a=Ink.i(a),null!==a){var c=1;isNaN(Number(b))||(c=0>=b?0:1>=b?b:100>=b?b/100:1),"undefined"!=typeof a.style.opacity?a.style.opacity=c:a.style.filter="alpha(opacity:"+(0|100*c)+")"}},_camelCase:function(a){return a?a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()}):a},getStyle:function(a,b){if(a=Ink.i(a),null!==a){b="float"===b?"cssFloat":this._camelCase(b);var c=a.style[b];if(!window.getComputedStyle||c&&"auto"!==c)!c&&a.currentStyle&&(c=a.currentStyle[b],"auto"!==c||"width"!==b&&"height"!==b||(c=a["offset"+b.charAt(0).toUpperCase()+b.slice(1)]+"px"));else{var d=window.getComputedStyle(a,null);c=d?d[b]:null}if("opacity"===b)return c?parseFloat(c,10):1;if("borderTopWidth"===b||"borderBottomWidth"===b||"borderRightWidth"===b||"borderLeftWidth"===b){if("thin"===c)return"1px";if("medium"===c)return"3px";if("thick"===c)return"5px"}return"auto"===c?null:c}},setStyle:function(a,b){if(a=Ink.i(a),null!==a)if("string"==typeof b)a.style.cssText+="; "+b,-1!==b.indexOf("opacity")&&this.setOpacity(a,b.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var c in b)b.hasOwnProperty(c)&&("opacity"===c?this.setOpacity(a,b[c]):"float"===c||"cssFloat"===c?"undefined"==typeof a.style.styleFloat?a.style.cssFloat=b[c]:a.style.styleFloat=b[c]:a.style[c]=b[c])},show:function(a,b){a=Ink.i(a),null!==a&&(a.style.display=b?b:"")},hide:function(a){a=Ink.i(a),null!==a&&(a.style.display="none")},showHide:function(a,b){a=Ink.i(a),a&&(a.style.display=b?"":"none")},toggle:function(a,b){a=Ink.i(a),null!==a&&("undefined"!=typeof b?b===!0?this.show(a):this.hide(a):"none"===a.style.display?this.show(a):this.hide(a))},_getRefTag:function(a){if(a.firstElementChild)return a.firstElementChild;for(var b=a.firstChild;b;b=b.nextSibling)if(1===b.nodeType)return b;return null},appendStyleTag:function(a,b,c){c=Ink.extendObj({type:"text/css",force:!1},c||{});var d=document.getElementsByTagName("style"),e=!1,f=!0,g,h;for(g=0,h=d.length;h>g;g++)e=d[g].innerHTML,e.indexOf(a)>=0&&(f=!1);if(f){var i=document.createElement("style"),j=document.getElementsByTagName("head")[0],k=!1,l="";i.type=c.type,l+=a+" {",l+=b,l+="} ","undefined"!=typeof i.styleSheet?i.styleSheet.cssText=l:i.appendChild(document.createTextNode(l)),c.force?j.appendChild(i):(k=this._getRefTag(j),k&&j.insertBefore(i,k))}},appendStylesheet:function(a,b){b=Ink.extendObj({media:"screen",type:"text/css",force:!1},b||{});var c,d=document.createElement("link"),e=document.getElementsByTagName("head")[0];d.media=b.media,d.type=b.type,d.href=a,d.rel="Stylesheet",b.force?e.appendChild(d):(c=this._getRefTag(e),c&&e.insertBefore(d,c))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(a,b){if(!a)return b(a);if(this._loadedCSSFiles[a])return b(a);var c=this._loadingCSSFiles[a];if(c)return c.push(b);this._loadingCSSFiles[a]=[b];var d=document.createElement("link");d.type="text/css",d.rel="stylesheet",d.href=a;var e=document.getElementsByTagName("head")[0];e.appendChild(d);var f=document.createElement("img");f.onerror=Ink.bindEvent(function(a,b){var c=b;this._loadedCSSFiles[c]=!0;for(var d=this._loadingCSSFiles[c],e=0,f=d.length;f>e;++e)d[e](c);delete this._loadingCSSFiles[c]},this,a),f.src=a},decToHex:function(a){var b=function(a){return 1===a.length&&(a="0"+a),a=a.toUpperCase()};if("object"==typeof a){var c=b(parseInt(a.r,10).toString(16)),d=b(parseInt(a.g,10).toString(16)),e=b(parseInt(a.b,10).toString(16));return c+d+e}a+="";var f=a.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==f?b(parseInt(f[1],10).toString(16))+b(parseInt(f[2],10).toString(16))+b(parseInt(f[3],10).toString(16)):b(parseInt(a,10).toString(16))},hexToDec:function(a){return 0===a.indexOf("#")&&(a=a.substr(1)),6===a.length?{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16)}:3===a.length?{r:parseInt(a.charAt(0)+a.charAt(0),16),g:parseInt(a.charAt(1)+a.charAt(1),16),b:parseInt(a.charAt(2)+a.charAt(2),16)}:a.length<=2?parseInt(a,16):void 0},getPropertyFromStylesheet:function(a,b){var c=this.getRuleFromStylesheet(a);return c?c.style[b]:null},getPropertyFromStylesheet2:function(a,b){for(var c=this.getRulesFromStylesheet(a),d,e=0,f=c.length;f>e;e++)if(d=c[e].style[b],null!==d&&void 0!==d)return d;return null},getRuleFromStylesheet:function(a){var b,c,d,e,f,g=document.styleSheets;if(!g)return null;for(var h=0,i=document.styleSheets.length;i>h;++h){if(b=document.styleSheets[h],c=b.rules?b.rules:b.cssRules,!c)return null;for(d=0,e=c.length;e>d;++d)if(f=c[d],f.selectorText&&f.selectorText===a)return f}return null},getRulesFromStylesheet:function(a){var b=[],c,d,e,f,g,h=document.styleSheets;if(!h)return b;for(var i=0,j=document.styleSheets.length;j>i;++i){if(c=document.styleSheets[i],d=c.rules?c.rules:c.cssRules,!d)return null;for(e=0,f=d.length;f>e;++e)g=d[e],g.selectorText&&g.selectorText===a&&b.push(g)}return b},getPropertiesFromRule:function(a){var b=this.getRuleFromStylesheet(a),c={},d,e,f;b=b.style.cssText;var g=b.split(";"),h,i,j,k;for(e=0,f=g.length;f>e;++e)" "===g[e].charAt(0)&&(g[e]=g[e].substring(1)),h=g[e].split(":"),d=this._camelCase(h[0].toLowerCase()),i=h[1],i&&(i=i.substring(1),"padding"===d||"margin"===d||"borderWidth"===d?("borderWidth"===d?(j="border",k="Width"):(j=d,k=""),-1!==i.indexOf(" ")?(i=i.split(" "),c[j+"Top"+k]=i[0],c[j+"Bottom"+k]=i[0],c[j+"Left"+k]=i[1],c[j+"Right"+k]=i[1]):(c[j+"Top"+k]=i,c[j+"Bottom"+k]=i,c[j+"Left"+k]=i,c[j+"Right"+k]=i)):"borderRadius"===d?-1!==i.indexOf(" ")?(i=i.split(" "),c.borderTopLeftRadius=i[0],c.borderBottomRightRadius=i[0],c.borderTopRightRadius=i[1],c.borderBottomLeftRadius=i[1]):(c.borderTopLeftRadius=i,c.borderTopRightRadius=i,c.borderBottomLeftRadius=i,c.borderBottomRightRadius=i):c[d]=i);return c},changeFontSize:function(a,b,c,d,e){var f=this;Ink.requireModules(["Ink.Dom.Selector_1"],function(g){var h;if("string"!=typeof a?h="1st argument must be a CSS selector rule.":"number"!=typeof b?h="2nd argument must be a number.":void 0!==c&&"+"!==c&&"*"!==c?h='3rd argument must be one of "+", "*".':void 0!==d&&("number"!=typeof d||0>=d)?h="4th argument must be a positive number.":void 0!==e&&("number"!=typeof e||e>e)&&(h="5th argument must be a positive number greater than minValue."),h)throw new TypeError(h);var i,j,k=g.select(a);void 0===d&&(d=1),c="*"===c?function(a,b){return a*b}:function(a,b){return a+b};for(var l=0,m=k.length;m>l;++l)j=k[l],i=parseFloat(f.getStyle(j,"fontSize")),i=c(i,b),d>i||"number"==typeof e&&i>e||(j.style.fontSize=i+"px")})}};return a}),Ink.createModule("Ink.Dom.Element",1,[],function(){"use strict";var a={get:function(a){return"undefined"!=typeof a?"string"==typeof a?document.getElementById(a):a:null},create:function(a,b){var c=document.createElement(a);for(var d in b)b.hasOwnProperty(d)&&("className"===d&&(d="class"),c.setAttribute(d,b[d]));return c},remove:function(a){var b;a&&(b=a.parentNode)&&b.removeChild(a)},scrollTo:function(a){if(a=this.get(a)){if(a.scrollIntoView)return a.scrollIntoView();var b={},c=0,d=0;do c+=a.offsetTop||0,d+=a.offsetLeft||0,a=a.offsetParent;while(a);b={x:d,y:c},window.scrollTo(b.x,b.y)}},offsetTop:function(a){return this.offset(a)[1]},offsetLeft:function(a){return this.offset(a)[0]},positionedOffset:function(a){var b=0,c=0;a=this.get(a);do if(b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent){if("body"===a.tagName.toLowerCase())break;var d=a.style.position;if(!d&&a.currentStyle&&(d=a.currentStyle.position),(!d||"auto"===d)&&"undefined"!=typeof getComputedStyle){var e=getComputedStyle(a,null);d=e?e.position:null}if("relative"===d||"absolute"===d)break}while(a);return[c,b]},offset:function(a){a=Ink.i(a);var b=["border-left-width","border-top-width"],c=[0,0],d,e,f,g,h=this._getPropPx,i=Ink.getModule("Ink.Dom.Browser",1);do g=window.getComputedStyle?window.getComputedStyle(a,null):a.currentStyle,d=[0|a.offsetLeft,0|a.offsetTop],e=[h(g,b[0]),h(g,b[1])],i.OPERA?(c[0]+=d[0],c[1]+=d[1]):(c[0]+=d[0]+e[0],c[1]+=d[1]+e[1]),f=a.offsetParent;while(a=f);return e=[h(g,b[0]),h(g,b[1])],i.GECKO?(c[0]+=e[0],c[1]+=e[1]):i.OPERA||(c[0]-=e[0],c[1]-=e[1]),c},scroll:function(a){return a=a?Ink.i(a):document.body,[window.pageXOffset?window.pageXOffset:a.scrollLeft,window.pageYOffset?window.pageYOffset:a.scrollTop]},_getPropPx:function(a,b){var c,d,e=a.getPropertyValue?a.getPropertyValue(b):a[b];return e?(d=e.indexOf("px"),c=-1===d?0:parseInt(e,10)):c=0,c},offset2:function(a){return this.offset(a)},hasAttribute:function(a,b){return a.hasAttribute?a.hasAttribute(b):!!a.getAttribute(b)},insertAfter:function(a,b){(b=this.get(b))&&b.parentNode.insertBefore(a,b.nextSibling)},insertTop:function(a,b){(b=this.get(b))&&b.insertBefore(a,b.firstChild)},textContent:function(a){a=Ink.i(a);var b,c,d,e;switch(a&&a.nodeType){case 9:return this.textContent(a.documentElement||a.body&&a.body.parentNode||a.body);case 1:if(b=a.innerText,"undefined"!=typeof b)return b;case 11:if(b=a.textContent,"undefined"!=typeof b)return b;if(a.firstChild===a.lastChild)return this.textContent(a.firstChild);for(b=[],d=a.childNodes,c=0,e=d.length;e>c;++c)b.push(this.textContent(d[c]));return b.join("");case 3:case 4:return a.nodeValue}return""},setTextContent:function(a,b){switch(a=Ink.i(a),a&&a.nodeType){case 1:if("innerText"in a){a.innerText=b;break}case 11:if("textContent"in a){a.textContent=b;break}case 9:for(;a.firstChild;)a.removeChild(a.firstChild);if(""!==b){var c=a.ownerDocument||a;a.appendChild(c.createTextNode(b))}break;case 3:case 4:a.nodeValue=b}},isLink:function(a){var b=a&&1===a.nodeType&&(/^a|area$/i.test(a.tagName)||a.hasAttributeNS&&a.hasAttributeNS("http://www.w3.org/1999/xlink","href"));return!!b},isAncestorOf:function(a,b){if(!b||!a)return!1;if(b.compareDocumentPosition)return 0!==(16&a.compareDocumentPosition(b));for(;b=b.parentNode;)if(b===a)return!0;return!1},descendantOf:function(a,b){return a!==b&&this.isAncestorOf(a,b)},firstElementChild:function(a){if(!a)return null;if("firstElementChild"in a)return a.firstElementChild;for(var b=a.firstChild;b&&1!==b.nodeType;)b=b.nextSibling;return b},lastElementChild:function(a){if(!a)return null;if("lastElementChild"in a)return a.lastElementChild;for(var b=a.lastChild;b&&1!==b.nodeType;)b=b.previousSibling;return b},nextElementSibling:function(a){var b=null;if(!a)return b;if("nextElementSibling"in a)return a.nextElementSibling;for(b=a.nextSibling;b&&1!==b.nodeType;)b=b.nextSibling;return b},previousElementSibling:function(a){var b=null;if(!a)return b;if("previousElementSibling"in a)return a.previousElementSibling;for(b=a.previousSibling;b&&1!==b.nodeType;)b=b.previousSibling;return b},elementWidth:function(a){return"string"==typeof a&&(a=document.getElementById(a)),a.offsetWidth},elementHeight:function(a){return"string"==typeof a&&(a=document.getElementById(a)),a.offsetHeight},elementLeft:function(a){return"string"==typeof a&&(a=document.getElementById(a)),a.offsetLeft},elementTop:function(a){return"string"==typeof a&&(a=document.getElementById(a)),a.offsetTop},elementDimensions:function(a){return a=Ink.i(a),[a.offsetWidth,a.offsetHeight]},outerDimensions:function(b){var c=a.elementDimensions(b),d=Ink.getModule("Ink.Dom.Css_1");return[c[0]+parseFloat(d.getStyle(b,"marginLeft")||0)+parseFloat(d.getStyle(b,"marginRight")||0),c[1]+parseFloat(d.getStyle(b,"marginTop")||0)+parseFloat(d.getStyle(b,"marginBottom")||0)]},inViewport:function(b,c){var d=Ink.i(b).getBoundingClientRect();return c?d.bottom>0&&d.left<a.viewportWidth()&&d.top<a.viewportHeight()&&d.right>0:d.top>0&&d.right<a.viewportWidth()&&d.bottom<a.viewportHeight()&&d.left>0},clonePosition:function(a,b){var c=this.offset(b);return a.style.left=c[0]+"px",a.style.top=c[1]+"px",a},ellipsizeText:function(a,b){if(a=Ink.i(a))for(;a&&a.scrollHeight>a.offsetHeight+8;)a.textContent=a.textContent.replace(/(\s+\S+)\s*$/,b||"…")},findUpwardsHaving:function(a,b){for(;a&&1===a.nodeType;){if(b(a))return a;a=a.parentNode}return!1},findUpwardsByClass:function(a,b){var c=new RegExp("(^|\\s)"+b+"(\\s|$)"),d=function(a){var b=a.className;return b&&c.test(b)};return this.findUpwardsHaving(a,d)},findUpwardsByTag:function(a,b){b=b.toUpperCase();var c=function(a){return a.nodeName&&a.nodeName.toUpperCase()===b};return this.findUpwardsHaving(a,c)},findUpwardsById:function(a,b){var c=function(a){return a.id===b};return this.findUpwardsHaving(a,c)},findUpwardsBySelector:function(a,b){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");var c=function(a){return Ink.Dom.Selector.matchesSelector(a,b)};return this.findUpwardsHaving(a,c)},getChildrenText:function(a,b){var c,d,e,f=a.childNodes,g=f.length,h="";if(!a)return h;for(d=0;g>d;++d)c=f[d],c&&3===c.nodeType&&(e=this._trimString(String(c.data)),e.length>0?(h+=e,b&&a.removeChild(c)):a.removeChild(c));return h},_trimString:function(a){return String.prototype.trim?a.trim():a.replace(/^\s*/,"").replace(/\s*$/,"")
},getSelectValues:function(a){for(var b=Ink.i(a),c=[],d=0;d<b.options.length;++d)c.push(b.options[d].value);return c},_normalizeData:function(a){for(var b,c=[],d=0,e=a.length;e>d;++d)b=a[d],b instanceof Array?1===b.length&&b.push(b[0]):b=[b,b],c.push(b);return c},fillSelect:function(a,b,c,d){var e=Ink.i(a);if(e){e.innerHTML="";var f,g;c||(g=document.createElement("option"),g.setAttribute("value",""),e.appendChild(g)),b=this._normalizeData(b);for(var h=0,i=b.length;i>h;++h)f=b[h],g=document.createElement("option"),g.setAttribute("value",f[0]),f.length>2&&g.setAttribute("extra",f[2]),g.appendChild(document.createTextNode(f[1])),f[0]===d&&g.setAttribute("selected","selected"),e.appendChild(g)}},fillSelect2:function(a,b){a=Ink.i(a),a.innerHTML="";var c={skipEmpty:!1,skipCreate:!1,emptyLabel:"none",createLabel:"create",optionsGroupLabel:"groups",emptyOptionsGroupLabel:"none exist",defaultValue:""};if(!b)throw"param opts is a requirement!";if(!b.data)throw"opts.data is a requirement!";b=Ink.extendObj(c,b);var d,e,f=document.createElement("optgroup");f.setAttribute("label",b.optionsGroupLabel),b.data=this._normalizeData(b.data),b.skipCreate||b.data.unshift(["$create$",b.createLabel]),b.skipEmpty||b.data.unshift(["",b.emptyLabel]);for(var g=0,h=b.data.length;h>g;++g)e=b.data[g],d=document.createElement("option"),d.setAttribute("value",e[0]),d.appendChild(document.createTextNode(e[1])),e[0]===b.defaultValue&&d.setAttribute("selected","selected"),""===e[0]||"$create$"===e[0]?a.appendChild(d):f.appendChild(d);var i=function(a){var b=a[a.length-1][0];return""===b||"$create$"===b};i(b.data)&&(d=document.createElement("option"),d.setAttribute("value","$dummy$"),d.setAttribute("disabled","disabled"),d.appendChild(document.createTextNode(b.emptyOptionsGroupLabel)),f.appendChild(d)),a.appendChild(f);var j=function(b,c){var d=a.options[a.options.length-1];d.getAttribute("disabled")&&d.parentNode.removeChild(d),d=document.createElement("option"),d.setAttribute("value",b),d.appendChild(document.createTextNode(c)),f.appendChild(d),a.options[a.options.length-1].setAttribute("selected",!0)};b.skipCreate||(a.onchange=function(){"$create$"===a.value&&"function"==typeof b.onCreate&&b.onCreate(a,j)})},fillRadios:function(a,b,c,d,e,f){var g=Ink.i(a);for(g=g.nextSibling;g&&1!==g.nodeType;)g=g.nextSibling;var h=document.createElement("span");g?g.parentNode.insertBefore(h,g):Ink.i(a).appendChild(h),c=this._normalizeData(c),"]"!==b.substring(b.length-1)&&(b+="[]");var i,j;d||(j=document.createElement("input"),j.setAttribute("type","radio"),j.setAttribute("name",b),j.setAttribute("value",""),h.appendChild(j),f&&h.appendChild(document.createElement(f)));for(var k=0;k<c.length;++k)i=c[k],j=document.createElement("input"),j.setAttribute("type","radio"),j.setAttribute("name",b),j.setAttribute("value",i[0]),h.appendChild(j),h.appendChild(document.createTextNode(i[1])),f&&h.appendChild(document.createElement(f)),i[0]===e&&(j.checked=!0);return h},fillChecks:function(a,b,c,d,e){var f=Ink.i(a);for(f=f.nextSibling;f&&1!==f.nodeType;)f=f.nextSibling;var g=document.createElement("span");f?f.parentNode.insertBefore(g,f):Ink.i(a).appendChild(g),c=this._normalizeData(c),"]"!==b.substring(b.length-1)&&(b+="[]");for(var h,i,j=0;j<c.length;++j)h=c[j],i=document.createElement("input"),i.setAttribute("type","checkbox"),i.setAttribute("name",b),i.setAttribute("value",h[0]),g.appendChild(i),g.appendChild(document.createTextNode(h[1])),e&&g.appendChild(document.createElement(e)),h[0]===d&&(i.checked=!0);return g},parentIndexOf:function(a,b){for(var c,d=0,e=0,f=a.childNodes.length;f>e;++e)if(c=a.childNodes[e],1===c.nodeType){if(c===b)return d;++d}return-1},nextSiblings:function(a){if("string"==typeof a&&(a=document.getElementById(a)),"object"==typeof a&&null!==a&&a.nodeType&&1===a.nodeType){for(var b=[],c=a.parentNode.children,d=this.parentIndexOf(a.parentNode,a),e=++d,f=c.length;f>e;e++)b.push(c[e]);return b}return[]},previousSiblings:function(a){if("string"==typeof a&&(a=document.getElementById(a)),"object"==typeof a&&null!==a&&a.nodeType&&1===a.nodeType){for(var b=[],c=a.parentNode.children,d=this.parentIndexOf(a.parentNode,a),e=0,f=d;f>e;e++)b.push(c[e]);return b}return[]},siblings:function(a){if("string"==typeof a&&(a=document.getElementById(a)),"object"==typeof a&&null!==a&&a.nodeType&&1===a.nodeType){for(var b=[],c=a.parentNode.children,d=0,e=c.length;e>d;d++)a!==c[d]&&b.push(c[d]);return b}return[]},childElementCount:function(a){return a=Ink.i(a),"childElementCount"in a?a.childElementCount:a?this.siblings(a).length+1:0},appendHTML:function(a,b){var c=document.createElement("div");c.innerHTML=b;for(var d=c.children,e=0;e<d.length;e++)a.appendChild(d[e])},prependHTML:function(a,b){var c=document.createElement("div");c.innerHTML=b;for(var d=a.firstChild,e=c.children,f=e.length-1;f>=0;f--)a.insertBefore(e[f],d),d=a.firstChild},removeTextNodeChildren:function(a){var b,c,d=a;for(a=a.firstChild;a;)c=3===a.nodeType,b=a,a=a.nextSibling,c&&d.removeChild(b)},htmlToFragment:function(a){return this.htmlToFragment="function"==typeof document.createRange&&"function"==typeof Range.prototype.createContextualFragment?function(a){var b;return"string"!=typeof a?document.createDocumentFragment():(b=document.createRange(),b.selectNode(document.body),b.createContextualFragment(a))}:function(a){var b=document.createDocumentFragment(),c,d;if("string"!=typeof a)return b;for(c=document.createElement("div"),c.innerHTML=a;d=c.firstChild;)b.appendChild(d);return b},this.htmlToFragment.call(this,a)},_camelCase:function(a){return a?a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()}):a},data:function(a){var b;if("object"!=typeof a&&"string"!=typeof a)throw"[Ink.Dom.Element.data] :: Invalid selector defined";if("object"==typeof a)b=a;else{var c=Ink.getModule("Ink.Dom.Selector",1);if(!c)throw"[Ink.Dom.Element.data] :: This method requires Ink.Dom.Selector - v1";if(b=c.select(a),b.length<=0)throw"[Ink.Dom.Element.data] :: Can't find any element with the specified selector";b=b[0]}var d={},e=b.attributes||[],f,g,h;if(e)for(var i=0,j=e.length;j>i;++i)f=e[i],g=f.name,h=f.value,g&&0===g.indexOf("data-")&&(d[this._camelCase(g.replace("data-",""))]=h);return d},moveCursorTo:function(a,b){if(a.setSelectionRange)a.setSelectionRange(b,b);else{var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}},pageWidth:function(){var a;a=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth;var b;return window.self.innerWidth?b=document.documentElement.clientWidth?document.documentElement.clientWidth:window.self.innerWidth:document.documentElement&&document.documentElement.clientWidth?b=document.documentElement.clientWidth:document.body&&(b=document.body.clientWidth),b>a?a:b},pageHeight:function(){var a;a=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollHeight:document.body.offsetHeight;var b;return window.self.innerHeight?b=window.self.innerHeight:document.documentElement&&document.documentElement.clientHeight?b=document.documentElement.clientHeight:document.body&&(b=document.body.clientHeight),b>a?b:a},viewportWidth:function(){return"undefined"!=typeof window.innerWidth?window.innerWidth:document.documentElement&&"undefined"!=typeof document.documentElement.offsetWidth?document.documentElement.offsetWidth:void 0},viewportHeight:function(){return"undefined"!=typeof window.innerHeight?window.innerHeight:document.documentElement&&"undefined"!=typeof document.documentElement.offsetHeight?document.documentElement.offsetHeight:void 0},scrollWidth:function(){return"undefined"!=typeof window.self.pageXOffset?window.self.pageXOffset:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft},scrollHeight:function(){return"undefined"!=typeof window.self.pageYOffset?window.self.pageYOffset:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}};return a}),Ink.createModule("Ink.Dom.Event",1,[],function(){"use strict";var a={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,throttle:function(a,b){b=b||0;var c=0,d,e=function(){var f=+new Date,g=f-c;if(g>=b)return c=f,a.apply(this,[].slice.call(arguments));var h=this,i=[].slice.call(arguments);clearTimeout(d),d=setTimeout(function(){return e.apply(h,i)})};return e},element:function(a){var b=a.target||"mouseout"===a.type&&a.fromElement||"mouseleave"===a.type&&a.fromElement||"mouseover"===a.type&&a.toElement||"mouseenter"===a.type&&a.toElement||a.srcElement||null;return!b||3!==b.nodeType&&4!==b.nodeType?b:b.parentNode},relatedTarget:function(a){var b=a.relatedTarget||"mouseout"===a.type&&a.toElement||"mouseleave"===a.type&&a.toElement||"mouseover"===a.type&&a.fromElement||"mouseenter"===a.type&&a.fromElement||null;return!b||3!==b.nodeType&&4!==b.nodeType?b:b.parentNode},findElement:function(a,b,c){for(var d=this.element(a);;){if(d.nodeName.toLowerCase()===b.toLowerCase())return d;if(d=d.parentNode,!d)return c?!1:document;if(!d.parentNode)return c?!1:document}},fire:function(a,b,c){a=Ink.i(a);var d,e;if(e=document.createEvent?{DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,focus:!0,focusin:!0,focusout:!0,blur:!0,load:!0,unload:!0,abort:!0,error:!0,select:!0,change:!0,submit:!0,reset:!0,resize:!0,scroll:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseover:!0,mouseout:!0,mouseup:!0,mousewheel:!0,wheel:!0,textInput:!0,keydown:!0,keypress:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,DOMSubtreeModified:!0,DOMNodeInserted:!0,DOMNodeRemoved:!0,DOMNodeInsertedIntoDocument:!0,DOMNodeRemovedFromDocument:!0,DOMAttrModified:!0,DOMCharacterDataModified:!0,DOMAttributeNameChanged:!0,DOMElementNameChanged:!0,hashchange:!0}:{onabort:!0,onactivate:!0,onafterprint:!0,onafterupdate:!0,onbeforeactivate:!0,onbeforecopy:!0,onbeforecut:!0,onbeforedeactivate:!0,onbeforeeditfocus:!0,onbeforepaste:!0,onbeforeprint:!0,onbeforeunload:!0,onbeforeupdate:!0,onblur:!0,onbounce:!0,oncellchange:!0,onchange:!0,onclick:!0,oncontextmenu:!0,oncontrolselect:!0,oncopy:!0,oncut:!0,ondataavailable:!0,ondatasetchanged:!0,ondatasetcomplete:!0,ondblclick:!0,ondeactivate:!0,ondrag:!0,ondragend:!0,ondragenter:!0,ondragleave:!0,ondragover:!0,ondragstart:!0,ondrop:!0,onerror:!0,onerrorupdate:!0,onfilterchange:!0,onfinish:!0,onfocus:!0,onfocusin:!0,onfocusout:!0,onhashchange:!0,onhelp:!0,onkeydown:!0,onkeypress:!0,onkeyup:!0,onlayoutcomplete:!0,onload:!0,onlosecapture:!0,onmessage:!0,onmousedown:!0,onmouseenter:!0,onmouseleave:!0,onmousemove:!0,onmouseout:!0,onmouseover:!0,onmouseup:!0,onmousewheel:!0,onmove:!0,onmoveend:!0,onmovestart:!0,onoffline:!0,ononline:!0,onpage:!0,onpaste:!0,onprogress:!0,onpropertychange:!0,onreadystatechange:!0,onreset:!0,onresize:!0,onresizeend:!0,onresizestart:!0,onrowenter:!0,onrowexit:!0,onrowsdelete:!0,onrowsinserted:!0,onscroll:!0,onselect:!0,onselectionchange:!0,onselectstart:!0,onstart:!0,onstop:!0,onstorage:!0,onstoragecommit:!0,onsubmit:!0,ontimeout:!0,onunload:!0},null!==a&&void 0!==a){a===document&&document.createEvent&&!a.dispatchEvent&&(a=document.documentElement),document.createEvent?(d=document.createEvent("HTMLEvents"),"undefined"==typeof e[b]?d.initEvent("dataavailable",!0,!0):d.initEvent(b,!0,!0)):(d=document.createEventObject(),d.eventType="undefined"==typeof e["on"+b]?"ondataavailable":"on"+b),d.eventName=b,d.memo=c||{};try{if(document.createEvent)a.dispatchEvent(d);else{if(!a.fireEvent)return;a.fireEvent(d.eventType,d)}}catch(f){}return d}},_callbackForCustomEvents:function(a,b,c){var d="hashchange"===b&&a.attachEvent&&!window.onhashchange,e=-1!==b.indexOf(":");if(d||e){var f=c;return Ink.bindEvent(function(a,b,c){a.eventName===b&&(window.addEventListener&&(window.event=a),c())},this,b,f)}return null},observe:function(a,b,c,d){if(a=Ink.i(a),null!==a&&void 0!==a){var e=this._callbackForCustomEvents(a,b,c);return e&&(c=e,b="dataavailable"),a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent("on"+b,c),c}},observeMulti:function(a,b,c,d){if("string"==typeof a?a=Ink.ss(a):a instanceof Element&&(a=[a]),!a[0])return!1;var e=this._callbackForCustomEvents(a[0],b,c);e&&(c=e,b="dataavailable");for(var f=0,g=a.length;g>f;f++)this.observe(a[f],b,c,d);return c},stopObserving:function(a,b,c,d){a=Ink.i(a),null!==a&&void 0!==a&&(a.removeEventListener?a.removeEventListener(b,c,!!d):a.detachEvent("on"+b,c))},stop:function(a){null!==a.cancelBubble&&(a.cancelBubble=!0),a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),window.attachEvent&&(a.returnValue=!1),null!==a.cancel&&(a.cancel=!0)},stopPropagation:function(a){null!==a.cancelBubble&&(a.cancelBubble=!0),a.stopPropagation&&a.stopPropagation()},stopDefault:function(a){a.preventDefault&&a.preventDefault(),window.attachEvent&&(a.returnValue=!1),null!==a.cancel&&(a.cancel=!0)},pointer:function(a){return{x:a.pageX||a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),y:a.pageY||a.clientY+(document.documentElement.scrollTop||document.body.scrollTop)}},pointerX:function(a){return a.pageX||a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)},pointerY:function(a){return a.pageY||a.clientY+(document.documentElement.scrollTop||document.body.scrollTop)},isLeftClick:function(a){if(window.addEventListener){if(0===a.button)return!0;if("touch"===a.type.substring(0,5)&&null===a.button)return!0}else if(1===a.button)return!0;return!1},isRightClick:function(a){return 2===a.button},isMiddleClick:function(a){return window.addEventListener?1===a.button:4===a.button;return!1},getCharFromKeyboardEvent:function(a,b){var c=a.keyCode,d=String.fromCharCode(c),e=a.shiftKey;if(c>=65&&90>=c)return"boolean"==typeof b&&(e=b),e?d:d.toLowerCase();if(c>=96&&105>=c)return String.fromCharCode(48+(c-96));switch(c){case 109:case 189:return"-";case 107:case 187:return"+"}return d},debug:function(){}};return a}),Ink.createModule("Ink.Dom.FormSerialize",1,[],function(){"use strict";var a={serialize:function(a){a=Ink.i(a);var b=this._getFieldNameInputsMap(a),c={};for(var d in b)if(b.hasOwnProperty(d))if(null!==d){var e=d.replace(/\[\]$/,"");c[e]=this._getValuesOfField(b[d])}else c[d]=this._getValuesOfField(b[d]);return delete c["null"],c},fillIn:function(a,b){a=Ink.i(a);var c=this._getFieldNameInputsMap(a);delete c["null"];for(var d in b)b.hasOwnProperty(d)&&this._setValuesOfField(c[d],b[d])},_getFieldNameInputsMap:function(a){for(var b,c,d,e={},f=0,g=a.elements.length;g>f;++f)d=a.elements[f],b=d.getAttribute("name"),c=d.nodeName.toLowerCase(),"fieldset"!==c&&(void 0===e[b]?e[b]=[d]:e[b].push(d));return e},_getValuesOfField:function(a){var b=a[0].nodeName.toLowerCase(),c=a[0].getAttribute("type"),d=a[0].value,e,f,g,h,i,j,k=[];switch(b){case"select":for(e=0,f=a.length;f>e;++e)for(k[e]=[],j=a[e].getAttribute("multiple"),g=0,h=a[e].options.length;h>g;++g)if(i=a[e].options[g],i.selected){if(!j){k[e]=i.value;break}k[e].push(i.value)}return a.length>0&&/\[[^\]]*\]$/.test(a[0].getAttribute("name"))?k:k[0];case"textarea":case"input":if("checkbox"===c||"radio"===c){for(e=0,f=a.length;f>e;++e)i=a[e],i.checked&&k.push(i.value);return"checkbox"===c?a.length>1?k:!!k.length:a.length>1?k[0]:!!k.length}if(a.length>0&&/\[[^\]]*\]$/.test(a[0].getAttribute("name"))){var l=[];for(e=0,f=a.length;f>e;++e)l.push(a[e].value);return l}return d;break;default:return void 0}},_valInArray:function(a,b){for(var c=0,d=b.length;d>c;++c)if(b[c]===a)return!0;return!1},_setValuesOfField:function(a,b){if(a){var c=a[0].nodeName.toLowerCase(),d=a[0].getAttribute("type"),e,f,g;switch(c){case"select":if(a.length>1)throw"Got multiple select elements with same name!";for(e=0,f=a[0].options.length;f>e;++e)g=a[0].options[e],g.selected=b instanceof Array?this._valInArray(g.value,b):g.value===b;break;case"textarea":case"input":if("checkbox"===d||"radio"===d)for(e=0,f=a.length;f>e;++e)g=a[e],g.checked=b instanceof Array?this._valInArray(g.value,b):a.length>1?g.value===b:!!b;else{if(a.length>1)throw"Got multiple input elements with same name!";"file"!==d&&(a[0].value=b)}break;default:throw'Unsupported element: "'+c+'"!'}}}};return a}),Ink.createModule("Ink.Dom.Loaded",1,[],function(){"use strict";var a={_contexts:[],run:function(a,b){b||(b=a,a=window);for(var c,d=0,e=this._contexts.length;e>d;d++)if(this._contexts[d][0]===a){c=this._contexts[d][1];break}c||(c={cbQueue:[],win:a,doc:a.document,root:a.document.documentElement,done:!1,top:!0},c.handlers={checkState:Ink.bindEvent(this._checkState,this,c),poll:Ink.bind(this._poll,this,c)},this._contexts.push([a,c]));var f=c.doc.addEventListener;c.add=f?"addEventListener":"attachEvent",c.rem=f?"removeEventListener":"detachEvent",c.pre=f?"":"on",c.det=f?"DOMContentLoaded":"onreadystatechange",c.wet=c.pre+"load";var g=c.handlers.checkState,h="complete"===c.doc.readyState&&"about:blank"!==c.win.location.toString();if(h)setTimeout(Ink.bind(function(){b.call(c.win,"lazy")},this),0);else{c.cbQueue.push(b),c.doc[c.add](c.det,g),c.win[c.add](c.wet,g);var i=1;try{i=c.win.frameElement}catch(j){}if(!f&&c.root&&c.root.doScroll){try{c.top=!i}catch(j){}c.top&&this._poll(c)}}},_checkState:function(a,b){if(a&&("readystatechange"!==a.type||"complete"===b.doc.readyState)){var c="load"===a.type?b.win:b.doc;c[b.rem](b.pre+a.type,b.handlers.checkState,!1),this._ready(b)}},_poll:function(a){try{a.root.doScroll("left")}catch(b){return setTimeout(a.handlers.poll,50)}this._ready(a)},_ready:function(a){if(!a.done){a.done=!0;for(var b=0;b<a.cbQueue.length;++b)a.cbQueue[b].call(a.win);a.cbQueue=[]}}};return a}),Ink.createModule("Ink.Dom.Selector",1,[],function(){"use strict";function a(a){return ob.test(a+"")}function b(){var a,b=[];return a=function(c,d){return b.push(c+=" ")>w.cacheLength&&delete a[b.shift()],a[c]=d}}function c(a){return a[L]=!0,a}function d(a){var b=E.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b=null}}function e(a,b,c,d){var e,f,g,h,i,l,m,n,o,p;if((b?b.ownerDocument||b:M)!==E&&D(b),b=b||E,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(G&&!d){if(e=pb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&K(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&N.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(N.qsa&&!H.test(a)){if(m=!0,n=L,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(l=j(a),(m=b.getAttribute("id"))?n=m.replace(sb,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=l.length;i--;)l[i]=n+k(l[i]);o=nb.test(a)&&b.parentNode||b,p=l.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{m||b.removeAttribute("id")}}}return s(a.replace(hb,"$1"),b,c,d)}function f(a,b){var c=b&&a,d=c&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function g(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function h(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function i(a){return c(function(b){return b=+b,c(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function j(a,b){var c,d,f,g,h,i,j,k=R[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!c||(d=ib.exec(h)))&&(d&&(h=h.slice(d[0].length)||h),i.push(f=[])),c=!1,(d=jb.exec(h))&&(c=d.shift(),f.push({value:c,type:d[0].replace(hb," ")}),h=h.slice(c.length));for(g in w.filter)!(d=mb[g].exec(h))||j[g]&&!(d=j[g](d))||(c=d.shift(),f.push({value:c,type:g,matches:d}),h=h.slice(c.length));if(!c)break}return b?h.length:h?e.error(a):R(a,i).slice(0)}function k(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function l(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=P++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=O+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[L]||(b[L]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===v)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||v,i[1]===!0)return!0}}function m(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function n(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function o(a,b,d,e,f,g){return e&&!e[L]&&(e=o(e)),f&&!f[L]&&(f=o(f,g)),c(function(c,g,h,i){var j,k,l,m=[],o=[],p=g.length,q=c||r(b||"*",h.nodeType?[h]:h,[]),s=!a||!c&&b?q:n(q,m,a,h,i),t=d?f||(c?a:p||e)?[]:g:s;if(d&&d(s,t,h,i),e)for(j=n(t,o),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[o[k]]=!(s[o[k]]=l));if(c){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?ab.call(c,l):m[k])>-1&&(c[j]=!(g[j]=l))}}else t=n(t===g?t.splice(p,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function p(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=l(function(a){return a===b},g,!0),j=l(function(a){return ab.call(b,a)>-1},g,!0),n=[function(a,c,d){return!f&&(d||c!==A)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=w.relative[a[h].type])n=[l(m(n),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[L]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return o(h>1&&m(n),h>1&&k(a.slice(0,h-1)).replace(hb,"$1"),c,d>h&&p(a.slice(h,d)),e>d&&p(a=a.slice(d)),e>d&&k(a))}n.push(c)}return m(n)}function q(a,b){var d=0,f=b.length>0,g=a.length>0,h=function(c,h,i,j,k){var l,m,o,p=[],q=0,r="0",s=c&&[],t=null!=k,u=A,x=c||g&&w.find.TAG("*",k&&h.parentNode||h),y=O+=null==u?1:Math.random()||.1;for(t&&(A=h!==E&&h,v=d);null!=(l=x[r]);r++){if(g&&l){for(m=0;o=a[m++];)if(o(l,h,i)){j.push(l);break}t&&(O=y,v=++d)}f&&((l=!o&&l)&&q--,c&&s.push(l))}if(q+=r,f&&r!==q){for(m=0;o=b[m++];)o(s,p,h,i);if(c){if(q>0)for(;r--;)s[r]||p[r]||(p[r]=Y.call(j));p=n(p)}$.apply(j,p),t&&!c&&p.length>0&&q+b.length>1&&e.uniqueSort(j)}return t&&(O=y,A=u),s};return f?c(h):h}function r(a,b,c){for(var d=0,f=b.length;f>d;d++)e(a,b[d],c);return c}function s(a,b,c,d){var e,f,g,h,i,l=j(a);if(!d&&1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&G&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(ub,vb),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=mb.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(ub,vb),nb.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&k(f),!a)return $.apply(c,d),c;break}}return z(a,l)(d,b,!G,c,nb.test(a)),c}function t(){}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L="sizzle"+-new Date,M=window.document,N={},O=0,P=0,Q=b(),R=b(),S=b(),T=!1,U=function(){return 0},V="undefined",W=1<<31,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,ab=X.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},bb="[\\x20\\t\\r\\n\\f]",cb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",db=cb.replace("w","w#"),eb="([*^$|!~]?=)",fb="\\["+bb+"*("+cb+")"+bb+"*(?:"+eb+bb+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+db+")|)|)"+bb+"*\\]",gb=":("+cb+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+fb.replace(3,8)+")*)|.*)\\)|)",hb=new RegExp("^"+bb+"+|((?:^|[^\\\\])(?:\\\\.)*)"+bb+"+$","g"),ib=new RegExp("^"+bb+"*,"+bb+"*"),jb=new RegExp("^"+bb+"*([\\x20\\t\\r\\n\\f>+~])"+bb+"*"),kb=new RegExp(gb),lb=new RegExp("^"+db+"$"),mb={ID:new RegExp("^#("+cb+")"),CLASS:new RegExp("^\\.("+cb+")"),NAME:new RegExp("^\\[name=['\"]?("+cb+")['\"]?\\]"),TAG:new RegExp("^("+cb.replace("w","w*")+")"),ATTR:new RegExp("^"+fb),PSEUDO:new RegExp("^"+gb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+bb+"*(even|odd|(([+-]|)(\\d*)n|)"+bb+"*(?:([+-]|)"+bb+"*(\\d+)|))"+bb+"*\\)|)","i"),needsContext:new RegExp("^"+bb+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+bb+"*((?:-\\d)?\\d*)"+bb+"*\\)|)(?=[^-]|$)","i")},nb=/[\x20\t\r\n\f]*[+~]/,ob=/^[^{]+\{\s*\[native code/,pb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qb=/^(?:input|select|textarea|button)$/i,rb=/^h\d$/i,sb=/'|\\/g,tb=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,ub=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,vb=function(a,b){var c="0x"+b-65536;return c!==c?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(55296|c>>10,56320|1023&c)};try{$.apply(X=_.call(M.childNodes),M.childNodes),X[M.childNodes.length].nodeType}catch(wb){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}y=e.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},D=e.setDocument=function(b){var c=b?b.ownerDocument||b:M;return c!==E&&9===c.nodeType&&c.documentElement?(E=c,F=c.documentElement,G=!y(c),N.getElementsByTagName=d(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),N.attributes=d(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),N.getElementsByClassName=d(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),N.getByName=d(function(a){a.id=L+0,a.appendChild(E.createElement("a")).setAttribute("name",L),a.appendChild(E.createElement("i")).setAttribute("name",L),F.appendChild(a);var b=c.getElementsByName&&c.getElementsByName(L).length===2+c.getElementsByName(L+0).length;return F.removeChild(a),b}),N.sortDetached=d(function(a){return a.compareDocumentPosition&&1&a.compareDocumentPosition(E.createElement("div"))}),w.attrHandle=d(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==V&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},N.getByName?(w.find.ID=function(a,b){if(typeof b.getElementById!==V&&G){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(ub,vb);return function(a){return a.getAttribute("id")===b}}):(w.find.ID=function(a,b){if(typeof b.getElementById!==V&&G){var c=b.getElementById(a);return c?c.id===a||typeof c.getAttributeNode!==V&&c.getAttributeNode("id").value===a?[c]:void 0:[]}},w.filter.ID=function(a){var b=a.replace(ub,vb);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=N.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==V?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.NAME=N.getByName&&function(a,b){return typeof b.getElementsByName!==V?b.getElementsByName(name):void 0},w.find.CLASS=N.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==V&&G?b.getElementsByClassName(a):void 0},I=[],H=[":focus"],(N.qsa=a(c.querySelectorAll))&&(d(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||H.push("\\["+bb+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||H.push(":checked")}),d(function(a){a.innerHTML="<input type='hidden' i=''/>",a.querySelectorAll("[i^='']").length&&H.push("[*^$]="+bb+"*(?:\"\"|'')"),a.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),H.push(",.*:")})),(N.matchesSelector=a(J=F.matchesSelector||F.mozMatchesSelector||F.webkitMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&d(function(a){N.disconnectedMatch=J.call(a,"div"),J.call(a,"[s!='']:x"),I.push("!=",gb)}),H=new RegExp(H.join("|")),I=I.length&&new RegExp(I.join("|")),K=a(F.contains)||F.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=F.compareDocumentPosition?function(a,b){if(a===b)return T=!0,0;var d=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);return d?1&d||B&&b.compareDocumentPosition(a)===d?a===c||K(M,a)?-1:b===c||K(M,b)?1:C?ab.call(C,a)-ab.call(C,b):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var d,e=0,g=a.parentNode,h=b.parentNode,i=[a],j=[b];if(a===b)return T=!0,0;if(!g||!h)return a===c?-1:b===c?1:g?-1:h?1:0;if(g===h)return f(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?f(i[e],j[e]):i[e]===M?-1:j[e]===M?1:0},E):E},e.matches=function(a,b){return e(a,null,null,b)},e.matchesSelector=function(a,b){if((a.ownerDocument||a)!==E&&D(a),b=b.replace(tb,"='$1']"),N.matchesSelector&&G&&(!I||!I.test(b))&&!H.test(b))try{var c=J.call(a,b);if(c||N.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return e(b,E,null,[a]).length>0},e.contains=function(a,b){return(a.ownerDocument||a)!==E&&D(a),K(a,b)},e.attr=function(a,b){var c;return(a.ownerDocument||a)!==E&&D(a),G&&(b=b.toLowerCase()),(c=w.attrHandle[b])?c(a):!G||N.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&a[b]===!0?b:c&&c.specified?c.value:null},e.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},e.uniqueSort=function(a){var b,c=[],d=0,e=0;if(T=!N.detectDuplicates,B=!N.sortDetached,C=!N.sortStable&&a.slice(0),a.sort(U),T){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},x=e.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=x(b);return c},w=e.selectors={cacheLength:50,createPseudo:c,match:mb,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ub,vb),a[3]=(a[4]||a[5]||"").replace(ub,vb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||e.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&e.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return mb.CHILD.test(a[0])?null:(a[4]?a[2]=a[4]:c&&kb.test(c)&&(b=j(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ub,vb).toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=Q[a+" "];return b||(b=new RegExp("(^|"+bb+")"+a+"("+bb+"|$)"))&&Q(a,function(a){return b.test(a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var f=e.attr(d,a);return null==f?"!="===b:b?(f+="","="===b?f===c:"!="===b?f!==c:"^="===b?c&&0===f.indexOf(c):"*="===b?c&&f.indexOf(c)>-1:"$="===b?c&&f.slice(-c.length)===c:"~="===b?(" "+f+" ").indexOf(c)>-1:"|="===b?f===c||f.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;
return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[L]||(q[L]={}),j=k[a]||[],n=j[0]===O&&j[1],m=j[0]===O&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[O,n,m];break}}else if(s&&(j=(b[L]||(b[L]={}))[a])&&j[0]===O)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[L]||(l[L]={}))[a]=[O,m]),l!==b)););return m-=e,m===d||0===m%d&&m/d>=0}}},PSEUDO:function(a,b){var d,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||e.error("unsupported pseudo: "+a);return f[L]?f(b):f.length>1?(d=[a,a,"",b],w.setFilters.hasOwnProperty(a.toLowerCase())?c(function(a,c){for(var d,e=f(a,b),g=e.length;g--;)d=ab.call(a,e[g]),a[d]=!(c[d]=e[g])}):function(a){return f(a,0,d)}):f}},pseudos:{not:c(function(a){var b=[],d=[],e=z(a.replace(hb,"$1"));return e[L]?c(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,c,f){return b[0]=a,e(b,null,f,d),!d.pop()}}),has:c(function(a){return function(b){return e(a,b).length>0}}),contains:c(function(a){return function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:c(function(a){return lb.test(a||"")||e.error("unsupported lang: "+a),a=a.replace(ub,vb).toLowerCase(),function(b){var c;do if(c=G?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(a){var b=window.location&&window.location.hash;return b&&b.slice(1)===a.id},root:function(a){return a===F},focus:function(a){return a===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return rb.test(a.nodeName)},input:function(a){return qb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:i(function(){return[0]}),last:i(function(a,b){return[b-1]}),eq:i(function(a,b,c){return[0>c?c+b:c]}),even:i(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:i(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:i(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:i(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}};for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=g(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=h(u);return z=e.compile=function(a,b){var c,d=[],e=[],f=S[a+" "];if(!f){for(b||(b=j(a)),c=b.length;c--;)f=p(b[c]),f[L]?d.push(f):e.push(f);f=S(a,q(e,d))}return f},w.pseudos.nth=w.pseudos.eq,t.prototype=w.filters=w.pseudos,w.setFilters=new t,N.sortStable=L.split("").sort(U).join("")===L,D(),[0,0].sort(U),N.detectDuplicates=T,{select:e,matches:e.matches,matchesSelector:e.matchesSelector}}),Ink.createModule("Ink.Util.Array","1",[],function(){"use strict";var a=Array.prototype,b={inArray:function(a,b){if("object"==typeof b)for(var c=0,d=b.length;d>c;++c)if(b[c]===a)return!0;return!1},sortMulti:function(a,b){if("undefined"==typeof a||a.constructor!==Array)return!1;if("string"!=typeof b)return a.sort();if(a.length>0){if("undefined"==typeof a[0][b])return!1;a.sort(function(a,c){var d=a[b],e=c[b];return e>d?-1:d>e?1:0})}return a},keyValue:function(a,b,c){if("undefined"!=typeof a&&"object"==typeof b&&this.inArray(a,b)){for(var d=[],e=0,f=b.length;f>e;++e)if(b[e]===a){if("undefined"!=typeof c&&c===!0)return e;d.push(e)}return d}return!1},shuffle:function(a){if("undefined"!=typeof a&&a.constructor!==Array)return!1;for(var b=a.length,c=!1,d=!1;b--;)d=Math.floor(Math.random()*(b+1)),c=a[b],a[b]=a[d],a[d]=c;return a},forEach:function(b,c,d){if(a.forEach)return a.forEach.call(b,c,d);for(var e=0,f=b.length>>>0;f>e;e++)c.call(d,b[e],e,b)},each:function(){b.forEach.apply(b,[].slice.call(arguments))},map:function(b,c,d){if(a.map)return a.map.call(b,c,d);for(var e=new Array(g),f=0,g=b.length>>>0;g>f;f++)e[f]=c.call(d,b[f],f,b);return e},filter:function(b,c,d){if(a.filter)return a.filter.call(b,c,d);for(var e=[],f=null,g=0,h=b.length;h>g;g++)f=b[g],c.call(d,f,g,b)&&e.push(f);return e},some:function(a,b,c){if(null===a)throw new TypeError("First argument is invalid.");var d=Object(a),e=d.length>>>0;if("function"!=typeof b)throw new TypeError("Second argument must be a function.");for(var f=0;e>f;f++)if(f in d&&b.call(c,d[f],f,d))return!0;return!1},intersect:function(a,b){if(!a||!b||a instanceof Array==!1||b instanceof Array==!1)return[];for(var c=[],d=0,e=a.length;e>d;++d)for(var f=0,g=b.length;g>f;++f)a[d]===b[f]&&c.push(a[d]);return c},convert:function(b){return a.slice.call(b||[],0)},insert:function(a,b,c){a.splice(b,0,c)},remove:function(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++)e>=b&&b+c>e||d.push(a[e]);return d}};return b}),Ink.createModule("Ink.Util.BinPack","1",[],function(){"use strict";var a=function(a,b){this.init(a,b)};a.prototype={init:function(a,b){this.root={x:0,y:0,w:a,h:b}},fit:function(a){var b,c,d;for(b=0;b<a.length;++b)d=a[b],(c=this.findNode(this.root,d.w,d.h))&&(d.fit=this.splitNode(c,d.w,d.h))},findNode:function(a,b,c){return a.used?this.findNode(a.right,b,c)||this.findNode(a.down,b,c):b<=a.w&&c<=a.h?a:null},splitNode:function(a,b,c){return a.used=!0,a.down={x:a.x,y:a.y+c,w:a.w,h:a.h-c},a.right={x:a.x+b,y:a.y,w:a.w-b,h:c},a}};var b=function(){};b.prototype={fit:function(a){var b,c,d,e=a.length,f=e>0?a[0].w:0,g=e>0?a[0].h:0;for(this.root={x:0,y:0,w:f,h:g},b=0;e>b;b++)d=a[b],d.fit=(c=this.findNode(this.root,d.w,d.h))?this.splitNode(c,d.w,d.h):this.growNode(d.w,d.h)},findNode:function(a,b,c){return a.used?this.findNode(a.right,b,c)||this.findNode(a.down,b,c):b<=a.w&&c<=a.h?a:null},splitNode:function(a,b,c){return a.used=!0,a.down={x:a.x,y:a.y+c,w:a.w,h:a.h-c},a.right={x:a.x+b,y:a.y,w:a.w-b,h:c},a},growNode:function(a,b){var c=a<=this.root.w,d=b<=this.root.h,e=d&&this.root.h>=this.root.w+a,f=c&&this.root.w>=this.root.h+b;return e?this.growRight(a,b):f?this.growDown(a,b):d?this.growRight(a,b):c?this.growDown(a,b):null},growRight:function(a,b){this.root={used:!0,x:0,y:0,w:this.root.w+a,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:a,h:this.root.h}};var c;return(c=this.findNode(this.root,a,b))?this.splitNode(c,a,b):null},growDown:function(a,b){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+b,down:{x:0,y:this.root.h,w:this.root.w,h:b},right:this.root};var c;return(c=this.findNode(this.root,a,b))?this.splitNode(c,a,b):null}};var c={random:function(){return Math.random()-.5},w:function(a,b){return b.w-a.w},h:function(a,b){return b.h-a.h},a:function(a,b){return b.area-a.area},max:function(a,b){return Math.max(b.w,b.h)-Math.max(a.w,a.h)},min:function(a,b){return Math.min(b.w,b.h)-Math.min(a.w,a.h)},height:function(a,b){return c.msort(a,b,["h","w"])},width:function(a,b){return c.msort(a,b,["w","h"])},area:function(a,b){return c.msort(a,b,["a","h","w"])},maxside:function(a,b){return c.msort(a,b,["max","min","h","w"])},msort:function(a,b,d){var e,f;for(f=0;f<d.length;++f)if(e=c[d[f]](a,b),0!==e)return e;return 0}},d=function(){return[this.w," x ",this.h].join("")},e={binPack:function(e){var f,g,h;for(f=0,g=e.blocks.length;g>f;++f)h=e.blocks[f],"area"in h||(h.area=h.w*h.h);var i=e.dimensions?new a(e.dimensions[0],e.dimensions[1]):new b;e.sorter||(e.sorter="maxside"),e.blocks.sort(c[e.sorter]),i.fit(e.blocks);var j=[i.root.w,i.root.h],k=[],l=[];for(f=0,g=e.blocks.length;g>f;++f)h=e.blocks[f],h.fit?k.push(h):(h.toString=d,l.push(h));var m=j[0]*j[1],n=0;for(f=0,g=k.length;g>f;++f)h=k[f],n+=h.area;return{dimensions:j,filled:n/m,blocks:e.blocks,fitted:k,unfitted:l}}};return e}),Ink.createModule("Ink.Util.Cookie","1",[],function(){"use strict";var a={get:function(a){var b=document.cookie||!1,c={};if(b){b=b.replace(new RegExp("; ","g"),";");var d=b.split(";"),e=[];if(d.length>0)for(var f=0;f<d.length;f++)e=d[f].split("="),2===e.length&&(c[e[0]]=decodeURIComponent(e[1])),e=[]}return a?"undefined"!=typeof c[a]?c[a]:null:c},set:function(a,b,c,d,e,f){var g;if(!a||b===!1||"undefined"==typeof a||"undefined"==typeof b)return!1;g=a+"="+encodeURIComponent(b);var h=!1,i=!1,j=!1,k=!1;if(c&&"undefined"!=typeof c&&!isNaN(c)){var l=new Date,m=parseInt(Number(l.valueOf()),10)+1e3*Number(parseInt(c,10)),n=new Date(m),o=n.toGMTString(),p=new RegExp("([^\\s]+)(\\s\\d\\d)\\s(\\w\\w\\w)\\s(.*)");o=o.replace(p,"$1$2-$3-$4"),h="expires="+o}else h="undefined"==typeof c||isNaN(c)||0!==Number(parseInt(c,10))?"expires=Thu, 01-Jan-2037 00:00:01 GMT":"";if(i=d&&"undefined"!=typeof d?"path="+d:"path=/",e&&"undefined"!=typeof e)j="domain="+e;else{var q=new RegExp(":(.*)");j="domain="+window.location.host,j=j.replace(q,"")}k=f&&"undefined"!=typeof f?f:!1,document.cookie=g+"; "+h+"; "+i+"; "+j+"; "+k},remove:function(a,b,c){var d=!1,e=!1,f=-999999999;d=b&&"undefined"!=typeof b?b:"/",e=c&&"undefined"!=typeof c?c:window.location.host,this.set(a,"deleted",f,d,e)}};return a}),Ink.createModule("Ink.Util.Date","1",[],function(){"use strict";var a={_months:function(a){var b=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return b[a]},_iMonth:function(a){return Number(a)?+a-1:{janeiro:0,jan:0,fevereiro:1,fev:1,março:2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[a.toLowerCase()]},_wDays:function(a){var b=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"];return b[a]},_iWeek:function(a){return Number(a)?+a||7:{segunda:1,seg:1,terça:2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,sábado:6,sáb:6,domingo:7,dom:7}[a.toLowerCase()]},_daysInMonth:function(a,b){var c;return c=1===a||3===a||5===a||7===a||8===a||10===a||12===a?31:4===a||6===a||9===a||11===a?30:0===b%400||0===b%4&&0!==b%100?29:28},get:function(a,b){("undefined"==typeof a||""===a)&&(a="Y-m-d");var c=a.split(""),d=new Array(c.length),e="\\",f;f="undefined"==typeof b?new Date:"number"==typeof b?new Date(1e3*b):new Date(b);for(var g,h,i,j=0;j<c.length;j++)switch(c[j]){case e:d[j]=c[j+1],j++;break;case"d":var k=f.getDate();d[j]=String(k).length>1?k:"0"+k;break;case"D":d[j]=this._wDays(f.getDay()).substring(0,3);break;case"j":d[j]=f.getDate();break;case"l":d[j]=this._wDays(f.getDay());break;case"N":d[j]=f.getDay()||7;break;case"S":var l=f.getDate(),m=["st","nd","rd"],n="";d[j]=l>=11&&13>=l?"th":(n=m[String(l).substr(-1)-1])?n:"th";break;case"w":d[j]=f.getDay();break;case"z":g=Date.UTC(f.getFullYear(),0,0),h=Date.UTC(f.getFullYear(),f.getMonth(),f.getDate()),d[j]=Math.floor((h-g)/864e5);break;case"W":var o=new Date(f.getFullYear(),0,1);g=o.getDay()||7;var p=Math.floor((f-o)/864e5+1);d[j]=Math.ceil((p-(8-g))/7)+1;break;case"F":d[j]=this._months(f.getMonth());break;case"m":var q=String(f.getMonth()+1);d[j]=q.length>1?q:"0"+q;break;case"M":d[j]=this._months(f.getMonth()).substring(0,3);break;case"n":d[j]=f.getMonth()+1;break;case"t":d[j]=this._daysInMonth(f.getMonth()+1,f.getYear());break;case"L":var r=f.getFullYear();d[j]=r%4?!1:r%100?!0:r%400?!1:!0;break;case"o":throw'"o" not implemented!';case"Y":d[j]=f.getFullYear();break;case"y":d[j]=String(f.getFullYear()).substring(2);break;case"a":d[j]=f.getHours()<12?"am":"pm";break;case"A":d[j]=f.getHours<12?"AM":"PM";break;case"B":throw'"B" not implemented!';case"g":i=f.getHours(),d[j]=12>=i?i:i-12;break;case"G":d[j]=String(f.getHours());break;case"h":i=String(f.getHours()),i=12>=i?i:i-12,d[j]=i.length>1?i:"0"+i;break;case"H":i=String(f.getHours()),d[j]=i.length>1?i:"0"+i;break;case"i":var s=String(f.getMinutes());d[j]=s.length>1?s:"0"+s;break;case"s":var t=String(f.getSeconds());d[j]=t.length>1?t:"0"+t;break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":g=new Date(f.getFullYear(),0,1),d[j]=f.getTimezoneOffset()!==g.getTimezoneOffset()?1:0;break;case"O":var u=f.getTimezoneOffset(),v=u%60;i=String(-1*((u-v)/60)),"-"!==i.charAt(0)&&(i="+"+i),i=3===i.length?i:i.replace(/([+\-])(\d)/,"$10$2"),d[j]=i+v+"0";break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":d[j]=60*f.getTimezoneOffset();break;case"c":throw'"c" not implemented!';case"r":var w=this._wDays(f.getDay()).substr(0,3),x=this._months(f.getMonth()).substr(0,3);d[j]=w+", "+f.getDate()+" "+x+this.get(" Y H:i:s O",f);break;case"U":d[j]=Math.floor(f.getTime()/1e3);break;default:d[j]=c[j]}return d.join("")},set:function(a,b){if("undefined"!=typeof b){("undefined"==typeof a||""===a)&&(a="Y-m-d");for(var c=a.split(""),d=new Array(c.length),e="\\",f,g={year:void 0,month:void 0,day:void 0,dayY:void 0,dayW:void 0,week:void 0,hour:void 0,hourD:void 0,min:void 0,sec:void 0,msec:void 0,ampm:void 0,diffM:void 0,diffH:void 0,date:void 0},h=0,i=0;i<c.length;i++)switch(c[i]){case e:d[i]=c[i+1],i++;break;case"d":d[i]="(\\d{2})",g.day={original:i,match:h++};break;case"j":d[i]="(\\d{1,2})",g.day={original:i,match:h++};break;case"D":d[i]="([\\wá]{3})",g.dayW={original:i,match:h++};break;case"l":d[i]="([\\wá]{5,7})",g.dayW={original:i,match:h++};break;case"N":d[i]="(\\d)",g.dayW={original:i,match:h++};break;case"w":d[i]="(\\d)",g.dayW={original:i,match:h++};break;case"S":d[i]="\\w{2}";break;case"z":d[i]="(\\d{1,3})",g.dayY={original:i,match:h++};break;case"W":d[i]="(\\d{1,2})",g.week={original:i,match:h++};break;case"F":d[i]="([\\wç]{4,9})",g.month={original:i,match:h++};break;case"M":d[i]="(\\w{3})",g.month={original:i,match:h++};break;case"m":d[i]="(\\d{2})",g.month={original:i,match:h++};break;case"n":d[i]="(\\d{1,2})",g.month={original:i,match:h++};break;case"t":d[i]="\\d{2}";break;case"L":d[i]="\\w{4,5}";break;case"o":throw'"o" not implemented!';case"Y":d[i]="(\\d{4})",g.year={original:i,match:h++};break;case"y":d[i]="(\\d{2})",("undefined"==typeof g.year||"Y"!==c[g.year.original])&&(g.year={original:i,match:h++});break;case"a":d[i]="(am|pm)",g.ampm={original:i,match:h++};break;case"A":d[i]="(AM|PM)",g.ampm={original:i,match:h++};break;case"B":throw'"B" not implemented!';case"g":d[i]="(\\d{1,2})",g.hourD={original:i,match:h++};break;case"G":d[i]="(\\d{1,2})",g.hour={original:i,match:h++};break;case"h":d[i]="(\\d{2})",g.hourD={original:i,match:h++};break;case"H":d[i]="(\\d{2})",g.hour={original:i,match:h++};break;case"i":d[i]="(\\d{2})",g.min={original:i,match:h++};break;case"s":d[i]="(\\d{2})",g.sec={original:i,match:h++};break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":d[i]="\\d";break;case"O":d[i]="([-+]\\d{4})",g.diffH={original:i,match:h++};break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":d[i]="(\\-?\\d{1,5})",g.diffM={original:i,match:h++};break;case"c":throw'"c" not implemented!';case"r":d[i]="([\\wá]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})",g.date={original:i,match:h++};break;case"U":d[i]="(\\d{1,13})",g.date={original:i,match:h++};break;default:d[i]=c[i]}var j=new RegExp(d.join(""));try{if(f=b.match(j),!f)return}catch(k){return}var l="undefined"!=typeof g.date,m="undefined"!=typeof g.year,n="undefined"!=typeof g.dayY,o="undefined"!=typeof g.day,p="undefined"!=typeof g.month,q=p&&o,r=!p&&o,s="undefined"!=typeof g.dayW,t="undefined"!=typeof g.week,u=t&&s,v=!t&&s,w=n||q||!m&&r||u||!m&&v,x=!(m||n||o||p||s||t),y="undefined"!=typeof g.hourD&&"undefined"!=typeof g.ampm,z="undefined"!=typeof g.hour,A=y||z,B="undefined"!=typeof g.min,C="undefined"!=typeof g.sec,D="undefined"!=typeof g.msec,E=!x||A,F=E||B,G="undefined"!=typeof g.diffM,H="undefined"!=typeof g.diffH,I,J;if(l){if("U"===c[g.date.original])return new Date(1e3*+f[g.date.match+1]);var K=f[g.date.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/);return I=+K[4]+ +K[7].slice(0,3),J=+K[5]+60*((K[7].slice(0,1)+K[7].slice(3))/100),new Date(K[3],this._iMonth(K[2]),K[1],I,J,K[6])}var L=new Date,M,N,O,P,Q,R,S;if(w||x){if(w){if(m){var T=L.getFullYear()-50+"";M=f[g.year.match+1],"y"===c[g.year.original]&&(M=+T.slice(0,2)+(M>=T.slice(2)?0:1)+M)}else M=L.getFullYear();if(n)N=0,O=f[g.dayY.match+1];else if(o)N=p?this._iMonth(f[g.month.match+1]):L.getMonth(),O=f[g.day.match+1];else{N=0;var U;U=t?f[g.week.match+1]:this.get("W",L),O=7*(U-2)+(8-(new Date(M,0,1).getDay()||7))+this._iWeek(f[g.week.match+1])}if(0===N&&O>31){var V=new Date(M,N,O);N=V.getMonth(),O=V.getDate()}}else M=L.getFullYear(),N=L.getMonth(),O=L.getDate();return P=M+"-"+(N+1)+"-"+O+" ",I=y?+f[g.hourD.match+1]+("pm"===f[g.ampm.match+1]?12:0):z?f[g.hour.match+1]:x?L.getHours():"00",J=B?f[g.min.match+1]:E?"00":L.getMinutes(),Q=C?f[g.sec.match+1]:F?"00":L.getSeconds(),R=D?f[g.msec.match+1]:"000",S=H?f[g.diffH.match+1]:G?String(100*(-1*f[g.diffM.match+1]/60)).replace(/^(\d)/,"+$1").replace(/(^[\-+])(\d{3}$)/,"$10$2"):"+0000",new Date(P+I+":"+J+":"+Q+"."+R+S)}}}};return a}),Ink.createModule("Ink.Util.Dumper","1",[],function(){"use strict";var a={_tab:"    ",_formatParam:function(a){var b="";switch(typeof a){case"string":b="(string) "+a;break;case"number":b="(number) "+a;break;case"boolean":b="(boolean) "+a;break;case"object":b=null!==a?a.constructor===Array?"Array \n{\n"+this._outputFormat(a,0)+"\n}":"Object \n{\n"+this._outputFormat(a,0)+"\n}":"null";break;default:b=!1}return b},_getTabs:function(a){for(var b="",c=0;a>c;c++)b+=this._tab;return b},_outputFormat:function(a,b){var c="",d=!1;for(var e in a)if(null!==a[e])if("object"!=typeof a[e]||a[e].constructor!==Array&&a[e].constructor!==Object){if(a[e].constructor===Function)continue;c=c+this._tab+this._getTabs(b)+"["+e+"] => "+a[e]+"\n"}else a[e].constructor===Array?d="Array":a[e].constructor===Object&&(d="Object"),c+=this._tab+this._getTabs(b)+"["+e+"] => <b>"+d+"</b>\n",c+=this._tab+this._getTabs(b)+"{\n",c+=this._outputFormat(a[e],b+1)+this._tab+this._getTabs(b)+"}\n";else c=c+this._tab+this._getTabs(b)+"["+e+"] => null \n";return c},printDump:function(a,b){if(b&&"undefined"!=typeof b)if("string"==typeof b)document.getElementById(b).innerHTML="<pre>"+this._formatParam(a)+"</pre>";else{if("object"!=typeof b)throw"TARGET must be an element or an element ID";b.innerHTML="<pre>"+this._formatParam(a)+"</pre>"}else document.write("<pre>"+this._formatParam(a)+"</pre>")},returnDump:function(a){return this._formatParam(a)},alertDump:function(a){window.alert(this._formatParam(a).replace(/(<b>)(Array|Object)(<\/b>)/g,"$2"))},windowDump:function(a){var b="dumperwindow_"+1e4*Math.random(),c=window.open("",b,"width=400,height=300,left=50,top=50,status,menubar,scrollbars,resizable");c.document.open(),c.document.write("<pre>"+this._formatParam(a)+"</pre>"),c.document.close(),c.focus()}};return a}),Ink.createModule("Ink.Util.I18n","1",[],function(){"use strict";var a=/\{(?:(\{.*?})|(?:%s:)?(\d+)|(?:%s)?|([\w-]+))}/g,b=function(a,b){return"function"==typeof a?a.apply(this,b):void 0!==typeof a?a:""},c=function(a,b,d){return this instanceof c?(this.reset().lang(b).testMode(d).append(a||{},b),void 0):new c(a,b,d)};return c.prototype={reset:function(){return this._dicts=[],this._dict={},this._testMode=!1,this._lang=this._gLang,this},append:function(a){return this._dicts.push(a),this._dict=Ink.extendObj(this._dict,a[this._lang]),this},lang:function(a){if(!arguments.length)return this._lang;if(a&&this._lang!==a){this._lang=a,this._dict={};for(var b=0,c=this._dicts.length;c>b;b++)this._dict=Ink.extendObj(this._dict,this._dicts[b][a]||{})}return this},testMode:function(a){return arguments.length?(void 0!==a&&(this._testMode=!!a),this):!!this._testMode},getKey:function(a){var b,d=this._gLang,e=this._lang;return a in this._dict?b=this._dict[a]:(c.lang(e),b=this._gDict[a],c.lang(d)),b},text:function(c){if("string"==typeof c){var d=Array.prototype.slice.call(arguments,1),e=0,f="object"==typeof d[0],g=this.getKey(c);return void 0===g&&(g=this._testMode?"["+c+"]":c),"number"==typeof g&&(g+=""),"string"==typeof g?g=g.replace(a,function(a,c,g,h){var i=c?c:g?d[g-(f?0:1)]:h?d[0][h]||"":d[e++ +(f?1:0)];return b(i,[e].concat(d))}):"function"==typeof g?g.apply(this,d):g instanceof Array?b(g[d[0]],d):"object"==typeof g?b(g[d[0]],d):""}},ntext:function(a,b,c){var d=Array.prototype.slice.apply(arguments),e;if(2===d.length&&"number"==typeof b){if(e=this.getKey(a),!(e instanceof Array))return"";d.splice(0,1),e=e[1===b?0:1]}else d.splice(0,2),e=1===c?a:b;return this.text.apply(this,[e].concat(d))},ordinal:function(a){if(void 0===a)return"";var c=+a.toString().slice(-1),d=this.getKey("_ordinals");if(void 0===d)return"";if("string"==typeof d)return d;var e;return"function"==typeof d&&(e=d(a,c),"string"==typeof e)?e:"exceptions"in d&&(e="function"==typeof d.exceptions?d.exceptions(a,c):a in d.exceptions?b(d.exceptions[a],[a,c]):void 0,"string"==typeof e)?e:"byLastDigit"in d&&(e="function"==typeof d.byLastDigit?d.byLastDigit(c,a):c in d.byLastDigit?b(d.byLastDigit[c],[c,a]):void 0,"string"==typeof e)?e:"default"in d&&(e=b(d["default"],[a,c]),"string"==typeof e)?e:""},alias:function(){var a=Ink.bind(c.prototype.text,this);return a.ntext=Ink.bind(c.prototype.ntext,this),a.append=Ink.bind(c.prototype.append,this),a.ordinal=Ink.bind(c.prototype.ordinal,this),a.testMode=Ink.bind(c.prototype.testMode,this),a}},c.reset=function(){c.prototype._gDicts=[],c.prototype._gDict={},c.prototype._gLang="pt_PT"},c.reset(),c.append=function(a,b){if(b){if(!(b in a)){var d={};d[b]=a,a=d}b!==c.prototype._gLang&&c.lang(b)}c.prototype._gDicts.push(a),Ink.extendObj(c.prototype._gDict,a[c.prototype._gLang])},c.lang=function(a){if(!arguments.length)return c.prototype._gLang;if(a&&c.prototype._gLang!==a){c.prototype._gLang=a,c.prototype._gDict={};for(var b=0,d=c.prototype._gDicts.length;d>b;b++)Ink.extendObj(c.prototype._gDict,c.prototype._gDicts[b][a]||{})}},c}),Ink.createModule("Ink.Util.Json","1",[],function(){"use strict";function twoDigits(a){var b=""+a;return 1===b.length?"0"+b:b}var function_call=Function.prototype.call,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,date_toISOString=Date.prototype.toISOString?Ink.bind(function_call,Date.prototype.toISOString):function(a){return a.getUTCFullYear()+"-"+twoDigits(a.getUTCMonth()+1)+"-"+twoDigits(a.getUTCDate())+"T"+twoDigits(a.getUTCHours())+":"+twoDigits(a.getUTCMinutes())+":"+twoDigits(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},InkJson={_nativeJSON:window.JSON||null,_convertToUnicode:!1,_escape:function(a){var b={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(a)&&(a=a.replace(/([\x00-\x1f\\"])/g,function(a,c){var d=b[c];return d?d:(d=c.charCodeAt(),"\\u00"+Math.floor(d/16).toString(16)+(d%16).toString(16))})),a},_toUnicode:function(a){if(this._convertToUnicode){for(var b="",c=!1,d=!1,e=0,f=a.length;f>e;){if(c=a.charCodeAt(e),c>=32&&126>=c||8===c||9===c||10===c||12===c||13===c||32===c||34===c||47===c||58===c||92===c)d=34===c||92===c||47===c?"\\"+a.charAt(e):8===c?"\\b":9===c?"\\t":10===c?"\\n":12===c?"\\f":13===c?"\\r":a.charAt(e);else if(this._convertToUnicode){for(d=a.charCodeAt(e).toString(16)+"".toUpperCase();d.length<4;)d="0"+d;d="\\u"+d}else d=a.charAt(e);b+=d,e++}return b}return this._escape(a)},_stringifyValue:function(a){if("string"==typeof a)return'"'+this._toUnicode(a)+'"';if("number"!=typeof a||!isNaN(a)&&isFinite(a)){if("undefined"==typeof a||null===a)return"null";if("function"==typeof a.toJSON){var b=a.toJSON();return"string"==typeof b?'"'+this._escape(b)+'"':this._escape(b.toString())}if("number"==typeof a||"boolean"==typeof a)return""+a;if("function"==typeof a)return"null";if(a.constructor===Date){throw"";return'"'+this._escape(date_toISOString(a))+'"'}if(a.constructor===Array){for(var c="",d=0,e=a.length;e>d;d++)d>0&&(c+=","),c+=this._stringifyValue(a[d]);return"["+c+"]"}var f="";for(var g in a)({}).hasOwnProperty.call(a,g)&&(""!==f&&(f+=","),f+='"'+this._escape(g)+'": '+this._stringifyValue(a[g]));return"{"+f+"}"}return"null"},stringify:function(a,b){return this._convertToUnicode=!!b,!this._convertToUnicode&&this._nativeJSON?this._nativeJSON.stringify(a):this._stringifyValue(a)},parse:function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}};return InkJson}),Ink.createModule("Ink.Util.String","1",[],function(){"use strict";var InkUtilString={_chars:["&","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","ø","ù","ú","û","ü","ý","þ","ÿ","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","Ø","Ù","Ú","Û","Ü","Ý","Þ","€",'"',"ß","<",">","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","­","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾"],_entities:["amp","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","euro","quot","szlig","lt","gt","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34"],_accentedChars:["à","á","â","ã","ä","å","è","é","ê","ë","ì","í","î","ï","ò","ó","ô","õ","ö","ù","ú","û","ü","ç","ñ","À","Á","Â","Ã","Ä","Å","È","É","Ê","Ë","Ì","Í","Î","Ï","Ò","Ó","Ô","Õ","Ö","Ù","Ú","Û","Ü","Ç","Ñ"],_accentedRemovedChars:["a","a","a","a","a","a","e","e","e","e","i","i","i","i","o","o","o","o","o","u","u","u","u","c","n","A","A","A","A","A","A","E","E","E","E","I","I","I","I","O","O","O","O","O","U","U","U","U","C","N"],_htmlUnsafeChars:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},ucFirst:function(a,b){var c=b?/(^|\s)(\w)(\S{2,})/:/(^|\s)(\w)(\S{2,})/g;return a?String(a).replace(c,function(a,b,c,d){return b+c.toUpperCase()+d.toLowerCase()}):a},trim:function(a){return"string"==typeof a?a.replace(/^\s+|\s+$|\n+$/g,""):a},stripTags:function(a,b){if(b&&"string"==typeof b){for(var c=InkUtilString.trim(b).split(","),d=[],e=!1,f=0;f<c.length;f++)""!==InkUtilString.trim(c[f])&&(e=InkUtilString.trim(c[f].replace(/(\<|\>)/g,"").replace(/\s/,"")),d.push("(<"+e+"\\s[^>]+>|<(\\s|\\/)?(\\s|\\/)?"+e+">)"));for(var g=d.join("|"),h=new RegExp(g,"i"),i=a.match(new RegExp("<[^>]*>","g")),j=0;j<i.length;j++)i[j].match(h)||(a=a.replace(new RegExp(i[j],"gm"),""));return a}return a.replace(/\<[^\>]+\>/g,"")},htmlEntitiesEncode:function(a){if(a&&a.replace)for(var b=!1,c=0;c<InkUtilString._chars.length;c++)b=new RegExp(InkUtilString._chars[c],"gm"),a=a.replace(b,"&"+InkUtilString._entities[c]+";");return a},htmlEntitiesDecode:function(a){if(a&&a.replace){for(var b=!1,c=0;c<InkUtilString._entities.length;c++)b=new RegExp("&"+InkUtilString._entities[c]+";","gm"),a=a.replace(b,InkUtilString._chars[c]);a=a.replace(/&#[^;]+;?/g,function(a){return"x"===a.charAt(2)?String.fromCharCode(parseInt(a.substring(3),16)):String.fromCharCode(parseInt(a.substring(2),10))})}return a},utf8Encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(192|d>>6),b+=String.fromCharCode(128|63&d)):(b+=String.fromCharCode(224|d>>12),b+=String.fromCharCode(128|63&d>>6),b+=String.fromCharCode(128|63&d))}return b},shortString:function(a,b){for(var c=a.split(" "),d="",e=0;e<c.length;e++){if((d+c[e]+" ").length>=b){d+="&hellip;";break}d+=c[e]+" "}return d},truncateString:function(a,b){return a.length-1>b?a.substr(0,b-1)+"…":a},utf8Decode:function(a){for(var b="",c=0,d=0,e=0,f=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(e=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&e),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&e)<<6|63&f),c+=3);return b},removeAccentedChars:function(a){for(var b=a,c=!1,d=0;d<InkUtilString._accentedChars.length;d++)c=new RegExp(InkUtilString._accentedChars[d],"gm"),b=b.replace(c,""+InkUtilString._accentedRemovedChars[d]);return b},substrCount:function(a,b){return a?a.split(b).length-1:0},evalJSON:function(strJSON,sanitize){if("undefined"==typeof sanitize||null===sanitize||InkUtilString.isJSON(strJSON))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("ERROR: Bad JSON string...")}},isJSON:function(a){return a=a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(a)},htmlEscapeUnsafe:function(a){var b=InkUtilString._htmlUnsafeChars;return null!=a?String(a).replace(/[<>&'"]/g,function(a){return b[a]}):a},normalizeWhitespace:function(a){return null!=a?InkUtilString.trim(String(a).replace(/\s+/g," ")):a},toUnicode:function(a){if("string"==typeof a){for(var b="",c=!1,d=!1,e=a.length,f=0;e>f;){if(c=a.charCodeAt(f),c>=32&&126>=c||8==c||9==c||10==c||12==c||13==c||32==c||34==c||47==c||58==c||92==c)d=8==c?"\\b":9==c?"\\t":10==c?"\\n":12==c?"\\f":13==c?"\\r":a.charAt(f);else{for(d=a.charCodeAt(f).toString(16)+"".toUpperCase();d.length<4;)d="0"+d;d="\\u"+d}b+=d,f++}return b}},escape:function(a){var b=a.charCodeAt(0).toString(16).split("");if(b.length<3){for(;b.length<2;)b.unshift("0");b.unshift("x")}else{for(;b.length<4;)b.unshift("0");b.unshift("u")}return b.unshift("\\"),b.join("")},unescape:function(a){var b=a.lastIndexOf("0");b=-1===b?2:Math.min(b,2);var c=a.substring(b),d=parseInt(c,16);return String.fromCharCode(d)},escapeText:function(a,b){void 0===b&&(b=["[","]","'",","]);for(var c=[],d,e,f=0,g=a.length;g>f;++f)d=a[f],e=d.charCodeAt(0),(32>e||e>126&&-1===b.indexOf(d))&&(d=InkUtilString.escape(d)),c.push(d);return c.join("")},escapedCharRegex:/(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4})/g,unescapeText:function(a){for(var b;b=InkUtilString.escapedCharRegex.exec(a);)b=b[0],a=a.replace(b,InkUtilString.unescape(b)),InkUtilString.escapedCharRegex.lastIndex=0;return a},strcmp:function(a,b){return a===b?0:a>b?1:-1},packetize:function(a,b){for(var c=a.length,d=new Array(Math.ceil(c/b)),e=a.split(""),f,g=0;c;)f=Math.min(b,c),d[g++]=e.splice(0,f).join(""),c-=f;return d}};return InkUtilString}),Ink.createModule("Ink.Util.Swipe","1",["Ink.Dom.Event_1"],function(a){"use strict";var b=function(a,b){this._options=Ink.extendObj({callback:void 0,forceAxis:void 0,maxDist:void 0,maxDuration:void 0,minDist:void 0,minDuration:void 0,stopEvents:!0,storeGesture:!1},b||{}),this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)},this._element=Ink.i(a),this._init()
};return b._supported="ontouchstart"in document.documentElement,b.prototype={_init:function(){var b=document.body;a.observe(b,"touchstart",this._handlers.down),this._options.storeGesture&&a.observe(b,"touchmove",this._handlers.move),a.observe(b,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(a,b){if(a){do{if(a===b)return!0;a=a.parentNode}while(a);return!1}},_onDown:function(b){1===event.changedTouches.length&&this._isMeOrParent(b.target,this._element)&&(this._options.stopEvents===!0&&a.stop(b),b=b.changedTouches[0],this._isOn=!0,this._target=b.target,this._t0=(new Date).valueOf(),this._p0=[b.pageX,b.pageY],this._options.storeGesture&&(this._gesture=[this._p0],this._time=[0]))},_onMove:function(b){if(this._isOn&&1===event.changedTouches.length){this._options.stopEvents===!0&&a.stop(b),b=b.changedTouches[0];var c=(new Date).valueOf(),d=.001*(c-this._t0);this._gesture.push([b.pageX,b.pageY]),this._time.push(d)}},_onUp:function(b){if(this._isOn&&1===event.changedTouches.length){this._options.stopEvents&&a.stop(b),b=b.changedTouches[0],this._isOn=!1;var c=(new Date).valueOf(),d=[b.pageX,b.pageY],e=.001*(c-this._t0),f=[d[0]-this._p0[0],d[1]-this._p0[1]],g=Math.sqrt(f[0]*f[0]+f[1]*f[1]),h=Math.abs(f[0])>Math.abs(f[1])?"x":"y",i=this._options;if(!(i.minDist&&g<i.minDist||i.maxDist&&g>i.maxDist||i.minDuration&&e<i.minDuration||i.maxDuration&&e>i.maxDuration||i.forceAxis&&h!==i.forceAxis)){var j={upEvent:b,elementId:this._element.id,duration:e,dr:f,dist:g,axis:h,target:this._target};this._options.storeGesture&&(j.gesture=this._gesture,j.time=this._time),this._options.callback(this,j)}}}},b}),Ink.createModule("Ink.Util.Url","1",[],function(){"use strict";var a={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){return window.location.href},genQueryString:function(a,b){var c=-1!==a.indexOf("?"),d,e,f,g=[a];for(e in b)b.hasOwnProperty(e)&&(c?d="&":(d="?",c=!0),f=b[e],"number"==typeof f||f||(f=""),g=g.concat([d,encodeURIComponent(e),"=",encodeURIComponent(f)]));return g.join("")},getQueryString:function(a){var b;b=a&&"undefined"!=typeof a?a:this.getUrl();var c={};if(b.match(/\?(.+)/i)){var d=b.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2");if(d.length>0)for(var e=d.split(/[;&]/),f=0;f<e.length;f++){var g=e[f].split("=");c[decodeURIComponent(g[0])]="undefined"!=typeof g[1]&&g[1]?decodeURIComponent(g[1]):!1}}return c},getAnchor:function(a){var b;b=a&&"undefined"!=typeof a?a:this.getUrl();var c=!1;return b.match(/#(.+)/)&&(c=b.replace(/([^#]+)#(.*)/,"$2")),c},getAnchorString:function(a){var b;b=a&&"undefined"!=typeof a?a:this.getUrl();var c={};if(b.match(/#(.+)/i)){var d=b.replace(/^([^#]+)#(.*)?/g,"$2");if(d.length>0)for(var e=d.split(/[;&]/),f=0;f<e.length;f++){var g=e[f].split("=");c[decodeURIComponent(g[0])]="undefined"!=typeof g[1]&&g[1]?decodeURIComponent(g[1]):!1}}return c},parseUrl:function(a){var b={};if(a&&"undefined"!=typeof a&&"string"==typeof a){if(a.match(/^([^:]+):\/\//i)){var c=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;a.match(c)&&(b.scheme=a.replace(c,"$1"),b.host=a.replace(c,"$2"),b.path="/"+a.replace(c,"$3"),b.query=a.replace(c,"$4")||!1,b.fragment=a.replace(c,"$5")||!1)}else{var d=new RegExp("^([^\\?]+)\\?([^#]+)#(.*)","i"),e=new RegExp("^([^\\?]+)\\?([^#]+)#?","i"),f=new RegExp("^([^\\?]+)\\??","i");a.match(d)?(b.scheme=!1,b.host=!1,b.path=a.replace(d,"$1"),b.query=a.replace(d,"$2"),b.fragment=a.replace(d,"$3")):a.match(e)?(b.scheme=!1,b.host=!1,b.path=a.replace(e,"$1"),b.query=a.replace(e,"$2"),b.fragment=!1):a.match(f)&&(b.scheme=!1,b.host=!1,b.path=a.replace(f,"$1"),b.query=!1,b.fragment=!1)}if(b.host){var g=new RegExp("^(.*)\\:(\\d+)$","i");if(b.host.match(g)){var h=b.host;b.host=h.replace(g,"$1"),b.port=h.replace(g,"$2")}else b.port=!1;if(b.host.match(/@/i)){var i=b.host;b.host=i.split("@")[1];var j=i.split("@")[0];j.match(/\:/)?(b.user=j.split(":")[0],b.pass=j.split(":")[1]):(b.user=j,b.pass=!1)}}}return b},currentScriptElement:function(a){var b=document.getElementsByTagName("script");if("undefined"==typeof a)return b.length>0?b[b.length-1]:!1;for(var c=!1,d=new RegExp(""+a,"i"),e=0,f=b.length;f>e;e++)if(c=b[e],d.test(c.src))return c;return!1},_debug:function(){}};return a}),Ink.createModule("Ink.Util.Validator","1",[],function(){"use strict";var a={_countryCodes:["AO","CV","MZ","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de sôr",243:"santarém",244:"leiria",245:"portalegre",249:"torres novas",251:"valença",252:"vila nova de famalicão",253:"braga",254:"peso da régua",255:"penafiel",256:"são joão da madeira",258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da raínha",263:"vila franca de xira",265:"setúbal",266:"évora",268:"estremoz",269:"santiago do cacém",271:"guarda",272:"castelo branco",273:"bragança",274:"proença-a-nova",275:"covilhã",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portimão",283:"odemira",284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico",295:"angra do heroísmo, graciosa, são jorge, terceira",296:"ponta delgada, são miguel, santa maria",91:"rede móvel 91 (Vodafone / Yorn)",93:"rede móvel 93 (Optimus)",96:"rede móvel 96 (TMN)",92:"rede móvel 92 (TODOS)",707:"número único",760:"número único",800:"número grátis",808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"móvel 91",95:"móvel 95",97:"móvel 97",98:"móvel 98",99:"móvel 99"},_internacionalAO:244,_indicativosAO:{2:"fixo",91:"móvel 91",92:"móvel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"móvel 82",84:"móvel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"móvel 7"},_characterGroups:{numbers:["0-9"],asciiAlpha:["a-zA-Z"],latin1Alpha:["a-zA-Z","À-ÿ"],unicodeAlpha:["a-zA-Z","À-ÿ","Ā-῿","Ⰰ-퟿"],space:[" "],dash:["-"],underscore:["_"],nicknamePunctuation:["_.-"],singleLineWhitespace:["	 "],newline:["\n"],whitespace:["	\n\f\r  "],asciiPunctuation:["!-/",":-@","[-`","{-~"],latin1Punctuation:["!-/",":-@","[-`","{-~","¡-¿","×","÷"],unicodePunctuation:["!-/",":-@","[-`","{-~","¡-¿","×","÷"," -⁯","⸀-⹿","　-〿"]},createRegExp:function(b){var c="^[";for(var d in b)if(b.hasOwnProperty(d)){if(!(d in a._characterGroups))throw new Error("group "+d+" is not a valid character group");b[d]&&(c+=a._characterGroups[d].join(""))}return new RegExp(c+"]*?$")},checkCharacterGroups:function(b,c){return a.createRegExp(c).test(b)},unicode:function(b,c){return a.checkCharacterGroups(b,Ink.extendObj({unicodeAlpha:!0},c))},latin1:function(b,c){return a.checkCharacterGroups(b,Ink.extendObj({latin1Alpha:!0},c))},ascii:function(b,c){return a.checkCharacterGroups(b,Ink.extendObj({asciiAlpha:!0},c))},number:function(b,c){b+="";var d=Ink.extendObj({decimalSep:".",thousandSep:"",negative:!0,decimalPlaces:null,maxDigits:null,max:null,min:null,returnNumber:!1},c||{});if(d.thousandSep)return b=b.replace(new RegExp("\\"+d.thousandSep,"g"),""),d.thousandSep="",a.number(b,d);if(d.negative===!1)return d.min=0,d.negative=!0,a.number(b,d);if("."!==d.decimalSep&&(b=b.replace(new RegExp("\\"+d.decimalSep,"g"),".")),!/^(-)?(\d+)?(\.\d+)?$/.test(b)||""===b)return!1;var e;if(d.decimalSep&&-1!==b.indexOf(d.decimalSep)){if(e=b.split(d.decimalSep),null!==d.decimalPlaces&&e[1].length>d.decimalPlaces)return!1}else e=[""+b,""];if(null!==d.maxDigits&&e[0].replace(/-/g,"").length>d.maxDigits)return e;var f=parseFloat(b);return null!==d.maxExcl&&f>=d.maxExcl||null!==d.minExcl&&f<=d.minExcl?!1:null!==d.max&&f>d.max||null!==d.min&&f<d.min?!1:d.returnNumber?f:!0},_isLeapYear:function(a){var b=/^\d{4}$/;return b.test(a)?a%4?!1:a%100?!0:a%400?!1:!0:!1},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/},"yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}},_daysInMonth:function(a,b){var c=0;return c=1===a||3===a||5===a||7===a||8===a||10===a||12===a?31:4===a||6===a||9===a||11===a?30:0===b%400||0===b%4&&0!==b%100?29:28},_isValidDate:function(a,b,c){var d=/^\d{4}$/,e=/^\d{1,2}$/;return d.test(a)&&e.test(b)&&e.test(c)&&b>=1&&12>=b&&c>=1&&this._daysInMonth(b,a)>=c?!0:!1},email:function(a){var b=new RegExp("^[_a-z0-9-]+((\\.|\\+)[_a-z0-9-]+)*@([\\w]*-?[\\w]*\\.)+[a-z]{2,4}$","i");return b.test(a)?!0:!1},mail:function(b){return a.email(b)},url:function(a,b){if("undefined"==typeof b||b===!1){var c=new RegExp("(^(http\\:\\/\\/|https\\:\\/\\/)(.+))","i");c.test(a)===!1&&(a="http://"+a)}var d=new RegExp("^(http:\\/\\/|https:\\/\\/)([\\w]*(-?[\\w]*)*\\.)+[a-z]{2,4}","i");return d.test(a)===!1?!1:!0},isPTPhone:function(a){a=a.toString();var b=[];for(var c in this._indicativosPT)"string"==typeof this._indicativosPT[c]&&b.push(c);var d=b.join("|"),e=/^(00351|\+351)/;e.test(a)&&(a=a.replace(e,""));var f=/(\s|\-|\.)+/g;a=a.replace(f,"");var g=/[\d]{9}/i;if(9===a.length&&g.test(a)){var h=new RegExp("^("+d+")");if(h.test(a))return!0}return!1},isPortuguesePhone:function(a){return this.isPTPhone(a)},isCVPhone:function(a){a=a.toString();var b=[];for(var c in this._indicativosCV)"string"==typeof this._indicativosCV[c]&&b.push(c);var d=b.join("|"),e=/^(00238|\+238)/;e.test(a)&&(a=a.replace(e,""));var f=/(\s|\-|\.)+/g;a=a.replace(f,"");var g=/[\d]{7}/i;if(7===a.length&&g.test(a)){var h=new RegExp("^("+d+")");if(h.test(a))return!0}return!1},isAOPhone:function(a){a=a.toString();var b=[];for(var c in this._indicativosAO)"string"==typeof this._indicativosAO[c]&&b.push(c);var d=b.join("|"),e=/^(00244|\+244)/;e.test(a)&&(a=a.replace(e,""));var f=/(\s|\-|\.)+/g;a=a.replace(f,"");var g=/[\d]{9}/i;if(9===a.length&&g.test(a)){var h=new RegExp("^("+d+")");if(h.test(a))return!0}return!1},isMZPhone:function(a){a=a.toString();var b=[];for(var c in this._indicativosMZ)"string"==typeof this._indicativosMZ[c]&&b.push(c);var d=b.join("|"),e=/^(00258|\+258)/;e.test(a)&&(a=a.replace(e,""));var f=/(\s|\-|\.)+/g;a=a.replace(f,"");var g=/[\d]{8,9}/i;if((9===a.length||8===a.length)&&g.test(a)){var h=new RegExp("^("+d+")");if(h.test(a)){if(0===a.indexOf("2")&&8===a.length)return!0;if(0===a.indexOf("8")&&9===a.length)return!0}}return!1},isTLPhone:function(a){a=a.toString();var b=[];for(var c in this._indicativosTL)"string"==typeof this._indicativosTL[c]&&b.push(c);var d=b.join("|"),e=/^(00670|\+670)/;e.test(a)&&(a=a.replace(e,""));var f=/(\s|\-|\.)+/g;a=a.replace(f,"");var g=/[\d]{7}/i;if(7===a.length&&g.test(a)){var h=new RegExp("^("+d+")");if(h.test(a))return!0}return!1},isPhone:function(){var a;if(0===arguments.length)return!1;var b=arguments[0];if(arguments.length>1){if(arguments[1].constructor!==Array){if("function"==typeof this["is"+arguments[1].toUpperCase()+"Phone"])return this["is"+arguments[1].toUpperCase()+"Phone"](b);throw"Invalid Country Code!"}var c;for(a=0;a<arguments[1].length;a++){if("function"!=typeof(c=this["is"+arguments[1][a].toUpperCase()+"Phone"]))throw"Invalid Country Code!";if(c(b))return!0}}else for(a=0;a<this._countryCodes.length;a++)if(this["is"+this._countryCodes[a]+"Phone"](b))return!0;return!1},codPostal:function(a,b,c){var d=/^(\s*\-\s*|\s+)$/,e=/^\s+|\s+$/g,f=/^[1-9]\d{3}$/,g=/^\d{3}$/,h=/^(.{4})(.*)(.{3})$/;if(c=!!c,a=a.replace(e,""),"undefined"!=typeof b){if(b=b.replace(e,""),f.test(a)&&g.test(b))return c===!0?[!0,!0]:!0}else{if(f.test(a))return c===!0?[!0,!1]:!0;var i=a.match(h);if(null!==i&&f.test(i[1])&&d.test(i[2])&&g.test(i[3]))return c===!0?[!0,!1]:!0}return c===!0?[!1,!1]:!1},isDate:function(a,b){if("undefined"==typeof this._dateParsers[a])return!1;var c=this._dateParsers[a].year,d=this._dateParsers[a].month,e=this._dateParsers[a].day,f=this._dateParsers[a].parser,g=this._dateParsers[a].sep,h=b.match(f);if(null!==h&&h[2]===h[4]&&h[2]===g){var i=2===h[c].length?"20"+h[c].toString():h[c];if(this._isValidDate(i,h[d].toString(),h[e].toString()))return!0}return!1},isColor:function(a){var b,c=!1,d=/^[a-zA-Z]+$/,e=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,f=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,g=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,h=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,i=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;if(d.test(a)||e.test(a))return!0;var j;if(null!==(b=f.exec(a))||null!==(b=g.exec(a)))for(j=b.length;j--;){if((2===j||4===j||6===j)&&"undefined"!=typeof b[j]&&""!==b[j]){if(!("undefined"!=typeof b[j-1]&&b[j-1]>=0&&b[j-1]<=100))return!1;c=!0}if(1===j||3===j||5===j&&("undefined"==typeof b[j+1]||""===b[j+1])){if(!("undefined"!=typeof b[j]&&b[j]>=0&&b[j]<=255))return!1;c=!0}}if(null!==(b=h.exec(a))||null!==(b=i.exec(a)))for(j=b.length;j--;){if(3===j||5===j){if(!("undefined"!=typeof b[j-1]&&"undefined"!=typeof b[j]&&""!==b[j]&&b[j-1]>=0&&b[j-1]<=100))return!1;c=!0}if(1===j){if(!("undefined"!=typeof b[j]&&b[j]>=0&&b[j]<=360))return!1;c=!0}}return c},isIP:function(a,b){if("string"!=typeof a)return!1;switch(b=(b||"ipv4").toLowerCase()){case"ipv4":return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(a);case"ipv6":return/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(a);default:return!1}},_creditCardSpecs:{"default":{length:"13,14,15,16,17,18,19",prefix:/^.+/,luhn:!0},"american express":{length:"15",prefix:/^3[47]/,luhn:!0},"diners club":{length:"14,16",prefix:/^36|55|30[0-5]/,luhn:!0},discover:{length:"16",prefix:/^6(?:5|011)/,luhn:!0},jcb:{length:"15,16",prefix:/^3|1800|2131/,luhn:!0},maestro:{length:"16,18",prefix:/^50(?:20|38)|6(?:304|759)/,luhn:!0},mastercard:{length:"16",prefix:/^5[1-5]/,luhn:!0},visa:{length:"13,16",prefix:/^4/,luhn:!0}},_luhn:function(a){if(a=parseInt(a,10),"number"!=typeof a&&0!==a%1)return!1;a+="";var b=a.length,c,d=0;for(c=b-1;c>=0;c-=2)d+=parseInt(a.substr(c,1),10);for(c=b-2;c>=0;c-=2){var e=parseInt(2*a.substr(c,1),10);d+=e>=10?e-9:e}return 0===d%10},isCreditCard:function(a,b){if(/\d+/.test(a)===!1)return!1;if("undefined"==typeof b)b="default";else if("array"==typeof b){var c,d=b.length;for(c=0;d>c;c++)if(this.isCreditCard(a,b[c]))return!0;return!1}if(b=b.toLowerCase(),"undefined"==typeof this._creditCardSpecs[b])return!1;var e=a.length+"";return-1===this._creditCardSpecs[b].length.split(",").indexOf(e)?!1:this._creditCardSpecs[b].prefix.test(a)?this._creditCardSpecs[b].luhn===!1?!0:this._luhn(a):!1}};return a}),Ink.createModule("Ink.UI.Aux","1",["Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(a,b,c,d){"use strict";var e={},f=0,g={Layouts:{SMALL:"small",MEDIUM:"medium",LARGE:"large"},isDOMElement:function(a){return"object"==typeof a&&"nodeType"in a&&1===a.nodeType},isInteger:function(a){return"number"==typeof a&&0===a%1},elOrSelector:function(a,b){if(!this.isDOMElement(a)){var d=c.select(a);if(0===d.length)throw new TypeError(b+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself.");return d[0]}return a},clone:function(a){try{if("object"!=typeof a)throw new Error("Given argument is not an object!");return JSON.parse(JSON.stringify(a))}catch(b){throw new Error("Given object cannot have loops!")}},childIndex:function(a){if(g.isDOMElement(a))for(var b=c.select("> *",a.parentNode),d=0,e=b.length;e>d;++d)if(b[d]===a)return d;throw"not found!"},ajaxJSON:function(b,c,d){new a(b,{evalJS:"force",method:"POST",parameters:c,onSuccess:function(a){try{if(a=a.responseJSON,"ok"!==a.status)throw"server error: "+a.message;d(null,a)}catch(b){d(b)}},onFailure:function(){d("communication failure")}})},currentLayout:function(){var a,d,e,f,g,h=c.select("#ink-layout-detector")[0];if(!h){h=document.createElement("div"),h.id="ink-layout-detector";for(e in this.Layouts)this.Layouts.hasOwnProperty(e)&&(f=this.Layouts[e],g=document.createElement("div"),g.className="show-"+f+" hide-all",g.setAttribute("data-ink-layout",f),h.appendChild(g));document.body.appendChild(h)}for(a=0,d=h.childNodes.length;d>a;++a)if(g=h.childNodes[a],"hidden"!==b.getStyle(g,"visibility"))return g.getAttribute("data-ink-layout")},hashSet:function(a){if("object"!=typeof a)throw new TypeError("o should be an object!");var b=d.getAnchorString();b=Ink.extendObj(b,a),window.location.hash=d.genQueryString("",b).substring(1)},cleanChildren:function(a){if(!g.isDOMElement(a))throw"Please provide a valid DOMElement";for(var b,c=a.lastChild;c;)b=c.previousSibling,a.removeChild(c),c=b},storeIdAndClasses:function(a,b){if(!g.isDOMElement(a))throw"Please provide a valid DOMElement as first parameter";var c=a.id;c&&(b._id=c);var d=a.className;d&&(b._classes=d)},restoreIdAndClasses:function(a,b){if(!g.isDOMElement(a))throw"Please provide a valid DOMElement as first parameter";b._id&&a.id!==b._id&&(a.id=b._id),b._classes&&-1===a.className.indexOf(b._classes)&&(a.className?a.className+=" "+b._classes:a.className=b._classes),b._instanceId&&!a.getAttribute("data-instance")&&a.setAttribute("data-instance",b._instanceId)},registerInstance:function(a,b,c){if(!a._instanceId){if("object"!=typeof a)throw new TypeError("1st argument must be a JavaScript object!");if(!a._options||!a._options.skipRegister){if(!this.isDOMElement(b))throw new TypeError("2nd argument must be a DOM element!");if(void 0!==c&&"string"!=typeof c)throw new TypeError("3rd argument must be a string!");var d=(c||"instance")+ ++f;e[d]=a,a._instanceId=d;var g=b.getAttribute("data-instance");g=null!==g?[g,d].join(" "):d,b.setAttribute("data-instance",g)}}},unregisterInstance:function(a){delete e[a]},getInstance:function(a){var b;if(this.isDOMElement(a)){if(b=a.getAttribute("data-instance"),null===b)throw new Error("argument is not a DOM instance element!")}else b=a;b=b.split(" ");var c,d,f,g=b.length,h=[];for(f=0;g>f;++f){if(d=b[f],!d)throw new Error("Element is not a JS instance!");if(c=e[d],!c)throw new Error('Instance "'+d+'" not found!');h.push(c)}return 1===g?h[0]:h},getInstanceFromSelector:function(a){var b=c.select(a)[0];if(!b)throw new Error("Element not found!");return this.getInstance(b)},getInstanceIds:function(){var a=[];for(var b in e)e.hasOwnProperty(b)&&a.push(b);return a},getInstances:function(){var a=[];for(var b in e)e.hasOwnProperty(b)&&a.push(e[b]);return a},destroyComponent:function(){Ink.Util.Aux.unregisterInstance(this._instanceId),this._element.parentNode.removeChild(this._element)}};return g}),Ink.createModule("Ink.UI.Carousel","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.UI.Pagination_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1"],function(a,b,c,d,e,f){"use strict";var g=function(c,f){this._handlers={paginationChange:Ink.bind(this._onPaginationChange,this),windowResize:Ink.bind(this.refit,this)},b.observe(window,"resize",this._handlers.windowResize),this._element=a.elOrSelector(c,"1st argument"),this._options=Ink.extendObj({axis:"x",hideLast:!1,center:!1,keyboardSupport:!1,pagination:null,onChange:null},f||{},d.data(this._element)),this._isY="y"===this._options.axis;var g=this._element,h=Ink.s("ul.stage",g);if(this._ulEl=h,d.removeTextNodeChildren(h),this._options.hideLast){var i=document.createElement("div");i.className="hider",this._element.appendChild(i),i.style.position="absolute",i.style[this._isY?"left":"top"]="0",i.style[this._isY?"right":"bottom"]="0",i.style[this._isY?"bottom":"right"]="0",this._hiderEl=i}this.refit(),this._isY&&(this._ulEl.style.whiteSpace="normal"),this._options.pagination&&(a.isDOMElement(this._options.pagination)||"string"==typeof this._options.pagination?this._pagination=new e(this._options.pagination,{size:this._numPages,onChange:this._handlers.paginationChange}):(this._pagination=this._options.pagination,this._pagination._options.onChange=this._handlers.paginationChange,this._pagination.setSize(this._numPages),this._pagination.setCurrent(0)))};return g.prototype={refit:function(){this._liEls=Ink.ss("li.slide",this._ulEl);var a=this._liEls.length;this._ctnLength=this._size(this._element),this._elLength=this._size(this._liEls[0]),this._itemsPerPage=Math.floor(this._ctnLength/this._elLength),this._numPages=Math.ceil(a/this._itemsPerPage),this._deltaLength=this._itemsPerPage*this._elLength,this._isY?(this._element.style.width=this._liEls[0].offsetWidth+"px",this._ulEl.style.width=this._liEls[0].offsetWidth+"px"):this._ulEl.style.height=this._liEls[0].offsetHeight+"px",this._center(),this._updateHider(),this._IE7(),this._pagination&&(this._pagination.setSize(this._numPages),this._pagination.setCurrent(0))},_size:function(a){var b=d.outerDimensions(a);return this._isY?b[1]:b[0]},_center:function(){if(this._options.center){var a=Math.floor((this._ctnLength-this._elLength*this._itemsPerPage)/2),b;b=this._isY?[a,"px 0"]:["0 ",a,"px"],this._ulEl.style.padding=b.join("")}},_updateHider:function(){if(this._hiderEl){var a=Math.floor(this._ctnLength-this._elLength*this._itemsPerPage);this._options.center&&(a/=2),this._hiderEl.style[this._isY?"height":"width"]=a+"px"}},_IE7:function(){if(f.IE&&"7"==""+f.version.split(".")[0])for(var a=this._numPages,b=Ink.ss("li.slide",this._ulEl),c=function(a,c){b[d].style[a]=c},d=0,e=b.length;e>d;d++)c("position","absolute"),c(this._isY?"top":"left",d*this._elLength+"px")},_onPaginationChange:function(a){var b=a.getCurrent();this._ulEl.style["y"===this._options.axis?"top":"left"]=["-",b*this._deltaLength,"px"].join(""),this._options.onChange&&this._options.onChange.call(this,b)}},g}),Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Element_1"],function(a,b){"use strict";var c=function(){a.observe(document.body,"click",function(c){var d=a.element(c);if(d=b.findUpwardsByClass(d,"ink-close")||b.findUpwardsByClass(d,"ink-dismiss")){var e=d;e=b.findUpwardsByClass(d,"ink-alert")||b.findUpwardsByClass(d,"ink-alert-block"),e&&(a.stop(c),b.remove(e))}})};return c}),Ink.createModule("Ink.UI.DatePicker","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.Date_1","Ink.Dom.Browser_1"],function(a,b,c,d,e,f,g){"use strict";var h=function(b,c){b&&(this._dataField=a.elOrSelector(b,"1st argument")),this._options=Ink.extendObj({instance:"scdp_"+Math.round(99999*Math.random()),format:"yyyy-mm-dd",cssClass:"sapo_component_datepicker",position:"right",onFocus:!0,onYearSelected:void 0,onMonthSelected:void 0,validDayFn:void 0,startDate:!1,onSetDate:!1,displayInSelect:!1,showClose:!0,showClean:!0,yearRange:!1,dateRange:!1,startWeekDay:1,closeText:"Close",cleanText:"Clear",prevLinkText:"«",nextLinkText:"»",ofText:"&nbsp;de&nbsp;",month:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},wDay:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}},d.data(this._dataField)||{}),this._options=Ink.extendObj(this._options,c||{}),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,this._picker=null,this._options.pickerField&&(this._picker=a.elOrSelector(this._options.pickerField,"pickerField")),this._today=new Date,this._day=this._today.getDate(),this._month=this._today.getMonth(),this._year=this._today.getFullYear(),this._setMinMax(this._options.dateRange||this._options.yearRange),this._data=new Date(Date.UTC.apply(this,this._checkDateRange(this._year,this._month,this._day))),this._options.startDate&&"string"==typeof this._options.startDate&&/\d\d\d\d\-\d\d\-\d\d/.test(this._options.startDate)&&this.setDate(this._options.startDate),this._init(),this._render(),this._options.startDate||this._dataField&&"string"==typeof this._dataField.value&&this._dataField.value&&this.setDate(this._dataField.value),a.registerInstance(this,this._containerObject,"datePicker")};return h.prototype={version:"0.1",_init:function(){Ink.extendObj(this._options,this._lang||{})},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.id=this._options.instance,this._containerObject.className="sapo_component_datepicker";var c=document.getElementsByTagName("body")[0];if(this._options.showClose||this._options.showClean){if(this._superTopBar=document.createElement("div"),this._superTopBar.className="sapo_cal_top_options",this._options.showClean){var e=document.createElement("a");e.className="clean",e.innerHTML=this._options.cleanText,this._superTopBar.appendChild(e)}if(this._options.showClose){var f=document.createElement("a");f.className="close",f.innerHTML=this._options.closeText,this._superTopBar.appendChild(f)}this._containerObject.appendChild(this._superTopBar)}var g=document.createElement("div");g.className="sapo_cal_top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="sapo_cal_month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="sapo_cal_prev",this._monthPrev.innerHTML='<a href="#prev" class="change_month_prev">'+this._options.prevLinkText+"</a>",this._monthNext=document.createElement("div"),this._monthNext.className="sapo_cal_next",this._monthNext.innerHTML='<a href="#next" class="change_month_next">'+this._options.nextLinkText+"</a>",g.appendChild(this._monthPrev),g.appendChild(this._monthDescContainer),g.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="sapo_cal_month",this._containerObject.appendChild(g),this._containerObject.appendChild(this._monthContainer),this._monthSelector=document.createElement("ul"),this._monthSelector.className="sapo_cal_month_selector";for(var h,i,j=1;12>=j;j++)0===(j-1)%4&&(h=document.createElement("ul")),i=document.createElement("li"),i.innerHTML='<a href="#" class="sapo_calmonth_'+(2===String(j).length?j:"0"+j)+'">'+this._options.month[j].substring(0,3)+"</a>",h.appendChild(i),0===j%4&&this._monthSelector.appendChild(h);if(this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="sapo_cal_year_selector",this._containerObject.appendChild(this._yearSelector),(!this._options.onFocus||this._options.displayInSelect)&&(this._options.pickerField?this._picker=a.elOrSelector(this._options.pickerField,"pickerField"):(this._picker=document.createElement("a"),this._picker.href="#open_cal",this._picker.innerHTML="open",this._picker.style.position="absolute",this._picker.style.top=d.elementTop(this._dataField),this._picker.style.left=d.elementLeft(this._dataField)+(d.elementWidth(this._dataField)||0)+5+"px",this._dataField.parentNode.appendChild(this._picker),this._picker.className="sapo_cal_date_picker")),this._options.displayInSelect){if(!(this._options.dayField&&this._options.monthField&&this._options.yearField||this._options.pickerField))throw"To use display in select you *MUST* to set dayField, monthField, yearField and pickerField!";this._options.dayField=a.elOrSelector(this._options.dayField,"dayField"),this._options.monthField=a.elOrSelector(this._options.monthField,"monthField"),this._options.yearField=a.elOrSelector(this._options.yearField,"yearField")}c.insertBefore(this._containerObject,c.childNodes[0]),this._picker?b.observe(this._picker,"click",Ink.bindEvent(function(a){b.stop(a),this._containerObject=d.clonePosition(this._containerObject,this._picker),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"},this)):b.observe(this._dataField,"focus",Ink.bindEvent(function(){this._containerObject=d.clonePosition(this._containerObject,this._dataField),"bottom"===this._options.position?(this._containerObject.style.top=d.elementHeight(this._dataField)+d.offsetTop(this._dataField)+"px",this._containerObject.style.left=d.offset(this._dataField)[0]+"px"):(this._containerObject.style.top=d.offset(this._dataField)[1]+"px",this._containerObject.style.left=d.elementWidth(this._dataField)+d.offset(this._dataField)[0]+"px"),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"},this)),this._options.displayInSelect?(b.observe(this._options.dayField,"change",Ink.bindEvent(function(){var a=this._options.yearField[this._options.yearField.selectedIndex].value;""!==a&&0!==a&&(this._updateDate(),this._showDefaultView())},this)),b.observe(this._options.monthField,"change",Ink.bindEvent(function(){var a=this._options.yearField[this._options.yearField.selectedIndex].value;""!==a&&0!==a&&(this._updateDate(),this._showDefaultView())},this)),b.observe(this._options.yearField,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView()},this))):(b.observe(this._dataField,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._hoverPicker||(this._containerObject.style.display="none")},this)),b.observe(this._dataField,"blur",Ink.bindEvent(function(){this._hoverPicker||(this._containerObject.style.display="none")},this))),b.observe(document,"click",Ink.bindEvent(function(a){void 0===a.target&&(a.target=a.srcElement),d.descendantOf(this._containerObject,a.target)||a.target===this._dataField||(this._picker?a.target===this._picker||this._options.displayInSelect&&(a.target===this._options.dayField||a.target===this._options.monthField||a.target===this._options.yearField)||this._options.dayField&&(d.descendantOf(this._options.dayField,a.target)||d.descendantOf(this._options.monthField,a.target)||d.descendantOf(this._options.yearField,a.target))||(this._containerObject.style.display="none"):this._containerObject.style.display="none")},this)),this._showMonth(),this._monthChanger=document.createElement("a"),this._monthChanger.href="#monthchanger",this._monthChanger.className="sapo_cal_link_month",this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText=document.createElement("span"),this._deText.innerHTML=this._options._deText,this._yearChanger=document.createElement("a"),this._yearChanger.href="#yearchanger",this._yearChanger.className="sapo_cal_link_year",this._yearChanger.innerHTML=this._year,this._monthDescContainer.innerHTML="",this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._deText),this._monthDescContainer.appendChild(this._yearChanger),b.observe(this._containerObject,"mouseover",Ink.bindEvent(function(a){b.stop(a),this._hoverPicker=!0},this)),b.observe(this._containerObject,"mouseout",Ink.bindEvent(function(a){b.stop(a),this._hoverPicker=!1
},this)),b.observe(this._containerObject,"click",Ink.bindEvent(function(a){"undefined"==typeof a.target&&(a.target=a.srcElement);var c=a.target.className,d=-1!==c.indexOf("sapo_cal_off");if(b.stop(a),0!==c.indexOf("sapo_cal_")||d)if(0!==c.indexOf("sapo_calmonth_")||d)if(0!==c.indexOf("sapo_calyear_")||d)0!==c.indexOf("change_month_")||d?0!==c.indexOf("change_year_")||d?"clean"===c?this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._dataField.value="":"close"===c&&(this._containerObject.style.display="none"):"change_year_next"===c?this._showYearSelector(1):"change_year_prev"===c&&this._showYearSelector(-1):"change_month_next"===c?this._updateCal(1):"change_month_prev"===c&&this._updateCal(-1);else{var e=c.substr(13,4);Number(e)&&(this._year=e,"function"==typeof this._options.onYearSelected&&this._options.onYearSelected(this,{year:this._year}),this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._yearSelector.style.display="none",this._setActiveMonth(),this._monthSelector.style.display="block")}else{var f=c.substr(14,2);Number(f)&&(this._month=f-1,this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._year<this._yearMin||this._year===this._yearMin&&this._month<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year===this._yearMax&&this._month>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),this._updateCal(),this._monthContainer.style.display="block")}else{var g=c.substr(9,2);Number(g)?(this.setDate(this._year+"-"+(this._month+1)+"-"+g),this._containerObject.style.display="none"):"sapo_cal_link_month"===c?(this._monthContainer.style.display="none",this._yearSelector.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._setActiveMonth(),this._monthSelector.style.display="block"):"sapo_cal_link_year"===c&&(this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._showYearSelector(),this._yearSelector.style.display="block")}this._updateDescription()},this))},_setMinMax:function(a){var b;if(a){var c=a.split(":"),d=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;if(c[0]&&("NOW"===c[0]?(this._yearMin=this._today.getFullYear(),this._monthMin=this._today.getMonth()+1,this._dayMin=this._today.getDate()):d.test(c[0])?(b=c[0].split("-"),this._yearMin=Math.floor(b[0]),this._monthMin=Math.floor(b[1])||1,this._dayMin=Math.floor(b[2])||1,1<this._monthMin&&this._monthMin>12&&(this._monthMin=1,this._dayMin=1),1<this._dayMin&&this._dayMin>this._daysInMonth(this._yearMin,this._monthMin)&&(this._dayMin=1)):(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1)),c[1])if("NOW"===c[1])this._yearMax=this._today.getFullYear(),this._monthMax=this._today.getMonth()+1,this._dayMax=this._today.getDate();else if(d.test(c[1])){b=c[1].split("-"),this._yearMax=Math.floor(b[0]),this._monthMax=Math.floor(b[1])||12,this._dayMax=Math.floor(b[2])||this._daysInMonth(this._yearMax,this._monthMax),1<this._monthMax&&this._monthMax>12&&(this._monthMax=12,this._dayMax=31);var e=this._daysInMonth(this._yearMax,this._monthMax);1<this._dayMax&&this._dayMax>e&&(this._dayMax=e)}else this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31;this._yearMax>=this._yearMin&&(this._monthMax>this._monthMin||this._monthMax===this._monthMin&&this._dayMax>=this._dayMin)||(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31)}else this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31},_checkDateRange:function(a,b,c){return this._isValidDate(a,b+1,c)||(a=this._today.getFullYear(),b=this._today.getMonth(),c=this._today.getDate()),a>this._yearMax?(a=this._yearMax,b=this._monthMax-1,c=this._dayMax):a<this._yearMin&&(a=this._yearMin,b=this._monthMin-1,c=this._dayMin),a===this._yearMax&&b+1>this._monthMax?(b=this._monthMax-1,c=this._dayMax):a===this._yearMin&&b+1<this._monthMin&&(b=this._monthMin-1,c=this._dayMin),a===this._yearMax&&b+1===this._monthMax&&c>this._dayMax?c=this._dayMax:a===this._yearMin&&b+1===this._monthMin&&c<this._dayMin?c=this._dayMin:c>this._daysInMonth(a,b+1)&&(c=this._daysInMonth(a,b+1)),[a,b,c]},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._year<this._yearMin||this._year===this._yearMin&&this._month+1<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year===this._yearMax&&this._month+1>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),this._monthContainer.style.display="block"},_updateDate:function(){var a;this._options.displayInSelect?(a=[],this._isValidDate(a[0]=this._options.yearField[this._options.yearField.selectedIndex].value,a[1]=this._options.monthField[this._options.monthField.selectedIndex].value,a[2]=this._options.dayField[this._options.dayField.selectedIndex].value)?(a=this._checkDateRange(a[0],a[1]-1,a[2]),this._year=a[0],this._month=a[1],this._day=a[2]):(a=this._checkDateRange(a[0],a[1]-1,1),this._isValidDate(a[0],a[1]+1,a[2])&&(this._year=a[0],this._month=a[1],this._day=this._daysInMonth(a[0],a[1]),this.setDate()))):""!==this._dataField.value&&(this._isDate(this._options.format,this._dataField.value)?(a=this._getDataArrayParsed(this._dataField.value),a=this._checkDateRange(a[0],a[1]-1,a[2]),this._year=a[0],this._month=a[1],this._day=a[2]):(this._dataField.value="",this._year=this._data.getFullYear(),this._month=this._data.getMonth(),this._day=this._data.getDate()),this._data.setFullYear(this._year,this._month,this._day),this._dataField.value=this._writeDateInFormat()),this._updateDescription(),this._showMonth()},_updateDescription:function(){this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText.innerHTML=this._options.ofText,this._yearChanger.innerHTML=this._year},_showYearSelector:function(){if(arguments.length){var a=+this._year+10*arguments[0];if(a-=a%10,a>this._yearMax||a+9<this._yearMin)return;this._year=+this._year+10*arguments[0]}for(var b="<li>",c=this._year-this._year%10,d=0;11>=d;d++)0===d%4&&(b+="<ul>"),b+=d&&11!==d?c+d-1<=this._yearMax&&c+d-1>=this._yearMin?'<li><a href="#" class="sapo_calyear_'+(c+d-1)+(c+d-1===this._data.getFullYear()?" sapo_cal_on":"")+'">'+(c+d-1)+"</a></li>":'<li><a href="#" class="sapo_cal_off">'+(c+d-1)+"</a></li>":d&&c+d-1<=this._yearMax&&c+d-1>=this._yearMin?'<li><a href="#year_next" class="change_year_next">'+this._options.nextLinkText+"</a></li>":c+d-1<=this._yearMax&&c+d-1>=this._yearMin?'<li><a href="#year_prev" class="change_year_prev">'+this._options.prevLinkText+"</a></li>":"<li>&nbsp;</li>",0===(d+1)%4&&(b+="</ul>");b+="</li>",this._yearSelector.innerHTML=b},_getDataArrayParsed:function(a){var b=[],c=g.set(this._options.format,a);return c&&(b=[c.getFullYear(),c.getMonth()+1,c.getDate()]),b},_isValidDate:function(a,b,c){var d=/^\d{4}$/,e=/^\d{1,2}$/;return d.test(a)&&e.test(b)&&e.test(c)&&b>=1&&12>=b&&c>=1&&c<=this._daysInMonth(a,b)},_isDate:function(a,b){try{if("undefined"==typeof a)return!1;var c=g.set(a,b);if(c&&this._isValidDate(c.getFullYear(),c.getMonth()+1,c.getDate()))return!0}catch(d){}return!1},_writeDateInFormat:function(){return g.get(this._options.format,this._data)},setDate:function(a){if("string"==typeof a&&/\d{4}-\d{1,2}-\d{1,2}/.test(a)){var b=a.split("-");this._year=b[0],this._month=b[1]-1,this._day=b[2]}this._setDate()},_setDate:function(a){"undefined"!=typeof a&&a.className&&0===a.className.indexOf("sapo_cal_")&&(this._day=a.className.substr(9,2)),this._data.setFullYear.apply(this._data,this._checkDateRange(this._year,this._month,this._day)),this._options.displayInSelect?(this._options.dayField.value=this._data.getDate(),this._options.monthField.value=this._data.getMonth()+1,this._options.yearField.value=this._data.getFullYear()):this._dataField.value=this._writeDateInFormat(),this._options.onSetDate&&this._options.onSetDate(this,{date:this._data})},_updateCal:function(a){"function"==typeof this._options.onMonthSelected&&this._options.onMonthSelected(this,{year:this._year,month:this._month}),this._updateMonth(a),this._showMonth()},_daysInMonth:function(a,b){var c=31;switch(b){case 2:c=0===a%400||0===a%4&&0!==a%100?29:28;break;case 4:case 6:case 9:case 11:c=30}return c},_updateMonth:function(a){"undefined"==typeof a&&(a="0");var b=this._month+1,c=this._year;switch(a){case-1:if(1===b){if(c===this._yearMin)return;b=12,c--}else b--;this._year=c,this._month=b-1;break;case 1:if(12===b){if(c===this._yearMax)return;b=1,c++}else b++;this._year=c,this._month=b-1}},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_showMonth:function(){var a,b,c=this._month+1,d=this._year,e=this._daysInMonth(d,c),f=new Date(d,c-1,1).getDay(),g=this._options.startWeekDay||0;this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",d<this._yearMin||d===this._yearMin&&c<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(d>this._yearMax||d===this._yearMax&&c>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),g&&Number(g)&&(g>f?f=7+g-f:f+=g);var h="";for(h+='<ul class="sapo_cal_header">',a=0;7>a;a++)h+="<li>"+this._options.wDay[a+(g+a>6?g-7:g)].substring(0,1)+"</li>";h+="</ul>";var i=0;if(h+="<ul>",f)for(b=g;f-g>b;b++)i||(h+="<ul>"),h+='<li class="sapo_cal_empty">&nbsp;</li>',i++;for(a=1;e>=a;a++){7===i&&(i=0,h+="<ul>");var j="sapo_cal_"+(2===String(a).length?a:"0"+a);j+=d===this._yearMin&&c===this._monthMin&&a<this._dayMin||d===this._yearMax&&c===this._monthMax&&a>this._dayMax||d===this._yearMin&&c<this._monthMin||d===this._yearMax&&c>this._monthMax||d<this._yearMin||d>this._yearMax||this._options.validDayFn&&!this._options.validDayFn.call(this,new Date(d,c-1,a))?" sapo_cal_off":this._data.getFullYear()===d&&this._data.getMonth()===c-1&&a===this._day?" sapo_cal_on":"",h+='<li><a href="#" class="'+j+'">'+a+"</a></li>",i++,7===i&&(h+="</ul>")}if(7!==i){for(a=i;7>a;a++)h+='<li class="sapo_cal_empty">&nbsp;</li>';h+="</ul>"}h+="</ul>",this._monthContainer.innerHTML=h},_setActiveMonth:function(a){"undefined"==typeof a&&(a=this._monthSelector);var b=a.childNodes.length;if(a.className&&a.className.match(/sapo_calmonth_/)){var d=this._year,e=a.className.substr(14,2);d===this._data.getFullYear()&&e===this._data.getMonth()+1?(c.addClassName(a,"sapo_cal_on"),c.removeClassName(a,"sapo_cal_off")):(c.removeClassName(a,"sapo_cal_on"),d===this._yearMin&&e<this._monthMin||d===this._yearMax&&e>this._monthMax||d<this._yearMin||d>this._yearMax?c.addClassName(a,"sapo_cal_off"):c.removeClassName(a,"sapo_cal_off"))}else if(0!==b)for(var f=0;b>f;f++)this._setActiveMonth(a.childNodes[f])},lang:function(a){this._lang=a},showMonth:function(){this._showMonth()},isMonthRendered:function(){var a=e.select(".sapo_cal_header",this._containerObject)[0];return"none"!==c.getStyle(a.parentNode,"display")&&"none"!==c.getStyle(a.parentNode.parentNode,"display")}},h}),Ink.createModule("Ink.UI.Draggable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1","Ink.UI.Aux_1"],function(a,b,c,d,e,f){function g(a,b,c){return a=Math.min(a,c),a=Math.max(a,b)}var h=0,i=1,j=function(a,b){this.init(a,b)};return j.prototype={init:function(c,e){var g=Ink.extendObj({constraint:!1,constraintElm:!1,top:!1,right:!1,bottom:!1,left:!1,handle:e.handler||!1,revert:!1,cursor:"move",zindex:e.zindex||9999,dragClass:"drag",onStart:!1,onEnd:!1,onDrag:!1,onChange:!1,droppableProxy:!1,mouseAnchor:void 0,skipChildren:!0,fps:100,debug:!1},e||{},a.data(c));this.options=g,this.element=f.elOrSelector(c),this.constraintElm=g.constraintElm&&f.elOrSelector(g.constraintElm),this.handle=!1,this.elmStartPosition=!1,this.active=!1,this.dragged=!1,this.prevCoords=!1,this.placeholder=!1,this.position=!1,this.zindex=!1,this.firstDrag=!0,g.fps&&(this.deltaMs=1e3/g.fps,this.lastRunAt=0),this.handlers={},this.handlers.start=Ink.bindEvent(this._onStart,this),this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade,this),this.handlers.drag=Ink.bindEvent(this._onDrag,this),this.handlers.end=Ink.bindEvent(this._onEnd,this),this.handlers.selectStart=function(a){return b.stop(a),!1},this.handle=this.options.handle?f.elOrSelector(this.options.handle):this.element,this.handle.style.cursor=g.cursor,b.observe(this.handle,"touchstart",this.handlers.start),b.observe(this.handle,"mousedown",this.handlers.start),d.IE&&b.observe(this.element,"selectstart",this.handlers.selectStart)},destroy:function(){b.stopObserving(this.handle,"touchstart",this.handlers.start),b.stopObserving(this.handle,"mousedown",this.handlers.start),d.IE&&b.stopObserving(this.element,"selectstart",this.handlers.selectStart)},_getCoords:function(b){var c=[a.scrollWidth(),a.scrollHeight()];return{x:(b.touches?b.touches[0].clientX:b.clientX)+c[h],y:(b.touches?b.touches[0].clientY:b.clientY)+c[i]}},_cloneStyle:function(b,d){d.className=b.className,d.style.borderWidth="0",d.style.padding="0",d.style.position="absolute",d.style.width=a.elementWidth(b)+"px",d.style.height=a.elementHeight(b)+"px",d.style.left=a.elementLeft(b)+"px",d.style.top=a.elementTop(b)+"px",d.style.cssFloat=c.getStyle(b,"float"),d.style.display=c.getStyle(b,"display")},_onStart:function(d){if(!this.active&&b.isLeftClick(d)||"undefined"==typeof d.button){var e=b.element(d);if(this.options.skipChildren&&e!==this.handle)return;b.stop(d),c.addClassName(this.element,this.options.dragClass),this.elmStartPosition=[a.elementLeft(this.element),a.elementTop(this.element)];var f=[parseInt(c.getStyle(this.element,"left"),10),parseInt(c.getStyle(this.element,"top"),10)],g=a.elementDimensions(this.element);this.originalPosition=[f[h]?f[h]:null,f[i]?f[i]:null],this.delta=this._getCoords(d),this.active=!0,this.position=c.getStyle(this.element,"position"),this.zindex=c.getStyle(this.element,"zIndex");var j=document.createElement("div");if(j.style.position=this.position,j.style.width=g[h]+"px",j.style.height=g[i]+"px",j.style.marginTop=c.getStyle(this.element,"margin-top"),j.style.marginBottom=c.getStyle(this.element,"margin-bottom"),j.style.marginLeft=c.getStyle(this.element,"margin-left"),j.style.marginRight=c.getStyle(this.element,"margin-right"),j.style.borderWidth="0",j.style.padding="0",j.style.cssFloat=c.getStyle(this.element,"float"),j.style.display=c.getStyle(this.element,"display"),j.style.visibility="hidden",this.delta2=[this.delta.x-this.elmStartPosition[h],this.delta.y-this.elmStartPosition[i]],this.options.mouseAnchor){var k=this.options.mouseAnchor.split(" "),l=[g[h],g[i]];"left"===k[0]?l[h]=0:"center"===k[0]&&(l[h]=parseInt(l[h]/2,10)),"top"===k[1]?l[i]=0:"center"===k[1]&&(l[i]=parseInt(l[i]/2,10)),this.applyDelta=[this.delta2[h]-l[h],this.delta2[i]-l[i]]}var m=this.options.fps?"dragFacade":"drag";if(this.placeholder=j,this.options.onStart&&this.options.onStart(this.element,d),this.options.droppableProxy){this.proxy=document.createElement("div"),g=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight];var n=this.proxy.style;n.width=g[h]+"px",n.height=g[i]+"px",n.position="fixed",n.left="0",n.top="0",n.zIndex=this.options.zindex+1,n.backgroundColor="#FF0000",c.setOpacity(this.proxy,0);for(var o=document.body.firstChild;o&&1!==o.nodeType;)o=o.nextSibling;document.body.insertBefore(this.proxy,o),b.observe(this.proxy,"mousemove",this.handlers[m]),b.observe(this.proxy,"touchmove",this.handlers[m])}else b.observe(document,"mousemove",this.handlers[m]);return this.element.style.position="absolute",this.element.style.zIndex=this.options.zindex,this.element.parentNode.insertBefore(this.placeholder,this.element),this._onDrag(d),b.observe(document,"mouseup",this.handlers.end),b.observe(document,"touchend",this.handlers.end),!1}},_onDragFacade:function(a){var b=+new Date;(!this.lastRunAt||b>this.lastRunAt+this.deltaMs)&&(this.lastRunAt=b,this._onDrag(a))},_onDrag:function(c){if(this.active){b.stop(c),this.dragged=!0;var d=this._getCoords(c),e=d.x,f=d.y,j=this.options,k=!1,l=!1;if(this.prevCoords&&e!==this.prevCoords.x||f!==this.prevCoords.y){j.onDrag&&j.onDrag(this.element,c),this.prevCoords=d,k=this.elmStartPosition[h]+e-this.delta.x,l=this.elmStartPosition[i]+f-this.delta.y;var m=a.elementDimensions(this.element);if(this.constraintElm){var n=a.offset(this.constraintElm),o=a.elementDimensions(this.constraintElm),p=n[i]+(j.top||0),q=n[i]+o[i]-(j.bottom||0),r=n[h]+(j.left||0),s=n[h]+o[h]-(j.right||0);l=g(l,p,q-m[i]),k=g(k,r,s-m[h])}else if(j.constraint){var t=j.right===!1?a.pageWidth()-m[h]:j.right,u=j.left===!1?0:j.left,v=j.top===!1?0:j.top,w=j.bottom===!1?a.pageHeight()-m[i]:j.bottom;("horizontal"===j.constraint||"both"===j.constraint)&&(k=g(k,u,t)),("vertical"===j.constraint||"both"===j.constraint)&&(l=g(l,v,w))}var x=Ink.getModule("Ink.UI.Droppable_1");if(this.firstDrag&&(x&&x.updateAll(),this.firstDrag=!1),k&&(this.element.style.left=k+"px"),l&&(this.element.style.top=l+"px"),x){var y=this.options.mouseAnchor?{x:e-this.applyDelta[h],y:f-this.applyDelta[i]}:d;x.action(y,"drag",c,this.element)}j.onChange&&j.onChange(this)}}},_onEnd:function(d){if(b.stopObserving(document,"mousemove",this.handlers.drag),b.stopObserving(document,"touchmove",this.handlers.drag),this.options.fps&&this._onDrag(d),c.removeClassName(this.element,this.options.dragClass),this.active&&this.dragged){this.options.droppableProxy&&document.body.removeChild(this.proxy),this.pt&&(a.remove(this.pt),this.pt=void 0),this.placeholder&&a.remove(this.placeholder),this.options.revert&&(this.element.style.position=this.position,this.element.style.zIndex=null!==this.zindex?this.zindex:"auto",this.element.style.left=this.originalPosition[h]?this.originalPosition[h]+"px":"",this.element.style.top=this.originalPosition[i]?this.originalPosition[i]+"px":""),this.options.onEnd&&this.options.onEnd(this.element,d);var e=Ink.getModule("Ink.UI.Droppable_1");e&&e.action(this._getCoords(d),"drop",d,this.element),this.position=!1,this.zindex=!1,this.firstDrag=!0}this.active=!1,this.dragged=!1}},j}),Ink.createModule("Ink.UI.Droppable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.UI.Aux_1","Ink.Util.Array_1","Ink.Dom.Selector_1"],function(a,b,c,d,e,f){var g=function(a){return function(b){return c.addClassName(a,b)}},h=function(a){return function(b){return c.removeClassName(a,b)}},i={debug:!1,_droppables:[],_draggables:[],add:function(b,c){function e(a){a.style.position="inherit"}b=d.elOrSelector(b,"Droppable.add target element");var f=Ink.extendObj({hoverClass:c.hoverclass||!1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},c||{},a.data(b));"string"==typeof f.hoverClass&&(f.hoverClass=f.hoverClass.split(/\s+/));var g=this,h={move:function(a,b,c){e(a),b.appendChild(a)},copy:function(a,b,c){e(a),b.appendChild(a.cloneNode)},revert:function(a,b,c){g._findDraggable(a).originalParent.appendChild(a),e(a)}},i;if("string"==typeof f.onHover&&(i=f.onHover,f.onHover=h[i],void 0===f.onHover))throw new Error("Unknown hover event handler: "+i);if("string"==typeof f.onDrop&&(i=f.onDrop,f.onDrop=h[i],void 0===f.onDrop))throw new Error("Unknown drop event handler: "+i);if("string"==typeof f.onDropOut&&(i=f.onDropOut,f.onDropOut=h[i],void 0===f.onDropOut))throw new Error("Unknown dropOut event handler: "+i);var j={element:b,data:{},options:f};this._droppables.push(j),this._update(j)},_findData:function(a){for(var b=this._droppables,c=0,d=b.length;d>c;c++)if(b[c].element===a)return b[c]},_findDraggable:function(a){for(var b=this._draggables,c=0,d=b.length;d>c;c++)if(b[c].element===a)return b[c]},updateAll:function(){e.each(this._droppables,i._update)},update:function(a){this._update(this._findData(a))},_update:function(b){var c=b.data,d=b.element;c.left=a.offsetLeft(d),c.top=a.offsetTop(d),c.right=c.left+a.elementWidth(d),c.bottom=c.top+a.elementHeight(d)},remove:function(a){a=d.elOrSelector(a);for(var b=this._droppables.length,c=0;b>c;c++)if(this._droppables[c].element===a){this._droppables.splice(c,1);break}return b!==this._droppables.length},action:function(a,b,c,d){e.each(this._droppables,Ink.bind(function(i){var j=i.data,k=i.options,l=i.element;(!k.accept||f.matches(k.accept,[d]).length)&&("drag"!==b||this._findDraggable(d)||this._draggables.push({element:d,originalParent:d.parentNode}),a.x>=j.left&&a.x<=j.right&&a.y>=j.top&&a.y<=j.bottom?"drag"===b?(k.hoverClass&&e.each(k.hoverClass,g(l)),k.onHover&&k.onHover(d,l)):"drop"===b&&(k.hoverClass&&e.each(k.hoverClass,h(l)),k.onDrop&&k.onDrop(d,l,c)):"drag"===b&&k.hoverClass?e.each(k.hoverClass,h(l)):"drop"===b&&k.onDropOut&&k.onDropOut(d,l,c))},this))}};return i}),Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Css_1","Ink.Util.Validator_1"],function(a,b){"use strict";var c={version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(a,b){if(this._free(),b=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},b||{}),"string"==typeof a&&(a=document.getElementById(a)),null===a)return!1;this.element=a,("undefined"==typeof this.element.id||null===this.element.id||""===this.element.id)&&(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random())),this.custom=b.customFlag,this.confirmGroup=b.confirmGroup;var c=this._validateElements();return c.length>0?(b.onError?b.onError(c):this._showError(a,c),!1):(b.onError||this._clearError(a),this._clearCache(),b.onSuccess&&b.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){this.elements[this.element.id]=[],this.confirmElms[this.element.id]=[];for(var b=this.element.elements,c=!1,d=0,e=b.length;e>d;d++)if(c=b[d],null!==c.getAttribute("type")&&"radio"===c.getAttribute("type").toLowerCase()){if(0===this.elements[this.element.id].length||c.getAttribute("type")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("type")&&c.getAttribute("name")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("name"))for(var f in this._flagMap)if(a.hasClassName(c,f)){this.elements[this.element.id].push(c);break}}else{for(var g in this._flagMap)if(a.hasClassName(c,g)&&"ink-fv-confirm"!==g){this.elements[this.element.id].push(c);break}a.hasClassName(c,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(c),this.hasConfirm[this.element.id]=!0)}},_validateElements:function(){var b;this._getElements(),"undefined"!=typeof this.hasConfirm[this.element.id]&&this.hasConfirm[this.element.id]===!0&&(b=this._makeConfirmGroups());for(var c=[],d=!1,e=!1,f,g=0,h=this.elements[this.element.id].length;h>g;g++)if(f=!1,d=this.elements[this.element.id][g],!d.disabled)for(var i in this._flagMap)a.hasClassName(d,i)&&("ink-fv-custom"!==i&&"ink-fv-confirm"!==i?this._isValid(d,i)||(f?c[c.length-1].errors.push(i):(c.push({elm:d,errors:[i]}),f=!0)):"ink-fv-confirm"!==i&&(e=this._isCustomValid(d),e.length>0&&c.push({elm:d,errors:[i],custom:e})));return c=this._validateConfirmGroups(b,c)},_validateConfirmGroups:function(a,b){var c=!1;for(var d in a)a.hasOwnProperty(d)&&(c=a[d],2===c.length&&c[0].value!==c[1].value&&b.push({elm:c[1],errors:["ink-fv-confirm"]}));return b},_makeConfirmGroups:function(){var b;if(this.confirmGroup&&this.confirmGroup.length>0){b={};for(var c=!1,d=!1,e=0,f=this.confirmElms[this.element.id].length;f>e;e++){c=this.confirmElms[this.element.id][e];for(var g=0,h=this.confirmGroup.length;h>g;g++)d=this.confirmGroup[g],a.hasClassName(c,d)&&("undefined"==typeof b[d]?b[d]=[c]:b[d].push(c))}return b}return 2===this.confirmElms[this.element.id].length&&(b={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),b;return!1},_isCustomValid:function(b){for(var c=[],d=!1,e=0,f=this.custom.length;f>e;e++)d=this.custom[e],a.hasClassName(b,d.flag)&&(d.callback(b,d.msg)||c.push({flag:d.flag,msg:d.msg}));return c},_isValid:function(c,d){switch(d){case"ink-fv-required":if("select"===c.nodeName.toLowerCase())return c.selectedIndex>0?!0:!1;if("checkbox"!==c.getAttribute("type")&&"radio"!==c.getAttribute("type")){if(""!==this._trim(c.value))return!0}else if("checkbox"===c.getAttribute("type")){if(c.checked===!0)return!0}else if("radio"===c.getAttribute("type")){var e=c.form[c.name];"undefined"==typeof e.length&&(e=[e]);for(var f=!1,g=0,h=e.length;h>g;g++)e[g].checked===!0&&(f=!0);return f}break;case"ink-fv-email":if(""===this._trim(c.value))return a.hasClassName(c,"ink-fv-required")?!1:!0;if(b.mail(c.value))return!0;break;case"ink-fv-url":if(""===this._trim(c.value))return a.hasClassName(c,"ink-fv-required")?!1:!0;if(b.url(c.value))return!0;break;case"ink-fv-number":if(""===this._trim(c.value))return a.hasClassName(c,"ink-fv-required")?!1:!0;if(!isNaN(Number(c.value)))return!0;break;case"ink-fv-phone_pt":if(""===this._trim(c.value))return a.hasClassName(c,"ink-fv-required")?!1:!0;if(b.isPTPhone(c.value))return!0;break;case"ink-fv-phone_cv":if(""===this._trim(c.value))return a.hasClassName(c,"ink-fv-required")?!1:!0;if(b.isCVPhone(c.value))return!0;break;case"ink-fv-phone_ao":if(""===this._trim(c.value))return a.hasClassName(c,"ink-fv-required")?!1:!0;if(b.isAOPhone(c.value))return!0;break;case"ink-fv-phone_mz":if(""===this._trim(c.value))return a.hasClassName(c,"ink-fv-required")?!1:!0;if(b.isMZPhone(c.value))return!0;break;case"ink-fv-date":if(""===this._trim(c.value))return a.hasClassName(c,"ink-fv-required")?!1:!0;var i=Ink.getModule("Ink.Dom.Element",1),j=i.data(c),k="yyyy-mm-dd";if(a.hasClassName(c,"ink-datepicker")&&"format"in j?k=j.format:"validFormat"in j&&(k=j.validFormat),!(k in b._dateParsers)){var l=[];for(var m in b._dateParsers)b._dateParsers.hasOwnProperty(m)&&l.push(m);throw"The attribute data-valid-format must be one of the following values: "+l.join(",")}return b.isDate(k,c.value);break;case"ink-fv-custom":}return!1},_showError:function(b,c){this._clearError(b);for(var d=!1,e=0,f=c.length;f>e;e++)if(d=c[e].elm,"radio"!==d.getAttribute("type")){var g=document.createElement("p");a.addClassName(g,this._errorClassName),a.addClassName(g,this._errorTypeErrorClassName),g.innerHTML="ink-fv-custom"!==c[e].errors[0]?this._flagMap[c[e].errors[0]].msg:c[e].custom[0].msg,"checkbox"!==d.getAttribute("type")&&(d.nextSibling.parentNode.insertBefore(g,d.nextSibling),a.hasClassName(d.parentNode,"control")&&(a.addClassName(d.parentNode.parentNode,"validation"),"ink-fv-required"===c[e].errors[0]?a.addClassName(d.parentNode.parentNode,"error"):a.addClassName(d.parentNode.parentNode,"warning")))}else a.hasClassName(d.parentNode.parentNode,"control-group")&&(a.addClassName(d.parentNode.parentNode,"validation"),a.addClassName(d.parentNode.parentNode,"error"))},_clearError:function(b){for(var c=b.getElementsByTagName("p"),d=!1,e=c.length-1;e>=0;e--)d=c[e],a.hasClassName(d,this._errorClassName)&&(a.hasClassName(d.parentNode,"control")&&(a.removeClassName(d.parentNode.parentNode,"validation"),a.removeClassName(d.parentNode.parentNode,"error"),a.removeClassName(d.parentNode.parentNode,"warning")),a.hasClassName(d,"tip")&&a.hasClassName(d,"error")&&d.parentNode.removeChild(d));var f=b.getElementsByTagName("ul");for(e=f.length-1;e>=0;e--)d=f[e],a.hasClassName(d,"control-group")&&(a.removeClassName(d,"validation"),a.removeClassName(d,"error"))},_trim:function(a){return"string"==typeof a?a.replace(/^\s+|\s+$|\n+$/g,""):void 0}};return c}),Ink.createModule("Ink.UI.FormValidator","2",["Ink.UI.Aux_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.Util.I18n_1","Ink.Util.Validator_1"],function(a,b,c,d,e,f,g,h){"use strict";var i={required:function(a){return"undefined"!=typeof a&&!/^\s*$/.test(a)},min_length:function(a,b){return"string"==typeof a&&a.length>=parseInt(b,10)},max_length:function(a,b){return"string"==typeof a&&a.length<=parseInt(b,10)},exact_length:function(a,b){return"string"==typeof a&&a.length===parseInt(b,10)},email:function(a){return"string"==typeof a&&h.mail(a)},url:function(a,b){return b=b||!1,"string"==typeof a&&h.url(a,b)},ip:function(a,b){return"string"!=typeof a?!1:h.isIP(a,b)},phone:function(a,b){if("string"!=typeof a)return!1;var c=b?b.toUpperCase():"";return h["is"+c+"Phone"](a)},credit_card:function(a,b){return"string"!=typeof a?!1:h.isCreditCard(a,b||"default")},date:function(a,b){return"string"==typeof a&&h.isDate(b,a)},alpha:function(a,b){return h.ascii(a,{singleLineWhitespace:b})},text:function(a,b,c){return h.unicode(a,{singleLineWhitespace:b,unicodePunctuation:c})},latin:function(a,b,c){return"string"!=typeof a?!1:h.latin1(a,{latin1Punctuation:b,singleLineWhitespace:c})},alpha_numeric:function(a){return h.ascii(a,{numbers:!0})},alpha_dash:function(a){return h.ascii(a,{dash:!0,underscore:!0})},digit:function(a){return"string"==typeof a&&/^[0-9]{1}$/.test(a)},integer:function(a,b){return h.number(a,{negative:!b,decimalPlaces:0})},decimal:function(a,b,c,d){return h.number(a,{decimalSep:b||".",decimalPlaces:+c||null,maxDigits:+d})},numeric:function(a,b,c,d){return b=b||".",-1!==a.indexOf(b)?i.decimal(a,b,c,d):i.integer(a)},range:function(a,b,c,d){return a=+a,b=+b,c=+c,isNaN(a)||isNaN(b)||isNaN(c)?!1:b>a||a>c?!1:d?0===(a-b)%d:!0},color:function(a){return h.isColor(a)},matches:function(a,b){return a===this.getFormElements()[b][0].getValue()}},j=new g({en_US:{"formvalidator.required":"The {field} filling is mandatory","formvalidator.min_length":"The {field} must have a minimum size of {param1} characters","formvalidator.max_length":"The {field} must have a maximum size of {param1} characters","formvalidator.exact_length":"The {field} must have an exact size of {param1} characters","formvalidator.email":"The {field} must have a valid e-mail address","formvalidator.url":"The {field} must have a valid URL","formvalidator.ip":"The {field} does not contain a valid {param1} IP address","formvalidator.phone":"The {field} does not contain a valid {param1} phone number","formvalidator.credit_card":"The {field} does not contain a valid {param1} credit card","formvalidator.date":"The {field} should contain a date in the {param1} format","formvalidator.alpha":"The {field} should only contain letters","formvalidator.text":"The {field} should only contain alphabetic characters","formvalidator.latin":"The {field} should only contain alphabetic characters","formvalidator.alpha_numeric":"The {field} should only contain letters or numbers","formvalidator.alpha_dashes":"The {field} should only contain letters or dashes","formvalidator.digit":"The {field} should only contain a digit","formvalidator.integer":"The {field} should only contain an integer","formvalidator.decimal":"The {field} should contain a valid decimal number","formvalidator.numeric":"The {field} should contain a number","formvalidator.range":"The {field} should contain a number between {param1} and {param2}","formvalidator.color":"The {field} should contain a valid color","formvalidator.matches":"The {field} should match the field {param1}","formvalidator.validation_function_not_found":"The rule {rule} has not been defined"},pt_PT:{"formvalidator.required":"Preencher {field} é obrigatório","formvalidator.min_length":"{field} deve ter no mínimo {param1} caracteres","formvalidator.max_length":"{field} tem um tamanho máximo de {param1} caracteres","formvalidator.exact_length":"{field} devia ter exactamente {param1} caracteres","formvalidator.email":"{field} deve ser um e-mail válido","formvalidator.url":"O {field} deve ser um URL válido","formvalidator.ip":"{field} não tem um endereço IP {param1} válido","formvalidator.phone":"{field} deve ser preenchido com um número de telefone {param1} válido.","formvalidator.credit_card":"{field} não tem um cartão de crédito {param1} válido","formvalidator.date":"{field} deve conter uma data no formato {param1}","formvalidator.alpha":"O campo {field} deve conter apenas caracteres alfabéticos","formvalidator.text":"O campo {field} deve conter apenas caracteres alfabéticos","formvalidator.latin":"O campo {field} deve conter apenas caracteres alfabéticos","formvalidator.alpha_numeric":"{field} deve conter apenas letras e números","formvalidator.alpha_dashes":"{field} deve conter apenas letras e traços","formvalidator.digit":"{field} destina-se a ser preenchido com apenas um dígito","formvalidator.integer":"{field} deve conter um número inteiro","formvalidator.decimal":"{field} deve conter um número válido","formvalidator.numeric":"{field} deve conter um número válido","formvalidator.range":"{field} deve conter um número entre {param1} e {param2}","formvalidator.color":"{field} deve conter uma cor válida","formvalidator.matches":"{field} deve corresponder ao campo {param1}","formvalidator.validation_function_not_found":"[A regra {rule} não foi definida]"}},"en_US"),k=function(c,d){this._element=a.elOrSelector(c,"Invalid FormElement"),this._errors={},this._rules={},this._value=null,this._options=Ink.extendObj({label:this._getLabel()},b.data(this._element)),this._options=Ink.extendObj(this._options,d||{})
};k.prototype={_getLabel:function(){var a=b.findUpwardsByClass(this._element,"control-group"),c=Ink.s("label",a);return c=c?b.textContent(c):this._element.name||this._element.id||""},_parseRules:function(a){this._rules={},a=a.split("|");var b,c=a.length,d,e,f;if(c>0)for(b=0;c>b;b++)if(d=a[b])if(-1!==(f=d.indexOf("["))){e=d.substr(f+1),e=e.split("]"),e=e[0],e=e.split(",");for(var g=0,h=e.length;h>g;g++)e[g]="true"===e[g]?!0:"false"===e[g]?!1:e[g];e.splice(0,0,this.getValue()),d=d.substr(0,f),this._rules[d]=e}else this._rules[d]=[this.getValue()]},_addError:function(a){for(var b=this._rules[a]||[],c={field:this._options.label,value:this.getValue()},d=1;d<b.length;d++)c["param"+d]=b[d];var e="formvalidator."+a;this._errors[a]=j.text(e,c),this._errors[a]===e&&(this._errors[a]="Validation message not found")},getValue:function(){switch(this._element.nodeName.toLowerCase()){case"select":return Ink.s("option:selected",this._element).value;case"textarea":return this._element.innerHTML;case"input":if(!("type"in this._element))return this._element.value;if("radio"===this._element.type&&"checkbox"===this._element.type){if(this._element.checked)return this._element.value}else if("file"!==this._element.type)return this._element.value;return;default:return this._element.innerHTML}},getErrors:function(){return this._errors},getElement:function(){return this._element},getFormElements:function(){return this._options.form._formElements},validate:function(){if(this._errors={},0||this._parseRules(this._options.rules),"required"in this._rules||""!==this.getValue())for(var a in this._rules)if(this._rules.hasOwnProperty(a)){if("function"!=typeof i[a])return this._addError(null),!1;if(i[a].apply(this,this._rules[a])===!1)return this._addError(a),!1}return!0}};var l=function(d,e){this._rootElement=a.elOrSelector(d),this._formElements={},this._errorMessages=[],this._markedErrorElements=[],this._options=Ink.extendObj({eventTrigger:"submit",searchFor:"input, select, textarea, .control-group",beforeValidation:void 0,onError:void 0,onSuccess:void 0},b.data(this._rootElement)),this._options=Ink.extendObj(this._options,e||{}),"string"==typeof this._options.eventTrigger&&c.observe(this._rootElement,this._options.eventTrigger,Ink.bindEvent(this.validate,this)),this._init()};return l.setRule=function(a,b,c){if(i[a]=c,j.getKey("formvalidator."+a)!==b){var d={};d["formvalidator."+a]=b;var e={};e[j.lang()]=d,j.append(e)}},l.getI18n=function(){return j},l.setI18n=function(a){j=a},l.appendI18n=function(){j.append.apply(j,[].slice.call(arguments))},l.setLanguage=function(a){j.lang(a)},l.getRules=function(){return i},l.prototype={_init:function(){},getElements:function(){this._formElements={};var a=d.select(this._options.searchFor,this._rootElement);if(a.length){var c,e;for(c=0;c<a.length;c+=1){e=a[c];var f=b.data(e);if("rules"in f){var g={form:this},h;"name"in e&&e.name?h=e.name:"id"in e&&e.id?h=e.id:(h="element_"+Math.floor(100*Math.random()),e.id=h),h in this._formElements?this._formElements[h].push(new k(e,g)):this._formElements[h]=[new k(e,g)]}}}return this._formElements},validate:function(a){c.stop(a),"function"==typeof this._options.beforeValidation&&this._options.beforeValidation(),this.getElements();var d=[];for(var g in this._formElements)if(this._formElements.hasOwnProperty(g))for(var h=0;h<this._formElements[g].length;h+=1)this._formElements[g][h].validate()||d.push(this._formElements[g][h]);return 0===d.length?("function"==typeof this._options.onSuccess&&this._options.onSuccess(),!0):("function"==typeof this._options.onError&&this._options.onError(d),f.each(this._markedErrorElements,Ink.bind(e.removeClassName,e,"validation")),f.each(this._markedErrorElements,Ink.bind(e.removeClassName,e,"error")),f.each(this._errorMessages,b.remove),this._errorMessages=[],this._markedErrorElements=[],f.each(d,Ink.bind(function(a){var c,d;e.hasClassName(a.getElement(),"control-group")?(c=a.getElement(),d=Ink.s(".control",a.getElement())):(c=b.findUpwardsByClass(a.getElement(),"control-group"),d=b.findUpwardsByClass(a.getElement(),"control")),d&&c||(d=c=a.getElement()),e.addClassName(c,"validation"),e.addClassName(c,"error"),this._markedErrorElements.push(c);var f=document.createElement("p");e.addClassName(f,"tip"),b.insertAfter(f,d);var g=a.getErrors(),h=[];for(var i in g)g.hasOwnProperty(i)&&h.push(g[i]);f.innerHTML=h.join("<br/>"),this._errorMessages.push(f)},this)),!1)}},l}),Ink.createModule("Ink.UI.ImageQuery","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(a,b,c,d,e,f){"use strict";var g=function(b,c){if(!a.isDOMElement(b)&&"string"!=typeof b)throw"[ImageQuery] :: Invalid selector";if("string"==typeof b){if(this._element=e.select(b),this._element.length<1)throw"[ImageQuery] :: Selector has returned no elements";if(this._element.length>1){var f;for(f=1;f<this._element.length;f+=1)new Ink.UI.ImageQuery(this._element[f],c)}this._element=this._element[0]}else this._element=b;this._options=Ink.extendObj({queries:[],onLoad:null},d.data(this._element)),this._options=Ink.extendObj(this._options,c||{});var g;if(-1!==(g=this._element.src.lastIndexOf("?"))){var h=this._element.src.substr(g);this._filename=this._element.src.replace(h,"").split("/").pop()+h}else this._filename=this._element.src.split("/").pop();this._init()};return g.prototype={_init:function(){this._options.queries=f.sortMulti(this._options.queries,"width").reverse(),this._handlers={resize:Ink.bindEvent(this._onResize,this),load:Ink.bindEvent(this._onLoad,this)},"function"==typeof this._options.onLoad&&b.observe(this._element,"onload",this._handlers.load),b.observe(window,"resize",this._handlers.resize),this._handlers.resize.call(this)},_onResize:function(){clearTimeout(a);var a=setTimeout(Ink.bind(function(){if(!this._options.queries||this._options.queries==={})return clearTimeout(a),void 0;var b,c,d;for("number"==typeof window.innerWidth?d=window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?d=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(d=document.body.clientWidth),b=0;b<this._options.queries.length;b+=1)if(this._options.queries[b].width<=d){c=b;break}"undefined"==typeof c&&(c=this._options.queries.length-1);var e=this._options.queries[c].src||this._options.src;if("devicePixelRatio"in window&&window.devicePixelRatio>1&&"retina"in this._options&&(e=this._options.queries[c].retina||this._options.retina),this._options.queries[c].file=this._filename,"function"==typeof e&&(e=e.apply(this,[this._element,this._options.queries[c]]),"string"!=typeof e))throw'[ImageQuery] :: "src" callback does not return a string';var f;for(f in this._options.queries[c])if(this._options.queries[c].hasOwnProperty(f)){if("src"===f||"retina"===f)continue;e=e.replace("{:"+f+"}",this._options.queries[c][f])}this._element.src=e,delete this._options.queries[c].file,a=void 0},this),300)},_onLoad:function(){this._options.onLoad.call(this)}},g}),Ink.createModule("Ink.UI.Modal","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(a,b,c,d,e,f){"use strict";var g=function(a,g){if("string"!=typeof a&&"object"!=typeof a&&"undefined"==typeof g.markup)throw"Invalid Modal selector";if("string"==typeof a){if(""!==a){if(this._element=e.select(a),0===this._element.length)throw"The Modal selector has not returned any elements";this._element=this._element[0]}}else a&&(this._element=a);if(this._options={width:void 0,height:void 0,shadeClass:void 0,modalClass:void 0,trigger:void 0,triggerEvent:"click",autoDisplay:!0,markup:void 0,onShow:void 0,onDismiss:void 0,closeOnClick:!1,responsive:!0,disableScroll:!0},this._handlers={click:Ink.bindEvent(this._onClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:Ink.bindEvent(this._onResize,this)},this._wasDismissed=!1,this._markupMode=this._element?c.hasClassName(this._element,"ink-modal"):!1,this._markupMode){if(this._modalDiv=this._element,this._modalDivStyle=this._modalDiv.style,this._modalShadow=this._modalDiv.parentNode,this._modalShadowStyle=this._modalShadow.style,this._contentContainer=e.select(".modal-body",this._modalDiv),!this._contentContainer.length)throw'Missing div with class "modal-body"';this._contentContainer=this._contentContainer[0],this._options.markup=this._contentContainer.innerHTML,this._options=Ink.extendObj(this._options,d.data(this._element))}else this._modalShadow=document.createElement("div"),this._modalShadowStyle=this._modalShadow.style,this._modalDiv=document.createElement("div"),this._modalDivStyle=this._modalDiv.style,this._element&&(this._options.markup=this._element.innerHTML),c.addClassName(this._modalShadow,"ink-shade"),c.addClassName(this._modalDiv,"ink-modal"),c.addClassName(this._modalDiv,"ink-space"),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);if(this._options=Ink.extendObj(this._options,g||{}),this._markupMode||this.setContentMarkup(this._options.markup),"string"==typeof this._options.shadeClass&&f.each(this._options.shadeClass.split(" "),Ink.bind(function(a){c.addClassName(this._modalShadow,a.trim())},this)),"string"==typeof this._options.modalClass&&f.each(this._options.modalClass.split(" "),Ink.bind(function(a){c.addClassName(this._modalDiv,a.trim())},this)),"trigger"in this._options&&"undefined"!=typeof this._options.trigger){var h,i;if("string"==typeof this._options.trigger&&(h=e.select(this._options.trigger),h.length>0))for(i=0;i<h.length;i++)b.observe(h[i],this._options.triggerEvent,Ink.bindEvent(this.open,this))}else this._options.autoDisplay&&this.open()};return g.prototype={_reposition:function(){this._modalDivStyle.top=this._modalDivStyle.left="50%",this._modalDivStyle.marginTop="-"+~~(d.elementHeight(this._modalDiv)/2)+"px",this._modalDivStyle.marginLeft="-"+~~(d.elementWidth(this._modalDiv)/2)+"px"},_onResize:function(a){"boolean"==typeof a?this._timeoutResizeFunction.call(this):this._resizeTimeout||"object"!=typeof a||(this._resizeTimeout=setTimeout(Ink.bind(this._timeoutResizeFunction,this),250))},_timeoutResizeFunction:function(){var a="CSS1Compat"===document.compatMode?document.documentElement:document.body,b=parseInt(a.clientHeight,10),c=parseInt(a.clientWidth,10);this._modalDivStyle.width=c>this.originalStatus.width?this._modalDivStyle.maxWidth:~~(.9*c)+"px",this._modalDivStyle.height=b>this.originalStatus.height&&parseInt(this._modalDivStyle.maxHeight,10)>=d.elementHeight(this._modalDiv)?this._modalDivStyle.maxHeight:~~(.9*b)+"px",this._resizeContainer(),this._reposition(),this._resizeTimeout=void 0},_onClick:function(a){var f=b.element(a);if(c.hasClassName(f,"ink-close")||c.hasClassName(f,"ink-dismiss")||d.findUpwardsByClass(f,"ink-close")||d.findUpwardsByClass(f,"ink-dismiss")||this._options.closeOnClick&&(!d.descendantOf(this._shadeElement,f)||f===this._shadeElement)){for(var g=e.select(".ink-alert",this._shadeElement),h=g.length,i=0;h>i;i++)if(d.descendantOf(g[i],f))return;b.stop(a),this.dismiss()}},_onKeyDown:function(a){27!==a.keyCode||this._wasDismissed||this.dismiss()},_resizeContainer:function(){this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="hidden";var a=d.elementHeight(this._modalDiv);this._modalHeader=e.select(".modal-header",this._modalDiv),this._modalHeader.length>0&&(this._modalHeader=this._modalHeader[0],a-=d.elementHeight(this._modalHeader)),this._modalFooter=e.select(".modal-footer",this._modalDiv),this._modalFooter.length>0&&(this._modalFooter=this._modalFooter[0],a-=d.elementHeight(this._modalFooter)),this._contentContainer.style.height=a+"px",a!==d.elementHeight(this._contentContainer)&&(this._contentContainer.style.height=~~(a-(d.elementHeight(this._contentContainer)-a))+"px"),this._markupMode||(this._contentContainer.style.overflow=this._contentContainer.style.overflowX="hidden",this._contentContainer.style.overflowY="auto",this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="visible")},_disableScroll:function(){this._oldScrollPos=d.scroll(),this._onScrollBinded=Ink.bindEvent(function(a){var c=b.element(a);d.descendantOf(this._modalShadow,c)||(b.stop(a),window.scrollTo(this._oldScrollPos[0],this._oldScrollPos[1]))},this),b.observe(window,"scroll",this._onScrollBinded),b.observe(document,"touchmove",this._onScrollBinded)},open:function(e){e&&b.stop(e);var f="CSS1Compat"===document.compatMode?document.documentElement:document.body;this._resizeTimeout=null,c.addClassName(this._modalShadow,"ink-shade"),this._modalShadowStyle.display=this._modalDivStyle.display="block",setTimeout(Ink.bind(function(){c.addClassName(this._modalShadow,"visible"),c.addClassName(this._modalDiv,"visible")},this),100),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this._markupMode||this.setContentMarkup(this._options.markup),"undefined"!=typeof this._options.width?(this._modalDivStyle.width=this._options.width,-1===this._options.width.indexOf("%")&&(this._modalDivStyle.maxWidth=d.elementWidth(this._modalDiv)+"px")):this._modalDivStyle.maxWidth=this._modalDivStyle.width=d.elementWidth(this._modalDiv)+"px",parseInt(f.clientWidth,10)<=parseInt(this._modalDivStyle.width,10)&&(this._modalDivStyle.width=~~(.9*parseInt(f.clientWidth,10))+"px"),"undefined"!=typeof this._options.height?(this._modalDivStyle.height=this._options.height,-1===this._options.height.indexOf("%")&&(this._modalDivStyle.maxHeight=d.elementHeight(this._modalDiv)+"px")):this._modalDivStyle.maxHeight=this._modalDivStyle.height=d.elementHeight(this._modalDiv)+"px",parseInt(f.clientHeight,10)<=parseInt(this._modalDivStyle.height,10)&&(this._modalDivStyle.height=~~(.9*parseInt(f.clientHeight,10))+"px"),this.originalStatus={viewportHeight:parseInt(f.clientHeight,10),viewportWidth:parseInt(f.clientWidth,10),width:parseInt(this._modalDivStyle.maxWidth,10),height:parseInt(this._modalDivStyle.maxHeight,10)},this._options.responsive?(this._onResize(!0),b.observe(window,"resize",this._handlers.resize)):(this._resizeContainer(),this._reposition()),this._options.onShow&&this._options.onShow(this),this._options.disableScroll&&this._disableScroll(),b.observe(this._shadeElement,"click",this._handlers.click),b.observe(document,"keydown",this._handlers.keyDown),a.registerInstance(this,this._shadeElement,"modal"),this._wasDismissed=!1},dismiss:function(){if(this._options.onDismiss){var a=this._options.onDismiss(this);if(a===!1)return}if(this._wasDismissed=!0,this._options.disableScroll&&(b.stopObserving(window,"scroll",this._onScrollBinded),b.stopObserving(document,"touchmove",this._onScrollBinded)),this._options.responsive&&b.stopObserving(window,"resize",this._handlers.resize),this._markupMode){c.removeClassName(this._modalDiv,"visible"),c.removeClassName(this._modalShadow,"visible");var d,e=Ink.bindEvent(function(){d&&(this._modalShadowStyle.display="none",b.stopObserving(document,"transitionend",e),b.stopObserving(document,"oTransitionEnd",e),b.stopObserving(document,"webkitTransitionEnd",e),clearInterval(d),d=void 0)},this);b.observe(document,"transitionend",e),b.observe(document,"oTransitionEnd",e),b.observe(document,"webkitTransitionEnd",e),d||(d=setInterval(Ink.bind(function(){this._modalShadowStyle.opacity>0||(this._modalShadowStyle.display="none",clearInterval(d),d=void 0)},this),500))}else this._modalShadow.parentNode.removeChild(this._modalShadow),this.destroy()},destroy:function(){a.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(a){if(this._markupMode)this._contentContainer.innerHTML=[a].join("");else{if(this._modalDiv.innerHTML=[a].join(""),this._contentContainer=e.select(".modal-body",this._modalDiv),!this._contentContainer.length){var b=e.select(".modal-header",this._modalDiv),d=e.select(".modal-footer",this._modalDiv);f.each(b,Ink.bind(function(a){a.parentNode.removeChild(a)},this)),f.each(d,Ink.bind(function(a){a.parentNode.removeChild(a)},this));var g=document.createElement("div");c.addClassName(g,"modal-body"),g.innerHTML=this._modalDiv.innerHTML,this._modalDiv.innerHTML="",f.each(b,Ink.bind(function(a){this._modalDiv.appendChild(a)},this)),this._modalDiv.appendChild(g),f.each(d,Ink.bind(function(a){this._modalDiv.appendChild(a)},this)),this._contentContainer=e.select(".modal-body",this._modalDiv)}this._contentContainer=this._contentContainer[0]}this._contentElement=this._modalDiv,this._resizeContainer()}},g}),Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(a,b,c,d,e){"use strict";var f=function(a,b){var c=document.createElement("a");return c.setAttribute("href","#"),void 0!==b&&c.setAttribute("data-index",b),c.innerHTML=a,c},g=function(b,e){if(this._element=a.elOrSelector(b,"1st argument"),this._options=Ink.extendObj({size:void 0,start:1,firstLabel:"First",lastLabel:"Last",previousLabel:"Previous",nextLabel:"Next",onChange:void 0,setHash:!1,hashParameter:"page",numberFormatter:function(a){return a+1}},e||{},d.data(this._element)),this._options.previousPageLabel||(this._options.previousPageLabel="Previous "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel="Next "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)},!a.isInteger(this._options.size))throw new TypeError("size option is a required integer!");if(!a.isInteger(this._options.start)&&this._options.start>0&&this._options.start<=this._options.size)throw new TypeError("start option is a required integer between 1 and size!");if(this._options.maxSize&&!a.isInteger(this._options.maxSize)&&this._options.maxSize>0)throw new TypeError("maxSize option is a positive integer!");if(this._options.size<0)throw new RangeError("size option must be equal or more than 0!");if(void 0!==this._options.onChange&&"function"!=typeof this._options.onChange)throw new TypeError("onChange option must be a function!");c.hasClassName(Ink.s("ul",this._element),"dotted")&&(this._options.numberFormatter=function(){return'<i class="icon-circle"></i>'}),this._current=this._options.start-1,this._itemLiEls=[],this._init()};return g.prototype={_init:function(){this._generateMarkup(this._element),this._updateItems(),this._observe(),a.registerInstance(this,this._element,"pagination")},_observe:function(){b.observe(this._element,"click",this._handlers.click)},_updateItems:function(){var a=this._itemLiEls,b=this._options.size===a.length,d,e,g;if(b)for(d=0,e=this._options.size;e>d;++d)c.setClassName(a[d],"active",d===this._current);else{for(d=a.length-1;d>=0;--d)this._ulEl.removeChild(a[d]);for(a=[],d=0,e=this._options.size;e>d;++d)g=document.createElement("li"),g.appendChild(f(this._options.numberFormatter(d),d)),c.setClassName(g,"active",d===this._current),this._ulEl.insertBefore(g,this._nextEl),a.push(g);this._itemLiEls=a}if(this._options.maxSize){var h=Math.floor(this._current/this._options.maxSize),i=this._options.maxSize*h,j=i+this._options.maxSize-1;for(d=0,e=this._options.size;e>d;++d)g=a[d],c.setClassName(g,"hide-all",i>d||d>j);this._pageStart=i,this._pageEnd=j,this._page=h,c.setClassName(this._prevPageEl,"disabled",!this.hasPreviousPage()),c.setClassName(this._nextPageEl,"disabled",!this.hasNextPage()),c.setClassName(this._firstEl,"disabled",this.isFirst()),c.setClassName(this._lastEl,"disabled",this.isLast())}c.setClassName(this._prevEl,"disabled",!this.hasPrevious()),c.setClassName(this._nextEl,"disabled",!this.hasNext())},_generateMarkup:function(a){c.addClassName(a,"ink-navigation");var b,d,g=!1;(b=e.select("ul.pagination",a)).length<1?(b=document.createElement("ul"),c.addClassName(b,"pagination")):(g=!0,b=b[0]),this._options.maxSize&&(d=document.createElement("li"),d.appendChild(f(this._options.firstLabel)),this._firstEl=d,c.addClassName(d,"first"),b.appendChild(d),d=document.createElement("li"),d.appendChild(f(this._options.previousPageLabel)),this._prevPageEl=d,c.addClassName(d,"previousPage"),b.appendChild(d)),d=document.createElement("li"),d.appendChild(f(this._options.previousLabel)),this._prevEl=d,c.addClassName(d,"previous"),b.appendChild(d),d=document.createElement("li"),d.appendChild(f(this._options.nextLabel)),this._nextEl=d,c.addClassName(d,"next"),b.appendChild(d),this._options.maxSize&&(d=document.createElement("li"),d.appendChild(f(this._options.nextPageLabel)),this._nextPageEl=d,c.addClassName(d,"nextPage"),b.appendChild(d),d=document.createElement("li"),d.appendChild(f(this._options.lastLabel)),this._lastEl=d,c.addClassName(d,"last"),b.appendChild(d)),g||a.appendChild(b),this._ulEl=b},_onClick:function(a){b.stop(a);var d=b.element(a);if("a"!==d.nodeName.toLowerCase()){do d=d.parentNode;while("a"!==d.nodeName.toLowerCase()&&d!==this._element);if(d===this._element)return}var e=d.parentNode;if("li"===e.nodeName.toLowerCase()&&!c.hasClassName(e,"active")&&!c.hasClassName(e,"disabled")){var f=c.hasClassName(e,"previous"),g=c.hasClassName(e,"next"),h=c.hasClassName(e,"previousPage"),i=c.hasClassName(e,"nextPage"),j=c.hasClassName(e,"first"),k=c.hasClassName(e,"last");if(j)this.setCurrent(0);else if(k)this.setCurrent(this._options.size-1);else if(h||i)this.setCurrent((h?-1:1)*this._options.maxSize,!0);else if(f||g)this.setCurrent(f?-1:1,!0);else{var l=parseInt(d.getAttribute("data-index"),10);this.setCurrent(l)}}},setSize:function(b){if(!a.isInteger(b))throw new TypeError("1st argument must be an integer number!");this._options.size=b,this._updateItems(),this._current=0},setCurrent:function(b,c){if(!a.isInteger(b))throw new TypeError("1st argument must be an integer number!");c&&(b+=this._current),0>b?b=0:b>this._options.size-1&&(b=this._options.size-1),this._current=b,this._updateItems(),this._options.onChange&&this._options.onChange(this)},getSize:function(){return this._options.size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._options.size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._options.size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._options.size-this._current>=this._options.maxSize+1},destroy:a.destroyComponent},g}),Ink.createModule("Ink.UI.ProgressBar","1",["Ink.Dom.Selector_1","Ink.Dom.Element_1"],function(a,b){"use strict";var c=function(c,d){if("object"!=typeof c){if("string"!=typeof c)throw"[Ink.UI.ProgressBar] :: Invalid selector";if(this._element=a.select(c),this._element.length<1)throw"[Ink.UI.ProgressBar] :: Selector didn't find any elements";this._element=this._element[0]}else this._element=c;this._options=Ink.extendObj({startValue:0,onStart:function(){},onEnd:function(){}},b.data(this._element)),this._options=Ink.extendObj(this._options,d||{}),this._value=this._options.startValue,this._init()};return c.prototype={_init:function(){if(this._elementBar=a.select(".bar",this._element),this._elementBar.length<1)throw"[Ink.UI.ProgressBar] :: Bar element not found";this._elementBar=this._elementBar[0],this._options.onStart=Ink.bind(this._options.onStart,this),this._options.onEnd=Ink.bind(this._options.onEnd,this),this.setValue(this._options.startValue)},setValue:function(a){this._options.onStart(this._value),a=parseInt(a,10),isNaN(a)||0>a?a=0:a>100&&(a=100),this._value=a,this._elementBar.style.width=this._value+"%",this._options.onEnd(this._value)}},c}),Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Loaded_1"],function(a,b,c){"use strict";var d={speed:10,gy:function(a){var b;if(b=a.offsetTop,a.offsetParent)for(;a=a.offsetParent;)b+=a.offsetTop;return b},scrollTop:function(){var a=document.body,b=document.documentElement;return a&&a.scrollTop?a.scrollTop:b&&b.scrollTop?b.scrollTop:window.pageYOffset?window.pageYOffset:0},add:function(b,c,d){a.observe(b,c,d)},end:function(b){return window.event?(window.event.cancelBubble=!0,window.event.returnValue=!1,void 0):(a.stop(b),void 0)},scroll:function(a){var b=Ink.UI.SmoothScroller.scrollTop();b+=a>b?Math.ceil((a-b)/Ink.UI.SmoothScroller.speed):(a-b)/Ink.UI.SmoothScroller.speed,window.scrollTo(0,b),(b===a||Ink.UI.SmoothScroller.offsetTop===b)&&clearInterval(Ink.UI.SmoothScroller.interval),Ink.UI.SmoothScroller.offsetTop=b},init:function(){c.run(Ink.UI.SmoothScroller.render)},render:function(){var c=b.select("a.scrollableLink");Ink.UI.SmoothScroller.end(this);for(var d=0;d<c.length;d++){var e=c[d];!e.href||-1===e.href.indexOf("#")||e.pathname!==location.pathname&&"/"+e.pathname!==location.pathname||(Ink.UI.SmoothScroller.add(e,"click",Ink.UI.SmoothScroller.end),a.observe(e,"click",Ink.bindEvent(Ink.UI.SmoothScroller.clickScroll,this,e)))}},clickScroll:function(a,c){if(Ink.UI.SmoothScroller.end(c),null!==c&&null!==c.getAttribute("href")){var d=c.href.indexOf("#");if(-1===d)return;var e=c.href.substr(d+1),f=b.select('a[name="'+e+'"],#'+e);if("undefined"!=typeof f[0]){if(-1===c.parentNode.className.indexOf("active")){var g=c.parentNode.parentNode,h=g.firstChild;do if("undefined"!=typeof h.tagName&&"LI"===h.tagName.toUpperCase()&&-1!==h.className.indexOf("active")){h.className=h.className.replace("active","");break}while(h=h.nextSibling);c.parentNode.className+=" active"}clearInterval(Ink.UI.SmoothScroller.interval),Ink.UI.SmoothScroller.interval=setInterval("Ink.UI.SmoothScroller.scroll("+Ink.UI.SmoothScroller.gy(f[0])+")",10)}}}};return d}),Ink.createModule("Ink.UI.SortableList","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(a,b,c,d,e,f){"use strict";var g=function(b,c){if(this._element=a.elOrSelector(b,"1st argument"),!a.isDOMElement(b)&&"string"!=typeof b)throw"[Ink.UI.SortableList] :: Invalid selector";if("string"==typeof b){if(this._element=Ink.Dom.Selector.select(b),this._element.length<1)throw"[Ink.UI.SortableList] :: Selector has returned no elements";this._element=this._element[0]}else this._element=b;if(this._options=Ink.extendObj({dragObject:"li"},Ink.Dom.Element.data(this._element)),this._options=Ink.extendObj(this._options,c||{}),this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)},this._model=[],this._index=void 0,this._isMoving=!1,this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if("ul"!==this._element.nodeName.toLowerCase())throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._createdFrom="DOM"}if(this._dragTriggers=e.select(this._options.dragObject,this._element),!this._dragTriggers)throw"[Ink.UI.SortableList] :: Drag object not found";this._init()};return g.prototype={_init:function(){"DOM"===this._createdFrom&&(this._extractModelFromDOM(),this._createdFrom="JSON");var c="ontouchstart"in document.documentElement;this._down=c?"touchstart":"mousedown",this._move=c?"touchmove":"mousemove",this._up=c?"touchend":"mouseup";var d=document.body;b.observe(d,this._move,this._handlers.move),b.observe(d,this._up,this._handlers.up),this._observe(),a.registerInstance(this,this._element,"sortableList")},_observe:function(){b.observe(this._element,this._down,this._handlers.down)},_extractModelFromDOM:function(){this._model=[];var a=this,b=e.select("> li",this._element);f.each(b,function(b){var c=b.innerHTML;a._model.push(c)})},_generateMarkup:function(){var a=document.createElement("ul");a.className="unstyled ink-sortable-list";var b=this;return f.each(this._model,function(c,d){var e=document.createElement("li");d===b._index&&(e.className="drag"),e.innerHTML=[c].join(""),a.appendChild(e)}),a},_getY:function(a){return 0===a.type.indexOf("touch")?a.changedTouches[0].pageY:"number"==typeof a.pageY?a.pageY:a.clientY},_refresh:function(b){var c=this._generateMarkup();this._element.parentNode.replaceChild(c,this._element),this._element=c,a.restoreIdAndClasses(this._element,this),this._dragTriggers=e.select(this._options.dragObject,this._element),b||this._observe()},_onDown:function(c){if(!this._isMoving){var d=b.element(c);if(!f.inArray(d,this._dragTriggers)){for(;!f.inArray(d,this._dragTriggers)&&"body"!==d.nodeName.toLowerCase();)d=d.parentNode;if("body"===d.nodeName.toLowerCase())return}b.stop(c);var e;if("li"!==d.nodeName.toLowerCase())for(;"li"!==d.nodeName.toLowerCase()&&"body"!==d.nodeName.toLowerCase();)d=d.parentNode;return e=d,this._index=a.childIndex(e),this._height=e.offsetHeight,this._startY=this._getY(c),this._isMoving=!0,document.body.style.cursor="move",this._refresh(!1),!1}},_onMove:function(a){if(this._isMoving){b.stop(a);var c=this._getY(a),d=c-this._startY,e=d>0?1:-1,f=e*Math.floor(Math.abs(d)/this._height);if(0!==f&&(f/=Math.abs(f),!(-1===f&&0===this._index||1===f&&this._index===this._model.length-1))){var g=f>0?this._index:this._index+f,h=0>f?this._index:this._index+f;this._model.splice(g,2,this._model[h],this._model[g]),this._index+=f,this._startY=c,this._refresh(!1)}}},_onUp:function(a){this._isMoving&&(b.stop(a),this._index=void 0,this._isMoving=!1,document.body.style.cursor="",this._refresh())},getModel:function(){return this._model.slice()},destroy:a.destroyComponent},g}),Ink.createModule("Ink.UI.Spy","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(a,b,c,d,e,f){"use strict";var g=function(b,c){this._rootElement=a.elOrSelector(b,"1st argument"),this._options=Ink.extendObj({target:void 0},d.data(this._rootElement)),this._options=Ink.extendObj(this._options,c||{}),this._options.target=a.elOrSelector(this._options.target,"Target"),this._scrollTimeout=null,this._init()};return g.prototype={_elements:[],_init:function(){b.observe(document,"scroll",Ink.bindEvent(this._onScroll,this)),this._elements.push(this._rootElement)},_onScroll:function(){var a=d.scrollHeight();if(!(a<this._rootElement.offsetTop)){for(var b=0,g=this._elements.length;g>b;b++)if(this._elements[b].offsetTop<=a&&this._elements[b]!==this._rootElement&&this._elements[b].offsetTop>this._rootElement.offsetTop)return;f.each(e.select("a",this._options.target),Ink.bind(function(a){var b="name"in this._rootElement&&this._rootElement.name?"#"+this._rootElement.name:"#"+this._rootElement.id;a.href.substr(a.href.indexOf("#"))===b?c.addClassName(d.findUpwardsByTag(a,"li"),"active"):c.removeClassName(d.findUpwardsByTag(a,"li"),"active")},this))}}},g}),Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(a,b,c,d,e){"use strict";var f=function(b,c){if("object"!=typeof b&&"string"!=typeof b)throw"[Sticky] :: Invalid selector defined";if("object"==typeof b)this._rootElement=b;else{if(this._rootElement=e.select(b),this._rootElement.length<=0)throw"[Sticky] :: Can't find any element with the specified selector";this._rootElement=this._rootElement[0]}this._options=Ink.extendObj({offsetBottom:0,offsetTop:0,topElement:void 0,bottomElement:void 0},d.data(this._rootElement)),this._options=Ink.extendObj(this._options,c||{}),this._options.topElement="undefined"!=typeof this._options.topElement?a.elOrSelector(this._options.topElement,"Top Element"):a.elOrSelector("body","Top Element"),this._options.bottomElement="undefined"!=typeof this._options.bottomElement?a.elOrSelector(this._options.bottomElement,"Bottom Element"):a.elOrSelector("body","Top Element"),this._computedStyle=window.getComputedStyle?window.getComputedStyle(this._rootElement,null):this._rootElement.currentStyle,this._dims={height:this._computedStyle.height,width:this._computedStyle.width},this._init()};return f.prototype={_init:function(){b.observe(document,"scroll",Ink.bindEvent(this._onScroll,this)),b.observe(window,"resize",Ink.bindEvent(this._onResize,this)),this._calculateOriginalSizes(),this._calculateOffsets()
},_onScroll:function(){var a="CSS1Compat"===document.compatMode?document.documentElement:document.body;return 100*d.elementWidth(this._rootElement)/a.clientWidth>90||a.clientWidth<=649?(d.hasAttribute(this._rootElement,"style")&&this._rootElement.removeAttribute("style"),void 0):(this._scrollTimeout&&clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(Ink.bind(function(){var a=d.scrollHeight();if(d.hasAttribute(this._rootElement,"style"))a<=this._options.originalTop-this._options.originalOffsetTop?this._rootElement.removeAttribute("style"):document.body.scrollHeight-(a+parseInt(this._dims.height,10))<this._options.offsetBottom?(this._rootElement.style.position="fixed",this._rootElement.style.top="auto",this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.bottom=this._options.offsetBottom<parseInt(document.body.scrollHeight-(document.documentElement.clientHeight+a),10)?this._options.originalOffsetBottom+"px":this._options.offsetBottom-parseInt(document.body.scrollHeight-(document.documentElement.clientHeight+a),10)+"px",this._rootElement.style.width=this._options.originalWidth+"px"):document.body.scrollHeight-(a+parseInt(this._dims.height,10))>=this._options.offsetBottom&&(this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.position="fixed",this._rootElement.style.bottom="auto",this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.top=this._options.originalOffsetTop+"px",this._rootElement.style.width=this._options.originalWidth+"px");else{if(a<=this._options.originalTop-this._options.originalOffsetTop)return;this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.position="fixed",this._rootElement.style.bottom="auto",this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.top=this._options.originalOffsetTop+"px",this._rootElement.style.width=this._options.originalWidth+"px"}this._scrollTimeout=void 0},this),0),void 0)},_onResize:function(){this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(Ink.bind(function(){this._rootElement.removeAttribute("style"),this._calculateOriginalSizes(),this._calculateOffsets()},this),0)},_calculateOffsets:function(){if("undefined"!=typeof this._options.topElement)if("body"!==this._options.topElement.nodeName.toLowerCase()){var a=d.elementHeight(this._options.topElement),b=d.elementTop(this._options.topElement);this._options.offsetTop=parseInt(a,10)+parseInt(b,10)+parseInt(this._options.originalOffsetTop,10)}else this._options.offsetTop=parseInt(this._options.originalOffsetTop,10);if("undefined"!=typeof this._options.bottomElement)if("body"!==this._options.bottomElement.nodeName.toLowerCase()){var c=d.elementHeight(this._options.bottomElement);this._options.offsetBottom=parseInt(c,10)+parseInt(this._options.originalOffsetBottom,10)}else this._options.offsetBottom=parseInt(this._options.originalOffsetBottom,10);this._onScroll()},_calculateOriginalSizes:function(){"undefined"==typeof this._options.originalOffsetTop&&(this._options.originalOffsetTop=parseInt(this._options.offsetTop,10),this._options.originalOffsetBottom=parseInt(this._options.offsetBottom,10)),this._options.originalTop=parseInt(this._rootElement.offsetTop,10),this._options.originalLeft=parseInt(this._rootElement.offsetLeft,10),isNaN(this._options.originalWidth=parseInt(this._dims.width,10))&&(this._options.originalWidth=0),this._options.originalWidth=parseInt(this._computedStyle.width,10)}},f}),Ink.createModule("Ink.UI.Table","1",["Ink.Net.Ajax_1","Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.String_1"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(a,c){if(this._rootElement=b.elOrSelector(a,"1st argument"),"table"!==this._rootElement.nodeName.toLowerCase())throw"[Ink.UI.Table] :: The element is not a table";this._options=Ink.extendObj({pageSize:void 0,endpoint:void 0,loadMode:"full",allowResetSorting:!1,visibleFields:void 0},e.data(this._rootElement)),this._options=Ink.extendObj(this._options,c||{}),this._markupMode="undefined"==typeof this._options.endpoint,this._options.visibleFields&&(this._options.visibleFields=this._options.visibleFields.split(",")),this._handlers={click:Ink.bindEvent(this._onClick,this)},this._originalFields=[],this._sortableFields={},this._originalData=this._data=[],this._headers=[],this._pagination=null,this._totalRows=0,this._init()};return i.prototype={_init:function(){if(this._markupMode){if(this._setHeadersHandlers(),g.each(f.select("tbody tr",this._rootElement),Ink.bind(function(a){this._data.push(a)},this)),this._originalData=this._data.slice(0),this._totalRows=this._data.length,"pageSize"in this._options&&"undefined"!=typeof this._options.pageSize){for(this._pagination=this._rootElement.nextSibling;1!==this._pagination.nodeType;)this._pagination=this._pagination.nextSibling;if("nav"!==this._pagination.nodeName.toLowerCase())throw"[Ink.UI.Table] :: Missing the pagination markup or is mis-positioned";var a=Ink.getModule("Ink.UI.Pagination",1);this._pagination=new a(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize),onChange:Ink.bind(function(a){this._paginate(a._current+1)},this)}),this._paginate(1)}}else this._getData(this._options.endpoint,!0)},_onClick:function(a){var d=c.element(a),i=e.data(d),j,k,l="pageSize"in this._options&&"undefined"!=typeof this._options.pageSize;if("th"===d.nodeName.toLowerCase()&&"sortable"in i&&"true"===i.sortable.toString()){if(c.stop(a),j=-1,g.inArray(d,this._headers))for(k=0;k<this._headers.length;k++)if(this._headers[k]===d){j=k;break}if(!this._markupMode&&l){for(var m in this._sortableFields)m!=="col_"+j&&(this._sortableFields[m]="none",this._headers[m.replace("col_","")].innerHTML=h.stripTags(this._headers[m.replace("col_","")].innerHTML));"asc"===this._sortableFields["col_"+j]?(this._sortableFields["col_"+j]="desc",this._headers[j].innerHTML=h.stripTags(this._headers[j].innerHTML)+'<i class="icon-caret-down"></i>'):(this._sortableFields["col_"+j]="asc",this._headers[j].innerHTML=h.stripTags(this._headers[j].innerHTML)+'<i class="icon-caret-up"></i>'),this._pagination.setCurrent(this._pagination._current)}else{if(-1===j)return;if("desc"===this._sortableFields["col_"+j]&&this._options.allowResetSorting&&"true"===this._options.allowResetSorting.toString())this._headers[j].innerHTML=h.stripTags(this._headers[j].innerHTML),this._sortableFields["col_"+j]="none",this._data=this._originalData.slice(0);else{for(var m in this._sortableFields)m!=="col_"+j&&(this._sortableFields[m]="none",this._headers[m.replace("col_","")].innerHTML=h.stripTags(this._headers[m.replace("col_","")].innerHTML));this._sort(j),"asc"===this._sortableFields["col_"+j]?(this._data.reverse(),this._sortableFields["col_"+j]="desc",this._headers[j].innerHTML=h.stripTags(this._headers[j].innerHTML)+'<i class="icon-caret-down"></i>'):(this._sortableFields["col_"+j]="asc",this._headers[j].innerHTML=h.stripTags(this._headers[j].innerHTML)+'<i class="icon-caret-up"></i>')}var n=f.select("tbody",this._rootElement)[0];b.cleanChildren(n),g.each(this._data,function(a){n.appendChild(a)}),this._pagination.setCurrent(0),this._paginate(1)}}},_paginate:function(a){g.each(this._data,Ink.bind(function(b,c){c>=(a-1)*parseInt(this._options.pageSize,10)&&c<(a-1)*parseInt(this._options.pageSize,10)+parseInt(this._options.pageSize,10)?d.removeClassName(b,"hide-all"):d.addClassName(b,"hide-all")},this))},_sort:function(a){this._data.sort(Ink.bind(function(b,c){var d=e.textContent(f.select("td",b)[a]),g=e.textContent(f.select("td",c)[a]),h=new RegExp(/\d/g);return!isNaN(d)&&h.test(d)?d=parseInt(d,10):isNaN(d)||(d=parseFloat(d)),!isNaN(g)&&h.test(g)?g=parseInt(g,10):isNaN(g)||(g=parseFloat(g)),d===g?0:d>g?1:-1},this))},_setHeaders:function(a,b){var c,d,g,h,i,j=0;if(0===(g=f.select("thead",this._rootElement)).length){g=this._rootElement.createTHead(),h=g.insertRow(0);for(c in a)if(a.hasOwnProperty(c)){if(this._options.visibleFields&&-1===this._options.visibleFields.indexOf(c))continue;i=document.createElement("th"),d=a[c],"sortable"in d&&"true"===d.sortable.toString()&&i.setAttribute("data-sortable","true"),"label"in d&&e.setTextContent(i,d.label),this._originalFields.push(c),h.appendChild(i)}}else{var k=b[0];for(c in k)if(k.hasOwnProperty(c)){if(this._options.visibleFields&&-1===this._options.visibleFields.indexOf(c))continue;this._originalFields.push(c)}}},_setHeadersHandlers:function(){var a=f.select("thead",this._rootElement);a.length&&(c.observe(a[0],"click",this._handlers.click),this._headers=f.select("thead tr th",this._rootElement),g.each(this._headers,Ink.bind(function(a,b){var c=e.data(a);"sortable"in c&&"true"===c.sortable.toString()&&(this._sortableFields["col_"+b]="none")},this)))},_setData:function(a){var b,c,d,e,g,h;c=f.select("tbody",this._rootElement),0===c.length?(c=document.createElement("tbody"),this._rootElement.appendChild(c)):(c=c[0],c.innerHTML=""),this._data=[];for(g in a)if(a.hasOwnProperty(g)){d=document.createElement("tr"),c.appendChild(d),h=0;for(b in a[g])if(a[g].hasOwnProperty(b)){if(this._options.visibleFields&&-1===this._options.visibleFields.indexOf(b))continue;e=d.insertCell(h++),e.innerHTML=a[g][b]}this._data.push(d)}this._originalData=this._data.slice(0)},setEndpoint:function(a,b){this._markupMode||(this._options.endpoint=a,this._pagination.setCurrent(b?parseInt(b,10):0))},_setPagination:function(){var a="pageSize"in this._options&&"undefined"!=typeof this._options.pageSize;if("pageSize"in this._options&&"undefined"!=typeof this._options.pageSize&&!this._pagination){this._pagination=document.createElement("nav"),this._pagination.className="ink-navigation",this._rootElement.parentNode.insertBefore(this._pagination,this._rootElement.nextSibling),this._pagination.appendChild(document.createElement("ul")).className="pagination";var b=Ink.getModule("Ink.UI.Pagination",1);this._pagination=new b(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize),onChange:Ink.bind(function(){this._getData(this._options.endpoint)},this)})}},_getData:function(a){Ink.requireModules(["Ink.Util.Url_1"],Ink.bind(function(b){var c=b.parseUrl(a),d="pageSize"in this._options&&"undefined"!=typeof this._options.pageSize,e=this._pagination?this._pagination._current+1:1;if(c.query=c.query?c.query.split("&"):[],d){c.query.push("rows_per_page="+this._options.pageSize),c.query.push("page="+e);var f="";for(var g in this._sortableFields)if("none"!==this._sortableFields[g]){c.query.push("sortField="+this._originalFields[parseInt(g.replace("col_",""),10)]),c.query.push("sortOrder="+this._sortableFields[g]);break}this._getDataViaAjax(a+"?"+c.query.join("&"))}else this._getDataViaAjax(a)},this))},_getDataViaAjax:function(b){var c="pageSize"in this._options&&"undefined"!=typeof this._options.pageSize;new a(b,{method:"GET",contentType:"application/json",sanitizeJSON:!0,onSuccess:Ink.bind(function(a){if(200===a.status){var b=JSON.parse(a.responseText);0===this._headers.length&&(this._setHeaders(b.headers,b.rows),this._setHeadersHandlers()),this._setData(b.rows),c?this._totalRows&&parseInt(b.totalRows,10)!==parseInt(this._totalRows,10)?(this._totalRows=b.totalRows,this._pagination.setSize(Math.ceil(this._totalRows/this._options.pageSize))):this._totalRows=b.totalRows:this._totalRows&&b.rows.length!==parseInt(this._totalRows,10)?(this._totalRows=b.rows.length,this._pagination.setSize(Math.ceil(this._totalRows/this._options.pageSize))):this._totalRows=b.rows.length,this._setPagination()}},this)})}},i}),Ink.createModule("Ink.UI.Tabs","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(a,b,c,d,e,f){"use strict";var g=function(b,c){if(a.isDOMElement(b))this._element=b;else{if(b=e.select(b),0===b.length)throw new TypeError("1st argument must either be a DOM Element or a selector expression!");this._element=b[0]}this._options=Ink.extendObj({preventUrlChange:!1,active:void 0,disabled:[],onBeforeChange:void 0,onChange:void 0,triggerEventsOnLoad:!0},c||{},d.data(b)),this._handlers={tabClicked:Ink.bindEvent(this._onTabClicked,this),disabledTabClicked:Ink.bindEvent(this._onDisabledTabClicked,this),resize:Ink.bindEvent(this._onResize,this)},this._init()};return g.prototype={_init:function(){this._menu=e.select(".tabs-nav",this._element)[0],this._menuTabs=this._getChildElements(this._menu),this._contentTabs=e.select(".tabs-content",this._element),this._initializeDom(),this._observe(),this._setFirstActive(),this._changeTab(this._activeMenuLink,this._options.triggerEventsOnLoad),this._handlers.resize(),a.registerInstance(this,this._element,"tabs")},_initializeDom:function(){for(var a=0;a<this._contentTabs.length;a++)c.hide(this._contentTabs[a])},_observe:function(){f.each(this._menuTabs,Ink.bind(function(a){var b=e.select("a",a)[0];f.inArray(b.getAttribute("href"),this._options.disabled)?this.disable(b):this.enable(b)},this)),b.observe(window,"resize",this._handlers.resize)},_setFirstActive:function(){var a=window.location.hash;this._activeContentTab=e.select(a,this._element)[0]||e.select(this._hashify(this._options.active),this._element)[0]||e.select(".tabs-content",this._element)[0],this._activeMenuLink=this._findLinkByHref(this._activeContentTab.getAttribute("id")),this._activeMenuTab=this._activeMenuLink.parentNode},_changeTab:function(a,b){b&&"undefined"!=typeof this._options.onBeforeChange&&this._options.onBeforeChange(this);var d=a.getAttribute("href");c.removeClassName(this._activeMenuTab,"active"),c.removeClassName(this._activeContentTab,"active"),c.addClassName(this._activeContentTab,"hide-all"),this._activeMenuLink=a,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeContentTab=e.select(d.substr(d.indexOf("#")),this._element)[0],c.addClassName(this._activeMenuTab,"active"),c.addClassName(this._activeContentTab,"active"),c.removeClassName(this._activeContentTab,"hide-all"),c.show(this._activeContentTab),b&&"undefined"!=typeof this._options.onChange&&this._options.onChange(this)},_onTabClicked:function(a){b.stop(a);var c=b.findElement(a,"A");"a"===c.nodeName.toLowerCase()&&("true"!==this._options.preventUrlChange.toString()&&(window.location.hash=c.getAttribute("href").substr(c.getAttribute("href").indexOf("#"))),c!==this._activeMenuLink&&this.changeTab(c))},_onDisabledTabClicked:function(a){b.stop(a)},_onResize:function(){var b=a.currentLayout();b!==this._lastLayout&&(b===a.Layouts.SMALL||b===a.Layouts.MEDIUM?(c.removeClassName(this._menu,"menu"),c.removeClassName(this._menu,"horizontal")):(c.addClassName(this._menu,"menu"),c.addClassName(this._menu,"horizontal")),this._lastLayout=b)},_hashify:function(a){return a?0===a.indexOf("#")?a:"#"+a:""},_findLinkByHref:function(a){a=this._hashify(a);var b;return f.each(this._menuTabs,Ink.bind(function(c){var d=e.select("a",c)[0];-1!==d.getAttribute("href").indexOf("#")&&d.getAttribute("href").substr(d.getAttribute("href").indexOf("#"))===a&&(b=d)},this)),b},_getChildElements:function(a){for(var b=[],c=a.children,d=0;d<c.length;d++)1===c[d].nodeType&&b.push(c[d]);return b},changeTab:function(a){var b=1===a.nodeType?a:this._findLinkByHref(this._hashify(a));b&&!c.hasClassName(b,"ink-disabled")&&this._changeTab(b,!0)},disable:function(a){var d=1===a.nodeType?a:this._findLinkByHref(this._hashify(a));d&&(b.stopObserving(d,"click",this._handlers.tabClicked),b.observe(d,"click",this._handlers.disabledTabClicked),c.addClassName(d,"ink-disabled"))},enable:function(a){var d=1===a.nodeType?a:this._findLinkByHref(this._hashify(a));d&&(b.stopObserving(d,"click",this._handlers.disabledTabClicked),b.observe(d,"click",this._handlers.tabClicked),c.removeClassName(d,"ink-disabled"))},activeTab:function(){return this._activeContentTab.getAttribute("id")},activeMenuTab:function(){return this._activeMenuTab},activeMenuLink:function(){return this._activeMenuLink},activeContentTab:function(){return this._activeContentTab},destroy:a.destroyComponent},g}),Ink.createModule("Ink.UI.Toggle","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(a,b,c,d,e,f){"use strict";var g=function(a,b){if("string"!=typeof a&&"object"!=typeof a)throw"[Ink.UI.Toggle] Invalid CSS selector to determine the root element";if("string"==typeof a){if(this._rootElement=e.select(a),this._rootElement.length<=0)throw"[Ink.UI.Toggle] Root element not found";this._rootElement=this._rootElement[0]}else this._rootElement=a;if(this._options=Ink.extendObj({target:void 0,triggerEvent:"click",closeOnClick:!0,closeOnInsideClick:"a[href]"},b||{},d.data(this._rootElement)),this._targets=function(a){return"string"==typeof a?e.select(a):"object"==typeof a?a.constructor===Array?a:[a]:[]}(this._options.target),!this._targets.length)throw"[Ink.UI.Toggle] Toggle target was not found! Supply a valid selector, array, or element through the `target` option.";this._init()};return g.prototype={_init:function(){this._accordion=c.hasClassName(this._rootElement.parentNode,"accordion")||c.hasClassName(this._targets[0].parentNode,"accordion"),b.observe(this._rootElement,this._options.triggerEvent,Ink.bindEvent(this._onTriggerEvent,this)),"true"===this._options.closeOnClick.toString()&&b.observe(document,"click",Ink.bindEvent(this._onClick,this)),this._options.closeOnInsideClick&&b.observeMulti(this._targets,"click",Ink.bindEvent(function(a){d.findUpwardsBySelector(b.element(a),this._options.closeOnInsideClick)&&this._dismiss()},this))},_onTriggerEvent:function(a){if(this._accordion){var f,g,h;for(h=c.hasClassName(this._targets[0].parentNode,"accordion")?this._targets[0].parentNode:this._targets[0].parentNode.parentNode,f=e.select(".toggle",h),g=0;g<f.length;g+=1){var i=d.data(f[g]),j=e.select(i.target,h);j.length>0&&j[0]!==this._targets[0]&&(j[0].style.display="none")}}for(var k,l,m=0,n=this._targets.length;n>m;m++)k="none"===c.getStyle(this._targets[m],"display")?"show-all":"hide-all",l="none"===c.getStyle(this._targets[m],"display")?"block":"none",c.removeClassName(this._targets[m],"show-all"),c.removeClassName(this._targets[m],"hide-all"),c.addClassName(this._targets[m],k),this._targets[m].style.display=l;"show-all"===k?c.addClassName(this._rootElement,"active"):c.removeClassName(this._rootElement,"active"),b.stop(a)},_onClick:function(a){var c=b.element(a),e,g=f.some(this._targets,function(a){return d.isAncestorOf(a,c)});if(this._rootElement!==c&&!d.isAncestorOf(this._rootElement,c)&&!g){if((e=Ink.ss(".ink-shade")).length)for(var h=e.length,i=0;h>i;i++)if(d.isAncestorOf(e[i],c)&&d.isAncestorOf(e[i],this._rootElement))return;d.findUpwardsByClass(c,"toggle")&&this._dismiss(this._rootElement)}},_dismiss:function(){if("none"!==c.getStyle(this._targets[0],"display")){for(var a=0,b=this._targets.length;b>a;a++)c.removeClassName(this._targets[a],"show-all"),c.addClassName(this._targets[a],"hide-all"),this._targets[a].style.display="none";c.removeClassName(this._rootElement,"active")}}},g}),Ink.createModule("Ink.UI.Tooltip","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Css_1","Ink.Dom.Browser_1"],function(a,b,c,d,e,f){"use strict";function g(a,b){this._init(a,b||{})}function h(a,b){this._init(a,b)}var i,j,k;!function(){for(var a=document.createElement("DIV"),b=["transition","oTransition","msTransition","mozTransition","webkitTransition"],c=0;c<b.length;c++)if("undefined"!=typeof a.style[b[c]+"Duration"]){i=b[c]+"Duration",j=b[c]+"Property",k=b[c]+"TimingFunction";break}}();var l=document.getElementsByTagName("body"),m=l&&l.length?l[0]:document.documentElement;return g.prototype={_init:function(a,b){var c;if(this.options=Ink.extendObj({where:"up",zIndex:1e4,left:10,top:10,spacing:8,forever:0,color:"",timeout:0,delay:0,template:null,templatefield:null,fade:.3,text:""},b||{}),"string"==typeof a)c=d.select(a);else{if("object"!=typeof a)throw"Element expected";c=[a]}this.tooltips=[];for(var e=0,f=c.length;f>e;e++)this.tooltips[e]=new h(this,c[e])},destroy:function(){e.each(this.tooltips,function(a){a._destroy()}),this.tooltips=null,this.options=null}},h.prototype={_oppositeDirections:{left:"right",right:"left",up:"down",down:"up"},_init:function(a,c){b.observe(c,"mouseover",Ink.bindEvent(this._onMouseOver,this)),b.observe(c,"mouseout",Ink.bindEvent(this._onMouseOut,this)),b.observe(c,"mousemove",Ink.bindEvent(this._onMouseMove,this)),this.root=a,this.element=c,this._delayTimeout=null,this.tooltip=null},_makeTooltip:function(a){if(!this._getOpt("text"))return!1;var c=this._createTooltipElement();this.tooltip&&this._removeTooltip(),this.tooltip=c,this._fadeInTooltipElement(c),this._placeTooltipElement(c,a),b.observe(c,"mouseover",Ink.bindEvent(this._onTooltipMouseOver,this));var d=this._getFloatOpt("timeout");d&&setTimeout(Ink.bind(function(){this.tooltip===c&&this._removeTooltip()},this),1e3*d)},_createTooltipElement:function(){var b=this._getOpt("template"),e=this._getOpt("templatefield"),g,h;if(b){var i=document.createElement("DIV");if(i.innerHTML=a.elOrSelector(b,"options.template").outerHTML,g=i.firstChild,e){if(h=d.select(e,g),!h)throw"options.templatefield must be a valid selector within options.template";h=h[0]}else h=g}else g=document.createElement("DIV"),f.addClassName(g,"ink-tooltip"),f.addClassName(g,this._getOpt("color")),h=document.createElement("DIV"),f.addClassName(h,"content"),g.appendChild(h);return this._getOpt("html")?h.innerHTML=this._getOpt("html"):c.setTextContent(h,this._getOpt("text")),g.style.display="block",g.style.position="absolute",g.style.zIndex=this._getIntOpt("zIndex"),g},_fadeInTooltipElement:function(a){var b=this._getFloatOpt("fade");i&&b&&(a.style.opacity="0",a.style[i]=b+"s",a.style[j]="opacity",a.style[k]="ease-in-out",setTimeout(function(){a.style.opacity="1"},0))},_placeTooltipElement:function(a,b){var d=this._getOpt("where");if("mousemove"===d||"mousefix"===d){var e=b;this._setPos(e[0],e[1]),m.appendChild(a)}else if(d.match(/(up|down|left|right)/)){m.appendChild(a);var g=c.offset(this.element),h=g[0],i=g[1];h instanceof Array&&(i=h[1],h=h[0]);var j=c.elementWidth(this.element)/2-c.elementWidth(a)/2,k=c.elementHeight(this.element)/2-c.elementHeight(a)/2,l=this._getIntOpt("spacing"),n=c.elementDimensions(a),o=c.elementDimensions(this.element),p=c.scrollWidth()+c.viewportWidth(),q=c.scrollHeight()+c.viewportHeight();"left"===d&&h-n[0]<0?d="right":"right"===d&&h+n[0]>p?d="left":"up"===d&&i-n[1]<0?d="down":"down"===d&&i+n[1]>q&&(d="up"),"up"===d?(i-=n[1],i-=l,h+=j):"down"===d?(i+=o[1],i+=l,h+=j):"left"===d?(h-=n[0],h-=l,i+=k):"right"===d&&(h+=o[0],h+=l,i+=k);var r=null;d.match(/(up|down|left|right)/)&&(r=document.createElement("SPAN"),f.addClassName(r,"arrow"),f.addClassName(r,this._oppositeDirections[d]),a.appendChild(r));var s=this._getLocalScroll(),t=h-s[0],u=i-s[1],v=u+n[1]-q,w=t+n[0]-p,x=0-t,y=0-u;v>0?(r&&(r.style.top=n[1]/2+v+"px"),u-=v):y>0?(r&&(r.style.top=n[1]/2-y+"px"),u+=y):w>0?(r&&(r.style.left=n[0]/2+w+"px"),t-=w):x>0&&(r&&(r.style.left=n[0]/2-x+"px"),t+=x),a.style.left=t+"px",a.style.top=u+"px"}},_removeTooltip:function(){var a=this.tooltip;if(a){var b=Ink.bind(c.remove,{},a);"mousemove"!==this._getOpt("where")&&i?(a.style.opacity=0,setTimeout(b,1e3*this._getFloatOpt("fade"))):b(),this.tooltip=null}},_getOpt:function(a){var b=c.data(this.element)[c._camelCase("tip-"+a)];if(b)return b;var d=this.root.options[a];return"undefined"!=typeof d?d:void 0},_getIntOpt:function(a){return parseInt(this._getOpt(a),10)},_getFloatOpt:function(a){return parseFloat(this._getOpt(a),10)},_destroy:function(){this.tooltip&&c.remove(this.tooltip),this.root=null,this.element=null,this.tooltip=null},_onMouseOver:function(a){var b=this._getMousePosition(a),c=this._getFloatOpt("delay");c?this._delayTimeout=setTimeout(Ink.bind(function(){this.tooltip||this._makeTooltip(b),this._delayTimeout=null},this),1e3*c):this._makeTooltip(b)},_onMouseMove:function(a){if("mousemove"===this._getOpt("where")&&this.tooltip){var b=this._getMousePosition(a);this._setPos(b[0],b[1])}},_onMouseOut:function(){this._getIntOpt("forever")||this._removeTooltip(),this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null)},_onTooltipMouseOver:function(){this.tooltip&&this._removeTooltip()},_setPos:function(a,b){a+=this._getIntOpt("left"),b+=this._getIntOpt("top");var d=this._getPageXY();if(this.tooltip){var e=[c.elementWidth(this.tooltip),c.elementHeight(this.tooltip)],f=this._getScroll();e[0]+a-f[0]>=d[0]-20&&(a=a-e[0]-this._getIntOpt("left")-10),e[1]+b-f[1]>=d[1]-20&&(b=b-e[1]-this._getIntOpt("top")-10),this.tooltip.style.left=a+"px",this.tooltip.style.top=b+"px"}},_getPageXY:function(){var a=0,b=0;return"number"==typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(a=document.body.clientWidth,b=document.body.clientHeight),[parseInt(a,10),parseInt(b,10)]},_getScroll:function(){var a=document.documentElement,b=document.body;return a&&(a.scrollLeft||a.scrollTop)?[a.scrollLeft,a.scrollTop]:b?[b.scrollLeft,b.scrollTop]:[0,0]},_getLocalScroll:function(){for(var a=[0,0],b=this.element.parentNode,c,d;b&&b!==document.documentElement&&b!==document.body;)c=b.scrollLeft,d=b.scrollTop,c&&(a[0]+=c),d&&(a[1]+=d),b=b.parentNode;return a},_getMousePosition:function(a){return[parseInt(b.pointerX(a),10),parseInt(b.pointerY(a),10)]}},g}),Ink.createModule("Ink.UI.TreeView","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(a,b,c,d,e,f){"use strict";var g=function(b,c){if(!a.isDOMElement(b)&&"string"!=typeof b)throw"[Ink.UI.TreeView] :: Invalid selector";if("string"==typeof b){if(this._element=e.select(b),this._element.length<1)throw"[Ink.UI.TreeView] :: Selector has returned no elements";this._element=this._element[0]}else this._element=b;this._options=Ink.extendObj({node:"li",child:"ul"},d.data(this._element)),this._options=Ink.extendObj(this._options,c||{}),this._init()};return g.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)},b.observe(this._element,"click",this._handlers.click);var a=e.select(this._options.node,this._element),d;f.each(a,Ink.bind(function(a){c.hasClassName(a,"open")||(c.hasClassName(a,"closed")||c.addClassName(a,"closed"),d=e.select(this._options.child,a),f.each(d,Ink.bind(function(a){c.hasClassName(a,"hide-all")||c.addClassName(a,"hide-all")},this)))},this))},_onClick:function(a){var d=b.element(a);if("."===this._options.node[0]){if(!c.hasClassName(d,this._options.node.substr(1)))for(;!c.hasClassName(d,this._options.node.substr(1))&&"body"!==d.nodeName.toLowerCase();)d=d.parentNode}else if("#"===this._options.node[0]){if(d.id!==this._options.node.substr(1))for(;d.id!==this._options.node.substr(1)&&"body"!==d.nodeName.toLowerCase();)d=d.parentNode}else if(d.nodeName.toLowerCase()!==this._options.node)for(;d.nodeName.toLowerCase()!==this._options.node&&"body"!==d.nodeName.toLowerCase();)d=d.parentNode;if("body"!==d.nodeName.toLowerCase()){var f=e.select(this._options.child,d);f.length>0&&(b.stop(a),f=f[0],c.hasClassName(f,"hide-all")?(c.removeClassName(f,"hide-all"),c.addClassName(d,"open"),c.removeClassName(d,"closed")):(c.addClassName(f,"hide-all"),c.removeClassName(d,"open"),c.addClassName(d,"closed")))}}},g});